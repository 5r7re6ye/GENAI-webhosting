(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Zd={exports:{}},No={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lv;function oS(){if(lv)return No;lv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:c}}return No.Fragment=e,No.jsx=n,No.jsxs=n,No}var ov;function cS(){return ov||(ov=1,Zd.exports=oS()),Zd.exports}var m=cS(),Jd={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv;function uS(){if(cv)return Re;cv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),S=Symbol.iterator;function P(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,Y={};function X(D,q,ae){this.props=D,this.context=q,this.refs=Y,this.updater=ae||G}X.prototype.isReactComponent={},X.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},X.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function se(){}se.prototype=X.prototype;function re(D,q,ae){this.props=D,this.context=q,this.refs=Y,this.updater=ae||G}var ne=re.prototype=new se;ne.constructor=re,k(ne,X.prototype),ne.isPureReactComponent=!0;var ue=Array.isArray;function me(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(D,q,ae){var ce=ae.ref;return{$$typeof:i,type:D,key:q,ref:ce!==void 0?ce:null,props:ae}}function V(D,q){return C(D.type,q,D.props)}function x(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function M(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return q[ae]})}var N=/\/+/g;function Ne(D,q){return typeof D=="object"&&D!==null&&D.key!=null?M(""+D.key):q.toString(36)}function Ge(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(me,me):(D.status="pending",D.then(function(q){D.status==="pending"&&(D.status="fulfilled",D.value=q)},function(q){D.status==="pending"&&(D.status="rejected",D.reason=q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function F(D,q,ae,ce,ge){var ye=typeof D;(ye==="undefined"||ye==="boolean")&&(D=null);var Me=!1;if(D===null)Me=!0;else switch(ye){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(D.$$typeof){case i:case e:Me=!0;break;case T:return Me=D._init,F(Me(D._payload),q,ae,ce,ge)}}if(Me)return ge=ge(D),Me=ce===""?"."+Ne(D,0):ce,ue(ge)?(ae="",Me!=null&&(ae=Me.replace(N,"$&/")+"/"),F(ge,q,ae,"",function(Cn){return Cn})):ge!=null&&(x(ge)&&(ge=V(ge,ae+(ge.key==null||D&&D.key===ge.key?"":(""+ge.key).replace(N,"$&/")+"/")+Me)),q.push(ge)),1;Me=0;var rt=ce===""?".":ce+":";if(ue(D))for(var Ue=0;Ue<D.length;Ue++)ce=D[Ue],ye=rt+Ne(ce,Ue),Me+=F(ce,q,ae,ye,ge);else if(Ue=P(D),typeof Ue=="function")for(D=Ue.call(D),Ue=0;!(ce=D.next()).done;)ce=ce.value,ye=rt+Ne(ce,Ue++),Me+=F(ce,q,ae,ye,ge);else if(ye==="object"){if(typeof D.then=="function")return F(Ge(D),q,ae,ce,ge);throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Me}function $(D,q,ae){if(D==null)return D;var ce=[],ge=0;return F(D,ce,"","",function(ye){return q.call(ae,ye,ge++)}),ce}function oe(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var Ae=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Oe={map:$,forEach:function(D,q,ae){$(D,function(){q.apply(this,arguments)},ae)},count:function(D){var q=0;return $(D,function(){q++}),q},toArray:function(D){return $(D,function(q){return q})||[]},only:function(D){if(!x(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Re.Activity=A,Re.Children=Oe,Re.Component=X,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=re,Re.StrictMode=r,Re.Suspense=y,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Re.__COMPILER_RUNTIME={__proto__:null,c:function(D){return I.H.useMemoCache(D)}},Re.cache=function(D){return function(){return D.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(D,q,ae){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ce=k({},D.props),ge=D.key;if(q!=null)for(ye in q.key!==void 0&&(ge=""+q.key),q)!R.call(q,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&q.ref===void 0||(ce[ye]=q[ye]);var ye=arguments.length-2;if(ye===1)ce.children=ae;else if(1<ye){for(var Me=Array(ye),rt=0;rt<ye;rt++)Me[rt]=arguments[rt+2];ce.children=Me}return C(D.type,ge,ce)},Re.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Re.createElement=function(D,q,ae){var ce,ge={},ye=null;if(q!=null)for(ce in q.key!==void 0&&(ye=""+q.key),q)R.call(q,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ge[ce]=q[ce]);var Me=arguments.length-2;if(Me===1)ge.children=ae;else if(1<Me){for(var rt=Array(Me),Ue=0;Ue<Me;Ue++)rt[Ue]=arguments[Ue+2];ge.children=rt}if(D&&D.defaultProps)for(ce in Me=D.defaultProps,Me)ge[ce]===void 0&&(ge[ce]=Me[ce]);return C(D,ye,ge)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(D){return{$$typeof:p,render:D}},Re.isValidElement=x,Re.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:oe}},Re.memo=function(D,q){return{$$typeof:_,type:D,compare:q===void 0?null:q}},Re.startTransition=function(D){var q=I.T,ae={};I.T=ae;try{var ce=D(),ge=I.S;ge!==null&&ge(ae,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(me,Ae)}catch(ye){Ae(ye)}finally{q!==null&&ae.types!==null&&(q.types=ae.types),I.T=q}},Re.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Re.use=function(D){return I.H.use(D)},Re.useActionState=function(D,q,ae){return I.H.useActionState(D,q,ae)},Re.useCallback=function(D,q){return I.H.useCallback(D,q)},Re.useContext=function(D){return I.H.useContext(D)},Re.useDebugValue=function(){},Re.useDeferredValue=function(D,q){return I.H.useDeferredValue(D,q)},Re.useEffect=function(D,q){return I.H.useEffect(D,q)},Re.useEffectEvent=function(D){return I.H.useEffectEvent(D)},Re.useId=function(){return I.H.useId()},Re.useImperativeHandle=function(D,q,ae){return I.H.useImperativeHandle(D,q,ae)},Re.useInsertionEffect=function(D,q){return I.H.useInsertionEffect(D,q)},Re.useLayoutEffect=function(D,q){return I.H.useLayoutEffect(D,q)},Re.useMemo=function(D,q){return I.H.useMemo(D,q)},Re.useOptimistic=function(D,q){return I.H.useOptimistic(D,q)},Re.useReducer=function(D,q,ae){return I.H.useReducer(D,q,ae)},Re.useRef=function(D){return I.H.useRef(D)},Re.useState=function(D){return I.H.useState(D)},Re.useSyncExternalStore=function(D,q,ae){return I.H.useSyncExternalStore(D,q,ae)},Re.useTransition=function(){return I.H.useTransition()},Re.version="19.2.0",Re}var uv;function Hm(){return uv||(uv=1,Jd.exports=uS()),Jd.exports}var ie=Hm(),Wd={exports:{}},Co={},em={exports:{}},tm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function hS(){return hv||(hv=1,(function(i){function e(F,$){var oe=F.length;F.push($);e:for(;0<oe;){var Ae=oe-1>>>1,Oe=F[Ae];if(0<o(Oe,$))F[Ae]=$,F[oe]=Oe,oe=Ae;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var $=F[0],oe=F.pop();if(oe!==$){F[0]=oe;e:for(var Ae=0,Oe=F.length,D=Oe>>>1;Ae<D;){var q=2*(Ae+1)-1,ae=F[q],ce=q+1,ge=F[ce];if(0>o(ae,oe))ce<Oe&&0>o(ge,ae)?(F[Ae]=ge,F[ce]=oe,Ae=ce):(F[Ae]=ae,F[q]=oe,Ae=q);else if(ce<Oe&&0>o(ge,oe))F[Ae]=ge,F[ce]=oe,Ae=ce;else break e}}return $}function o(F,$){var oe=F.sortIndex-$.sortIndex;return oe!==0?oe:F.id-$.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var y=[],_=[],T=1,A=null,S=3,P=!1,G=!1,k=!1,Y=!1,X=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ne(F){for(var $=n(_);$!==null;){if($.callback===null)r(_);else if($.startTime<=F)r(_),$.sortIndex=$.expirationTime,e(y,$);else break;$=n(_)}}function ue(F){if(k=!1,ne(F),!G)if(n(y)!==null)G=!0,me||(me=!0,M());else{var $=n(_);$!==null&&Ge(ue,$.startTime-F)}}var me=!1,I=-1,R=5,C=-1;function V(){return Y?!0:!(i.unstable_now()-C<R)}function x(){if(Y=!1,me){var F=i.unstable_now();C=F;var $=!0;try{e:{G=!1,k&&(k=!1,se(I),I=-1),P=!0;var oe=S;try{t:{for(ne(F),A=n(y);A!==null&&!(A.expirationTime>F&&V());){var Ae=A.callback;if(typeof Ae=="function"){A.callback=null,S=A.priorityLevel;var Oe=Ae(A.expirationTime<=F);if(F=i.unstable_now(),typeof Oe=="function"){A.callback=Oe,ne(F),$=!0;break t}A===n(y)&&r(y),ne(F)}else r(y);A=n(y)}if(A!==null)$=!0;else{var D=n(_);D!==null&&Ge(ue,D.startTime-F),$=!1}}break e}finally{A=null,S=oe,P=!1}$=void 0}}finally{$?M():me=!1}}}var M;if(typeof re=="function")M=function(){re(x)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ne=N.port2;N.port1.onmessage=x,M=function(){Ne.postMessage(null)}}else M=function(){X(x,0)};function Ge(F,$){I=X(function(){F(i.unstable_now())},$)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(F){switch(S){case 1:case 2:case 3:var $=3;break;default:$=S}var oe=S;S=$;try{return F()}finally{S=oe}},i.unstable_requestPaint=function(){Y=!0},i.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var oe=S;S=F;try{return $()}finally{S=oe}},i.unstable_scheduleCallback=function(F,$,oe){var Ae=i.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Ae+oe:Ae):oe=Ae,F){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=oe+Oe,F={id:T++,callback:$,priorityLevel:F,startTime:oe,expirationTime:Oe,sortIndex:-1},oe>Ae?(F.sortIndex=oe,e(_,F),n(y)===null&&F===n(_)&&(k?(se(I),I=-1):k=!0,Ge(ue,oe-Ae))):(F.sortIndex=Oe,e(y,F),G||P||(G=!0,me||(me=!0,M()))),F},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(F){var $=S;return function(){var oe=S;S=$;try{return F.apply(this,arguments)}finally{S=oe}}}})(tm)),tm}var fv;function fS(){return fv||(fv=1,em.exports=hS()),em.exports}var nm={exports:{}},Wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function dS(){if(dv)return Wt;dv=1;var i=Hm();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(y,_,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:y,containerInfo:_,implementation:T}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wt.createPortal=function(y,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(y,_,null,T)},Wt.flushSync=function(y){var _=f.T,T=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=_,r.p=T,r.d.f()}},Wt.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(y,_))},Wt.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Wt.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var T=_.as,A=p(T,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,P=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:P}):T==="script"&&r.d.X(y,{crossOrigin:A,integrity:S,fetchPriority:P,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Wt.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=p(_.as,_.crossOrigin);r.d.M(y,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(y)},Wt.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,A=p(T,_.crossOrigin);r.d.L(y,T,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Wt.preloadModule=function(y,_){if(typeof y=="string")if(_){var T=p(_.as,_.crossOrigin);r.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(y)},Wt.requestFormReset=function(y){r.d.r(y)},Wt.unstable_batchedUpdates=function(y,_){return y(_)},Wt.useFormState=function(y,_,T){return f.H.useFormState(y,_,T)},Wt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Wt.version="19.2.0",Wt}var mv;function mS(){if(mv)return nm.exports;mv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),nm.exports=dS(),nm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function pS(){if(pv)return Co;pv=1;var i=fS(),e=Hm(),n=mS();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function _(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return y(h),t;if(d===l)return y(h),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,b=h.child;b;){if(b===a){v=!0,a=h,l=d;break}if(b===l){v=!0,l=h,a=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===a){v=!0,a=d,l=h;break}if(b===l){v=!0,l=d,a=h;break}b=b.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function T(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=T(t),s!==null)return s;t=t.sibling}return null}var A=Object.assign,S=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Ne(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case X:return"Profiler";case Y:return"StrictMode";case ue:return"Suspense";case me:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case re:return t.displayName||"Context";case se:return(t._context.displayName||"Context")+".Consumer";case ne:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return s=t.displayName||null,s!==null?s:Ne(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return Ne(t(s))}catch{}}return null}var Ge=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Ae=[],Oe=-1;function D(t){return{current:t}}function q(t){0>Oe||(t.current=Ae[Oe],Ae[Oe]=null,Oe--)}function ae(t,s){Oe++,Ae[Oe]=t.current,t.current=s}var ce=D(null),ge=D(null),ye=D(null),Me=D(null);function rt(t,s){switch(ae(ye,s),ae(ge,t),ae(ce,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?x_(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=x_(s),t=D_(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}q(ce),ae(ce,t)}function Ue(){q(ce),q(ge),q(ye)}function Cn(t){t.memoizedState!==null&&ae(Me,t);var s=ce.current,a=D_(s,t.type);s!==a&&(ae(ge,t),ae(ce,a))}function Qn(t){ge.current===t&&(q(ce),q(ge)),Me.current===t&&(q(Me),So._currentValue=oe)}var da,ma;function cs(t){if(da===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);da=s&&s[1]||"",ma=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+da+t+ma}var Al=!1;function vr(t,s){if(!t||Al)return"";Al=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var H=K}Reflect.construct(t,[],W)}else{try{W.call()}catch(K){H=K}t.call(W.prototype)}}else{try{throw Error()}catch(K){H=K}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&H&&typeof K.stack=="string")return[K.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var O=v.split(`
`),B=b.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===B.length)for(l=O.length-1,h=B.length-1;1<=l&&0<=h&&O[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==B[h]){var Z=`
`+O[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=h);break}}}finally{Al=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?cs(a):""}function Sl(t,s){switch(t.tag){case 26:case 27:case 5:return cs(t.type);case 16:return cs("Lazy");case 13:return t.child!==s&&s!==null?cs("Suspense Fallback"):cs("Suspense");case 19:return cs("SuspenseList");case 0:case 15:return vr(t.type,!1);case 11:return vr(t.type.render,!1);case 1:return vr(t.type,!0);case 31:return cs("Activity");default:return""}}function wl(t){try{var s="",a=null;do s+=Sl(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,Ut=i.unstable_scheduleCallback,Ei=i.unstable_cancelCallback,Jh=i.unstable_shouldYield,hc=i.unstable_requestPaint,rn=i.unstable_now,Er=i.unstable_getCurrentPriorityLevel,Rl=i.unstable_ImmediatePriority,Il=i.unstable_UserBlockingPriority,Ti=i.unstable_NormalPriority,Wh=i.unstable_LowPriority,fc=i.unstable_IdlePriority,dc=i.log,mc=i.unstable_setDisableYieldValue,Kn=null,Ft=null;function xn(t){if(typeof dc=="function"&&mc(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Kn,t)}catch{}}var vt=Math.clz32?Math.clz32:gc,pc=Math.log,pa=Math.LN2;function gc(t){return t>>>=0,t===0?32:31-(pc(t)/pa|0)|0}var us=256,Tr=262144,wt=4194304;function hs(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fs(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=hs(l):(v&=b,v!==0?h=hs(v):a||(a=b&~t,a!==0&&(h=hs(a))))):(b=l&~d,b!==0?h=hs(b):v!==0?h=hs(v):a||(a=l&~t,a!==0&&(h=hs(a)))),h===0?0:s!==0&&s!==h&&(s&d)===0&&(d=h&-h,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:h}function Yn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ef(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yc(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function ds(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function br(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function tf(t,s,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,O=t.expirationTimes,B=t.hiddenUpdates;for(a=v&~a;0<a;){var Z=31-vt(a),W=1<<Z;b[Z]=0,O[Z]=-1;var H=B[Z];if(H!==null)for(B[Z]=null,Z=0;Z<H.length;Z++){var K=H[Z];K!==null&&(K.lane&=-536870913)}a&=~W}l!==0&&Ar(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~s))}function Ar(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-vt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Nl(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-vt(a),h=1<<l;h&s|t[l]&s&&(t[l]|=s),a&=~h}}function Cl(t,s){var a=s&-s;return a=(a&42)!==0?1:Sr(a),(a&(t.suspendedLanes|s))!==0?0:a}function Sr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function _c(){var t=$.p;return t!==0?t:(t=window.event,t===void 0?32:ev(t.type))}function Xn(t,s){var a=$.p;try{return $.p=t,s()}finally{$.p=a}}var $n=Math.random().toString(36).slice(2),Rt="__reactFiber$"+$n,zt="__reactProps$"+$n,ms="__reactContainer$"+$n,ga="__reactEvents$"+$n,nf="__reactListeners$"+$n,vc="__reactHandles$"+$n,Ec="__reactResources$"+$n,ps="__reactMarker$"+$n;function ya(t){delete t[Rt],delete t[zt],delete t[ga],delete t[nf],delete t[vc]}function gs(t){var s=t[Rt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ms]||a[Rt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=k_(t);t!==null;){if(a=t[Rt])return a;t=k_(t)}return s}t=a,a=t.parentNode}return null}function Dn(t){if(t=t[Rt]||t[ms]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function vn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function ys(t){var s=t[Ec];return s||(s=t[Ec]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function It(t){t[ps]=!0}var xl=new Set,Dl={};function _s(t,s){vs(t,s),vs(t+"Capture",s)}function vs(t,s){for(Dl[t]=s,t=0;t<s.length;t++)xl.add(s[t])}var Ol=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ml={},Vl={};function Tc(t){return St.call(Vl,t)?!0:St.call(Ml,t)?!1:Ol.test(t)?Vl[t]=!0:(Ml[t]=!0,!1)}function _a(t,s,a){if(Tc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function En(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Nt(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function Bt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function jl(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Je(t){if(!t._valueTracker){var s=bi(t)?"checked":"value";t._valueTracker=jl(t,s,""+t[s])}}function wr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=bi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Es(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rr=/[\n"\\]/g;function on(t){return t.replace(Rr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function va(t,s,a,l,h,d,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Bt(s)):t.value!==""+Bt(s)&&(t.value=""+Bt(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?Pl(t,v,Bt(s)):a!=null?Pl(t,v,Bt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Bt(b):t.removeAttribute("name")}function bc(t,s,a,l,h,d,v,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null)){Je(t);return}a=a!=null?""+Bt(a):"",s=s!=null?""+Bt(s):a,b||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Je(t)}function Pl(t,s,a){s==="number"&&Es(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ai(t,s,a,l){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Bt(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function Ac(t,s,a){if(s!=null&&(s=""+Bt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Bt(a):""}function Si(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ge(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Bt(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Je(t)}function cn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Sc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||Sc.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function kl(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Ul(t,h,l)}else for(var d in s)s.hasOwnProperty(d)&&Ul(t,d,s[d])}function Ea(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(t){return wi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Zn(){}var Ll=null;function On(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ri=null,Ts=null;function Ir(t){var s=Dn(t);if(s&&(t=s.stateNode)){var a=t[zt]||null;e:switch(t=s.stateNode,s.type){case"input":if(va(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+on(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var h=l[zt]||null;if(!h)throw Error(r(90));va(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&wr(l)}break e;case"textarea":Ac(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Ai(t,!!a.multiple,s,!1)}}}var ba=!1;function Ii(t,s,a){if(ba)return t(s,a);ba=!0;try{var l=t(s);return l}finally{if(ba=!1,(Ri!==null||Ts!==null)&&(_u(),Ri&&(s=Ri,t=Ts,Ts=Ri=null,Ir(s),t)))for(s=0;s<t.length;s++)Ir(t[s])}}function Jn(t,s){var a=t.stateNode;if(a===null)return null;var l=a[zt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nr=!1;if(Mn)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Nr=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{Nr=!1}var bs=null,zl=null,Cr=null;function Bl(){if(Cr)return Cr;var t,s=zl,a=s.length,l,h="value"in bs?bs.value:bs.textContent,d=h.length;for(t=0;t<a&&s[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&s[a-l]===h[d-l];l++);return Cr=h.slice(t,1<l?1-l:void 0)}function xr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Qs(){return!0}function Wn(){return!1}function Gt(t){function s(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Qs:Wn,this.isPropagationStopped=Wn,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),s}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},As=Gt(Ks),Ni=A({},Ks,{view:0,detail:0}),ql=Gt(Ni),Ci,Aa,Ss,Sa=A({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ss&&(Ss&&t.type==="mousemove"?(Ci=t.screenX-Ss.screenX,Aa=t.screenY-Ss.screenY):Aa=Ci=0,Ss=t),Ci)},movementY:function(t){return"movementY"in t?t.movementY:Aa}}),Hl=Gt(Sa),Dr=A({},Sa,{dataTransfer:0}),Rc=Gt(Dr),Ic=A({},Ni,{relatedTarget:0}),Or=Gt(Ic),Fl=A({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Nc=Gt(Fl),wa=A({},Ks,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cc=Gt(wa),xc=A({},Ks,{data:0}),ws=Gt(xc),Dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vc(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Mc[t])?!!s[t]:!1}function xi(){return Vc}var an=A({},Ni,{key:function(t){if(t.key){var s=Dc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Oc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xi,charCode:function(t){return t.type==="keypress"?xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jc=Gt(an),Pc=A({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ys=Gt(Pc),u=A({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xi}),g=Gt(u),E=A({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=Gt(E),L=A({},Sa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Gt(L),le=A({},Ks,{newState:0,oldState:0}),Ce=Gt(le),Et=[9,13,27,32],Ye=Mn&&"CompositionEvent"in window,ft=null;Mn&&"documentMode"in document&&(ft=document.documentMode);var Vn=Mn&&"TextEvent"in window&&!ft,Rs=Mn&&(!Ye||ft&&8<ft&&11>=ft),es=" ",ts=!1;function Mr(t,s){switch(t){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ra(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ia=!1;function O0(t,s){switch(t){case"compositionend":return Ra(s);case"keypress":return s.which!==32?null:(ts=!0,es);case"textInput":return t=s.data,t===es&&ts?null:t;default:return null}}function M0(t,s){if(Ia)return t==="compositionend"||!Ye&&Mr(t,s)?(t=Bl(),Cr=zl=bs=null,Ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Rs&&s.locale!=="ko"?null:s.data;default:return null}}var V0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!V0[t.type]:s==="textarea"}function qp(t,s,a,l){Ri?Ts?Ts.push(l):Ts=[l]:Ri=l,s=wu(s,"onChange"),0<s.length&&(a=new As("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var Gl=null,Ql=null;function j0(t){S_(t,0)}function Uc(t){var s=vn(t);if(wr(s))return t}function Hp(t,s){if(t==="change")return s}var Fp=!1;if(Mn){var sf;if(Mn){var rf="oninput"in document;if(!rf){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),rf=typeof Gp.oninput=="function"}sf=rf}else sf=!1;Fp=sf&&(!document.documentMode||9<document.documentMode)}function Qp(){Gl&&(Gl.detachEvent("onpropertychange",Kp),Ql=Gl=null)}function Kp(t){if(t.propertyName==="value"&&Uc(Ql)){var s=[];qp(s,Ql,t,On(t)),Ii(j0,s)}}function P0(t,s,a){t==="focusin"?(Qp(),Gl=s,Ql=a,Gl.attachEvent("onpropertychange",Kp)):t==="focusout"&&Qp()}function U0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uc(Ql)}function k0(t,s){if(t==="click")return Uc(s)}function L0(t,s){if(t==="input"||t==="change")return Uc(s)}function z0(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Tn=typeof Object.is=="function"?Object.is:z0;function Kl(t,s){if(Tn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!St.call(s,h)||!Tn(t[h],s[h]))return!1}return!0}function Yp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xp(t,s){var a=Yp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yp(a)}}function $p(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?$p(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Zp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Es(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Es(t.document)}return s}function af(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var B0=Mn&&"documentMode"in document&&11>=document.documentMode,Na=null,lf=null,Yl=null,of=!1;function Jp(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;of||Na==null||Na!==Es(l)||(l=Na,"selectionStart"in l&&af(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Yl&&Kl(Yl,l)||(Yl=l,l=wu(lf,"onSelect"),0<l.length&&(s=new As("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Na)))}function Vr(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ca={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionrun:Vr("Transition","TransitionRun"),transitionstart:Vr("Transition","TransitionStart"),transitioncancel:Vr("Transition","TransitionCancel"),transitionend:Vr("Transition","TransitionEnd")},cf={},Wp={};Mn&&(Wp=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function jr(t){if(cf[t])return cf[t];if(!Ca[t])return t;var s=Ca[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Wp)return cf[t]=s[a];return t}var eg=jr("animationend"),tg=jr("animationiteration"),ng=jr("animationstart"),q0=jr("transitionrun"),H0=jr("transitionstart"),F0=jr("transitioncancel"),sg=jr("transitionend"),ig=new Map,uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uf.push("scrollEnd");function ns(t,s){ig.set(t,s),_s(s,[t])}var kc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},jn=[],xa=0,hf=0;function Lc(){for(var t=xa,s=hf=xa=0;s<t;){var a=jn[s];jn[s++]=null;var l=jn[s];jn[s++]=null;var h=jn[s];jn[s++]=null;var d=jn[s];if(jn[s++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&rg(a,h,d)}}function zc(t,s,a,l){jn[xa++]=t,jn[xa++]=s,jn[xa++]=a,jn[xa++]=l,hf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function ff(t,s,a,l){return zc(t,s,a,l),Bc(t)}function Pr(t,s){return zc(t,null,null,s),Bc(t)}function rg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&s!==null&&(h=31-vt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=a|536870912),d):null}function Bc(t){if(50<yo)throw yo=0,Td=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Da={};function G0(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,s,a,l){return new G0(t,s,a,l)}function df(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xs(t,s){var a=t.alternate;return a===null?(a=bn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ag(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function qc(t,s,a,l,h,d){var v=0;if(l=t,typeof t=="function")df(t)&&(v=1);else if(typeof t=="string")v=$A(t,a,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=bn(31,a,s,h),t.elementType=C,t.lanes=d,t;case k:return Ur(a.children,h,d,s);case Y:v=8,h|=24;break;case X:return t=bn(12,a,s,h|2),t.elementType=X,t.lanes=d,t;case ue:return t=bn(13,a,s,h),t.elementType=ue,t.lanes=d,t;case me:return t=bn(19,a,s,h),t.elementType=me,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:v=10;break e;case se:v=9;break e;case ne:v=11;break e;case I:v=14;break e;case R:v=16,l=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=bn(v,a,s,h),s.elementType=t,s.type=l,s.lanes=d,s}function Ur(t,s,a,l){return t=bn(7,t,l,s),t.lanes=a,t}function mf(t,s,a){return t=bn(6,t,null,s),t.lanes=a,t}function lg(t){var s=bn(18,null,null,0);return s.stateNode=t,s}function pf(t,s,a){return s=bn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var og=new WeakMap;function Pn(t,s){if(typeof t=="object"&&t!==null){var a=og.get(t);return a!==void 0?a:(s={value:t,source:s,stack:wl(s)},og.set(t,s),s)}return{value:t,source:s,stack:wl(s)}}var Oa=[],Ma=0,Hc=null,Xl=0,Un=[],kn=0,Di=null,Is=1,Ns="";function $s(t,s){Oa[Ma++]=Xl,Oa[Ma++]=Hc,Hc=t,Xl=s}function cg(t,s,a){Un[kn++]=Is,Un[kn++]=Ns,Un[kn++]=Di,Di=t;var l=Is;t=Ns;var h=32-vt(l)-1;l&=~(1<<h),a+=1;var d=32-vt(s)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Is=1<<32-vt(s)+h|a<<h|l,Ns=d+t}else Is=1<<d|a<<h|l,Ns=t}function gf(t){t.return!==null&&($s(t,1),cg(t,1,0))}function yf(t){for(;t===Hc;)Hc=Oa[--Ma],Oa[Ma]=null,Xl=Oa[--Ma],Oa[Ma]=null;for(;t===Di;)Di=Un[--kn],Un[kn]=null,Ns=Un[--kn],Un[kn]=null,Is=Un[--kn],Un[kn]=null}function ug(t,s){Un[kn++]=Is,Un[kn++]=Ns,Un[kn++]=Di,Is=s.id,Ns=s.overflow,Di=t}var Qt=null,ot=null,He=!1,Oi=null,Ln=!1,_f=Error(r(519));function Mi(t){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $l(Pn(s,t)),_f}function hg(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[Rt]=t,s[zt]=l,a){case"dialog":je("cancel",s),je("close",s);break;case"iframe":case"object":case"embed":je("load",s);break;case"video":case"audio":for(a=0;a<vo.length;a++)je(vo[a],s);break;case"source":je("error",s);break;case"img":case"image":case"link":je("error",s),je("load",s);break;case"details":je("toggle",s);break;case"input":je("invalid",s),bc(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",s);break;case"textarea":je("invalid",s),Si(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||N_(s.textContent,a)?(l.popover!=null&&(je("beforetoggle",s),je("toggle",s)),l.onScroll!=null&&je("scroll",s),l.onScrollEnd!=null&&je("scrollend",s),l.onClick!=null&&(s.onclick=Zn),s=!0):s=!1,s||Mi(t,!0)}function fg(t){for(Qt=t.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Qt=Qt.return}}function Va(t){if(t!==Qt)return!1;if(!He)return fg(t),He=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Pd(t.type,t.memoizedProps)),a=!a),a&&ot&&Mi(t),fg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));ot=U_(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));ot=U_(t)}else s===27?(s=ot,Ki(t.type)?(t=Bd,Bd=null,ot=t):ot=s):ot=Qt?Bn(t.stateNode.nextSibling):null;return!0}function kr(){ot=Qt=null,He=!1}function vf(){var t=Oi;return t!==null&&(dn===null?dn=t:dn.push.apply(dn,t),Oi=null),t}function $l(t){Oi===null?Oi=[t]:Oi.push(t)}var Ef=D(null),Lr=null,Zs=null;function Vi(t,s,a){ae(Ef,s._currentValue),s._currentValue=a}function Js(t){t._currentValue=Ef.current,q(Ef)}function Tf(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function bf(t,s,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var O=0;O<s.length;O++)if(b.context===s[O]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Tf(d.return,a,t),l||(v=null);break e}d=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Tf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function ja(t,s,a,l){t=null;for(var h=s,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var b=h.type;Tn(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===Me.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(So):t=[So])}h=h.return}t!==null&&bf(s,t,a,l),s.flags|=262144}function Fc(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function zr(t){Lr=t,Zs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return dg(Lr,t)}function Gc(t,s){return Lr===null&&zr(t),dg(t,s)}function dg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Zs===null){if(t===null)throw Error(r(308));Zs=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Zs=Zs.next=s;return a}var Q0=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},K0=i.unstable_scheduleCallback,Y0=i.unstable_NormalPriority,Ct={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Af(){return{controller:new Q0,data:new Map,refCount:0}}function Zl(t){t.refCount--,t.refCount===0&&K0(Y0,function(){t.controller.abort()})}var Jl=null,Sf=0,Pa=0,Ua=null;function X0(t,s){if(Jl===null){var a=Jl=[];Sf=0,Pa=Id(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Sf++,s.then(mg,mg),s}function mg(){if(--Sf===0&&Jl!==null){Ua!==null&&(Ua.status="fulfilled");var t=Jl;Jl=null,Pa=0,Ua=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function $0(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var pg=F.S;F.S=function(t,s){Jy=rn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&X0(t,s),pg!==null&&pg(t,s)};var Br=D(null);function wf(){var t=Br.current;return t!==null?t:at.pooledCache}function Qc(t,s){s===null?ae(Br,Br.current):ae(Br,s.pool)}function gg(){var t=wf();return t===null?null:{parent:Ct._currentValue,pool:t}}var ka=Error(r(460)),Rf=Error(r(474)),Kc=Error(r(542)),Yc={then:function(){}};function yg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _g(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Zn,Zn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Eg(t),t;default:if(typeof s.status=="string")s.then(Zn,Zn);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Eg(t),t}throw Hr=s,ka}}function qr(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Hr=a,ka):a}}var Hr=null;function vg(){if(Hr===null)throw Error(r(459));var t=Hr;return Hr=null,t}function Eg(t){if(t===ka||t===Kc)throw Error(r(483))}var La=null,Wl=0;function Xc(t){var s=Wl;return Wl+=1,La===null&&(La=[]),_g(La,t,s)}function eo(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function $c(t,s){throw s.$$typeof===S?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Tg(t){function s(U,j){if(t){var z=U.deletions;z===null?(U.deletions=[j],U.flags|=16):z.push(j)}}function a(U,j){if(!t)return null;for(;j!==null;)s(U,j),j=j.sibling;return null}function l(U){for(var j=new Map;U!==null;)U.key!==null?j.set(U.key,U):j.set(U.index,U),U=U.sibling;return j}function h(U,j){return U=Xs(U,j),U.index=0,U.sibling=null,U}function d(U,j,z){return U.index=z,t?(z=U.alternate,z!==null?(z=z.index,z<j?(U.flags|=67108866,j):z):(U.flags|=67108866,j)):(U.flags|=1048576,j)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function b(U,j,z,J){return j===null||j.tag!==6?(j=mf(z,U.mode,J),j.return=U,j):(j=h(j,z),j.return=U,j)}function O(U,j,z,J){var _e=z.type;return _e===k?Z(U,j,z.props.children,J,z.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&qr(_e)===j.type)?(j=h(j,z.props),eo(j,z),j.return=U,j):(j=qc(z.type,z.key,z.props,null,U.mode,J),eo(j,z),j.return=U,j)}function B(U,j,z,J){return j===null||j.tag!==4||j.stateNode.containerInfo!==z.containerInfo||j.stateNode.implementation!==z.implementation?(j=pf(z,U.mode,J),j.return=U,j):(j=h(j,z.children||[]),j.return=U,j)}function Z(U,j,z,J,_e){return j===null||j.tag!==7?(j=Ur(z,U.mode,J,_e),j.return=U,j):(j=h(j,z),j.return=U,j)}function W(U,j,z){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=mf(""+j,U.mode,z),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case P:return z=qc(j.type,j.key,j.props,null,U.mode,z),eo(z,j),z.return=U,z;case G:return j=pf(j,U.mode,z),j.return=U,j;case R:return j=qr(j),W(U,j,z)}if(Ge(j)||M(j))return j=Ur(j,U.mode,z,null),j.return=U,j;if(typeof j.then=="function")return W(U,Xc(j),z);if(j.$$typeof===re)return W(U,Gc(U,j),z);$c(U,j)}return null}function H(U,j,z,J){var _e=j!==null?j.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return _e!==null?null:b(U,j,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case P:return z.key===_e?O(U,j,z,J):null;case G:return z.key===_e?B(U,j,z,J):null;case R:return z=qr(z),H(U,j,z,J)}if(Ge(z)||M(z))return _e!==null?null:Z(U,j,z,J,null);if(typeof z.then=="function")return H(U,j,Xc(z),J);if(z.$$typeof===re)return H(U,j,Gc(U,z),J);$c(U,z)}return null}function K(U,j,z,J,_e){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(z)||null,b(j,U,""+J,_e);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case P:return U=U.get(J.key===null?z:J.key)||null,O(j,U,J,_e);case G:return U=U.get(J.key===null?z:J.key)||null,B(j,U,J,_e);case R:return J=qr(J),K(U,j,z,J,_e)}if(Ge(J)||M(J))return U=U.get(z)||null,Z(j,U,J,_e,null);if(typeof J.then=="function")return K(U,j,z,Xc(J),_e);if(J.$$typeof===re)return K(U,j,z,Gc(j,J),_e);$c(j,J)}return null}function de(U,j,z,J){for(var _e=null,Qe=null,pe=j,De=j=0,Le=null;pe!==null&&De<z.length;De++){pe.index>De?(Le=pe,pe=null):Le=pe.sibling;var Ke=H(U,pe,z[De],J);if(Ke===null){pe===null&&(pe=Le);break}t&&pe&&Ke.alternate===null&&s(U,pe),j=d(Ke,j,De),Qe===null?_e=Ke:Qe.sibling=Ke,Qe=Ke,pe=Le}if(De===z.length)return a(U,pe),He&&$s(U,De),_e;if(pe===null){for(;De<z.length;De++)pe=W(U,z[De],J),pe!==null&&(j=d(pe,j,De),Qe===null?_e=pe:Qe.sibling=pe,Qe=pe);return He&&$s(U,De),_e}for(pe=l(pe);De<z.length;De++)Le=K(pe,U,De,z[De],J),Le!==null&&(t&&Le.alternate!==null&&pe.delete(Le.key===null?De:Le.key),j=d(Le,j,De),Qe===null?_e=Le:Qe.sibling=Le,Qe=Le);return t&&pe.forEach(function(Ji){return s(U,Ji)}),He&&$s(U,De),_e}function Ee(U,j,z,J){if(z==null)throw Error(r(151));for(var _e=null,Qe=null,pe=j,De=j=0,Le=null,Ke=z.next();pe!==null&&!Ke.done;De++,Ke=z.next()){pe.index>De?(Le=pe,pe=null):Le=pe.sibling;var Ji=H(U,pe,Ke.value,J);if(Ji===null){pe===null&&(pe=Le);break}t&&pe&&Ji.alternate===null&&s(U,pe),j=d(Ji,j,De),Qe===null?_e=Ji:Qe.sibling=Ji,Qe=Ji,pe=Le}if(Ke.done)return a(U,pe),He&&$s(U,De),_e;if(pe===null){for(;!Ke.done;De++,Ke=z.next())Ke=W(U,Ke.value,J),Ke!==null&&(j=d(Ke,j,De),Qe===null?_e=Ke:Qe.sibling=Ke,Qe=Ke);return He&&$s(U,De),_e}for(pe=l(pe);!Ke.done;De++,Ke=z.next())Ke=K(pe,U,De,Ke.value,J),Ke!==null&&(t&&Ke.alternate!==null&&pe.delete(Ke.key===null?De:Ke.key),j=d(Ke,j,De),Qe===null?_e=Ke:Qe.sibling=Ke,Qe=Ke);return t&&pe.forEach(function(lS){return s(U,lS)}),He&&$s(U,De),_e}function it(U,j,z,J){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case P:e:{for(var _e=z.key;j!==null;){if(j.key===_e){if(_e=z.type,_e===k){if(j.tag===7){a(U,j.sibling),J=h(j,z.props.children),J.return=U,U=J;break e}}else if(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&qr(_e)===j.type){a(U,j.sibling),J=h(j,z.props),eo(J,z),J.return=U,U=J;break e}a(U,j);break}else s(U,j);j=j.sibling}z.type===k?(J=Ur(z.props.children,U.mode,J,z.key),J.return=U,U=J):(J=qc(z.type,z.key,z.props,null,U.mode,J),eo(J,z),J.return=U,U=J)}return v(U);case G:e:{for(_e=z.key;j!==null;){if(j.key===_e)if(j.tag===4&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){a(U,j.sibling),J=h(j,z.children||[]),J.return=U,U=J;break e}else{a(U,j);break}else s(U,j);j=j.sibling}J=pf(z,U.mode,J),J.return=U,U=J}return v(U);case R:return z=qr(z),it(U,j,z,J)}if(Ge(z))return de(U,j,z,J);if(M(z)){if(_e=M(z),typeof _e!="function")throw Error(r(150));return z=_e.call(z),Ee(U,j,z,J)}if(typeof z.then=="function")return it(U,j,Xc(z),J);if(z.$$typeof===re)return it(U,j,Gc(U,z),J);$c(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,j!==null&&j.tag===6?(a(U,j.sibling),J=h(j,z),J.return=U,U=J):(a(U,j),J=mf(z,U.mode,J),J.return=U,U=J),v(U)):a(U,j)}return function(U,j,z,J){try{Wl=0;var _e=it(U,j,z,J);return La=null,_e}catch(pe){if(pe===ka||pe===Kc)throw pe;var Qe=bn(29,pe,null,U.mode);return Qe.lanes=J,Qe.return=U,Qe}finally{}}}var Fr=Tg(!0),bg=Tg(!1),ji=!1;function If(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Pi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=Bc(t),rg(t,null,a),s}return zc(t,l,s,a),Bc(t)}function to(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Nl(t,a)}}function Cf(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=s:d=d.next=s}else h=d=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var xf=!1;function no(){if(xf){var t=Ua;if(t!==null)throw t}}function so(t,s,a,l){xf=!1;var h=t.updateQueue;ji=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var O=b,B=O.next;O.next=null,v===null?d=B:v.next=B,v=O;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==v&&(b===null?Z.firstBaseUpdate=B:b.next=B,Z.lastBaseUpdate=O))}if(d!==null){var W=h.baseState;v=0,Z=B=O=null,b=d;do{var H=b.lane&-536870913,K=H!==b.lane;if(K?(ke&H)===H:(l&H)===H){H!==0&&H===Pa&&(xf=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var de=t,Ee=b;H=s;var it=a;switch(Ee.tag){case 1:if(de=Ee.payload,typeof de=="function"){W=de.call(it,W,H);break e}W=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Ee.payload,H=typeof de=="function"?de.call(it,W,H):de,H==null)break e;W=A({},W,H);break e;case 2:ji=!0}}H=b.callback,H!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[H]:K.push(H))}else K={lane:H,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(B=Z=K,O=W):Z=Z.next=K,v|=H;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;K=b,b=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);Z===null&&(O=W),h.baseState=O,h.firstBaseUpdate=B,h.lastBaseUpdate=Z,d===null&&(h.shared.lanes=0),qi|=v,t.lanes=v,t.memoizedState=W}}function Ag(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function Sg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ag(a[t],s)}var za=D(null),Zc=D(0);function wg(t,s){t=li,ae(Zc,t),ae(za,s),li=t|s.baseLanes}function Df(){ae(Zc,li),ae(za,za.current)}function Of(){li=Zc.current,q(za),q(Zc)}var An=D(null),zn=null;function ki(t){var s=t.alternate;ae(Tt,Tt.current&1),ae(An,t),zn===null&&(s===null||za.current!==null||s.memoizedState!==null)&&(zn=t)}function Mf(t){ae(Tt,Tt.current),ae(An,t),zn===null&&(zn=t)}function Rg(t){t.tag===22?(ae(Tt,Tt.current),ae(An,t),zn===null&&(zn=t)):Li()}function Li(){ae(Tt,Tt.current),ae(An,An.current)}function Sn(t){q(An),zn===t&&(zn=null),q(Tt)}var Tt=D(0);function Jc(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ld(a)||zd(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ws=0,xe=null,nt=null,xt=null,Wc=!1,Ba=!1,Gr=!1,eu=0,io=0,qa=null,Z0=0;function gt(){throw Error(r(321))}function Vf(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Tn(t[a],s[a]))return!1;return!0}function jf(t,s,a,l,h,d){return Ws=d,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=t===null||t.memoizedState===null?cy:$f,Gr=!1,d=a(l,h),Gr=!1,Ba&&(d=Ng(s,a,l,h)),Ig(t),d}function Ig(t){F.H=lo;var s=nt!==null&&nt.next!==null;if(Ws=0,xt=nt=xe=null,Wc=!1,io=0,qa=null,s)throw Error(r(300));t===null||Dt||(t=t.dependencies,t!==null&&Fc(t)&&(Dt=!0))}function Ng(t,s,a,l){xe=t;var h=0;do{if(Ba&&(qa=null),io=0,Ba=!1,25<=h)throw Error(r(301));if(h+=1,xt=nt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=uy,d=s(a,l)}while(Ba);return d}function J0(){var t=F.H,s=t.useState()[0];return s=typeof s.then=="function"?ro(s):s,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(xe.flags|=1024),s}function Pf(){var t=eu!==0;return eu=0,t}function Uf(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function kf(t){if(Wc){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Wc=!1}Ws=0,xt=nt=xe=null,Ba=!1,io=eu=0,qa=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?xe.memoizedState=xt=t:xt=xt.next=t,xt}function bt(){if(nt===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var s=xt===null?xe.memoizedState:xt.next;if(s!==null)xt=s,nt=t;else{if(t===null)throw xe.alternate===null?Error(r(467)):Error(r(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},xt===null?xe.memoizedState=xt=t:xt=xt.next=t}return xt}function tu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ro(t){var s=io;return io+=1,qa===null&&(qa=[]),t=_g(qa,t,s),s=xe,(xt===null?s.memoizedState:xt.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?cy:$f),t}function nu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ro(t);if(t.$$typeof===re)return Kt(t)}throw Error(r(438,String(t)))}function Lf(t){var s=null,a=xe.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=tu(),xe.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=V;return s.index++,a}function ei(t,s){return typeof s=="function"?s(t):s}function su(t){var s=bt();return zf(s,nt,t)}function zf(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}s.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{s=h.next;var b=v=null,O=null,B=s,Z=!1;do{var W=B.lane&-536870913;if(W!==B.lane?(ke&W)===W:(Ws&W)===W){var H=B.revertLane;if(H===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),W===Pa&&(Z=!0);else if((Ws&H)===H){B=B.next,H===Pa&&(Z=!0);continue}else W={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},O===null?(b=O=W,v=d):O=O.next=W,xe.lanes|=H,qi|=H;W=B.action,Gr&&a(d,W),d=B.hasEagerState?B.eagerState:a(d,W)}else H={lane:W,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},O===null?(b=O=H,v=d):O=O.next=H,xe.lanes|=W,qi|=W;B=B.next}while(B!==null&&B!==s);if(O===null?v=d:O.next=b,!Tn(d,t.memoizedState)&&(Dt=!0,Z&&(a=Ua,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=O,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Bf(t){var s=bt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);Tn(d,s.memoizedState)||(Dt=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function Cg(t,s,a){var l=xe,h=bt(),d=He;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Tn((nt||h).memoizedState,a);if(v&&(h.memoizedState=a,Dt=!0),h=h.queue,Ff(Og.bind(null,l,h,t),[t]),h.getSnapshot!==s||v||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,Ha(9,{destroy:void 0},Dg.bind(null,l,h,a,s),null),at===null)throw Error(r(349));d||(Ws&127)!==0||xg(l,s,a)}return a}function xg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=xe.updateQueue,s===null?(s=tu(),xe.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Dg(t,s,a,l){s.value=a,s.getSnapshot=l,Mg(s)&&Vg(t)}function Og(t,s,a){return a(function(){Mg(s)&&Vg(t)})}function Mg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Tn(t,a)}catch{return!0}}function Vg(t){var s=Pr(t,2);s!==null&&mn(s,t,2)}function qf(t){var s=ln();if(typeof t=="function"){var a=t;if(t=a(),Gr){xn(!0);try{a()}finally{xn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:t},s}function jg(t,s,a,l){return t.baseState=a,zf(t,nt,typeof l=="function"?l:ei)}function W0(t,s,a,l,h){if(au(t))throw Error(r(485));if(t=s.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};F.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,Pg(s,d)):(d.next=a.next,s.pending=a.next=d)}}function Pg(t,s){var a=s.action,l=s.payload,h=t.state;if(s.isTransition){var d=F.T,v={};F.T=v;try{var b=a(h,l),O=F.S;O!==null&&O(v,b),Ug(t,s,b)}catch(B){Hf(t,s,B)}finally{d!==null&&v.types!==null&&(d.types=v.types),F.T=d}}else try{d=a(h,l),Ug(t,s,d)}catch(B){Hf(t,s,B)}}function Ug(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){kg(t,s,l)},function(l){return Hf(t,s,l)}):kg(t,s,a)}function kg(t,s,a){s.status="fulfilled",s.value=a,Lg(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Pg(t,a)))}function Hf(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Lg(s),s=s.next;while(s!==l)}t.action=null}function Lg(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function zg(t,s){return s}function Bg(t,s){if(He){var a=at.formState;if(a!==null){e:{var l=xe;if(He){if(ot){t:{for(var h=ot,d=Ln;h.nodeType!==8;){if(!d){h=null;break t}if(h=Bn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ot=Bn(h.nextSibling),l=h.data==="F!";break e}}Mi(l)}l=!1}l&&(s=a[0])}}return a=ln(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:s},a.queue=l,a=ay.bind(null,xe,l),l.dispatch=a,l=qf(!1),d=Xf.bind(null,xe,!1,l.queue),l=ln(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,a=W0.bind(null,xe,h,d,a),h.dispatch=a,l.memoizedState=t,[s,a,!1]}function qg(t){var s=bt();return Hg(s,nt,t)}function Hg(t,s,a){if(s=zf(t,s,zg)[0],t=su(ei)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=ro(s)}catch(v){throw v===ka?Kc:v}else l=s;s=bt();var h=s.queue,d=h.dispatch;return a!==s.memoizedState&&(xe.flags|=2048,Ha(9,{destroy:void 0},eA.bind(null,h,a),null)),[l,d,t]}function eA(t,s){t.action=s}function Fg(t){var s=bt(),a=nt;if(a!==null)return Hg(s,a,t);bt(),s=s.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Ha(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=xe.updateQueue,s===null&&(s=tu(),xe.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Gg(){return bt().memoizedState}function iu(t,s,a,l){var h=ln();xe.flags|=t,h.memoizedState=Ha(1|s,{destroy:void 0},a,l===void 0?null:l)}function ru(t,s,a,l){var h=bt();l=l===void 0?null:l;var d=h.memoizedState.inst;nt!==null&&l!==null&&Vf(l,nt.memoizedState.deps)?h.memoizedState=Ha(s,d,a,l):(xe.flags|=t,h.memoizedState=Ha(1|s,d,a,l))}function Qg(t,s){iu(8390656,8,t,s)}function Ff(t,s){ru(2048,8,t,s)}function tA(t){xe.flags|=4;var s=xe.updateQueue;if(s===null)s=tu(),xe.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function Kg(t){var s=bt().memoizedState;return tA({ref:s,nextImpl:t}),function(){if((Xe&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Yg(t,s){return ru(4,2,t,s)}function Xg(t,s){return ru(4,4,t,s)}function $g(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Zg(t,s,a){a=a!=null?a.concat([t]):null,ru(4,4,$g.bind(null,s,t),a)}function Gf(){}function Jg(t,s){var a=bt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Vf(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function Wg(t,s){var a=bt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Vf(s,l[1]))return l[0];if(l=t(),Gr){xn(!0);try{t()}finally{xn(!1)}}return a.memoizedState=[l,s],l}function Qf(t,s,a){return a===void 0||(Ws&1073741824)!==0&&(ke&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=e_(),xe.lanes|=t,qi|=t,a)}function ey(t,s,a,l){return Tn(a,s)?a:za.current!==null?(t=Qf(t,a,l),Tn(t,s)||(Dt=!0),t):(Ws&42)===0||(Ws&1073741824)!==0&&(ke&261930)===0?(Dt=!0,t.memoizedState=a):(t=e_(),xe.lanes|=t,qi|=t,s)}function ty(t,s,a,l,h){var d=$.p;$.p=d!==0&&8>d?d:8;var v=F.T,b={};F.T=b,Xf(t,!1,s,a);try{var O=h(),B=F.S;if(B!==null&&B(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=$0(O,l);ao(t,s,Z,In(t))}else ao(t,s,l,In(t))}catch(W){ao(t,s,{then:function(){},status:"rejected",reason:W},In())}finally{$.p=d,v!==null&&b.types!==null&&(v.types=b.types),F.T=v}}function nA(){}function Kf(t,s,a,l){if(t.tag!==5)throw Error(r(476));var h=ny(t).queue;ty(t,h,s,oe,a===null?nA:function(){return sy(t),a(l)})}function ny(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:oe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function sy(t){var s=ny(t);s.next===null&&(s=t.alternate.memoizedState),ao(t,s.next.queue,{},In())}function Yf(){return Kt(So)}function iy(){return bt().memoizedState}function ry(){return bt().memoizedState}function sA(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=In();t=Pi(a);var l=Ui(s,t,a);l!==null&&(mn(l,s,a),to(l,s,a)),s={cache:Af()},t.payload=s;return}s=s.return}}function iA(t,s,a){var l=In();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},au(t)?ly(s,a):(a=ff(t,s,a,l),a!==null&&(mn(a,t,l),oy(a,s,l)))}function ay(t,s,a){var l=In();ao(t,s,a,l)}function ao(t,s,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(au(t))ly(s,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var v=s.lastRenderedState,b=d(v,a);if(h.hasEagerState=!0,h.eagerState=b,Tn(b,v))return zc(t,s,h,0),at===null&&Lc(),!1}catch{}finally{}if(a=ff(t,s,h,l),a!==null)return mn(a,t,l),oy(a,s,l),!0}return!1}function Xf(t,s,a,l){if(l={lane:2,revertLane:Id(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},au(t)){if(s)throw Error(r(479))}else s=ff(t,a,l,2),s!==null&&mn(s,t,2)}function au(t){var s=t.alternate;return t===xe||s!==null&&s===xe}function ly(t,s){Ba=Wc=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function oy(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Nl(t,a)}}var lo={readContext:Kt,use:nu,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};lo.useEffectEvent=gt;var cy={readContext:Kt,use:nu,useCallback:function(t,s){return ln().memoizedState=[t,s===void 0?null:s],t},useContext:Kt,useEffect:Qg,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,iu(4194308,4,$g.bind(null,s,t),a)},useLayoutEffect:function(t,s){return iu(4194308,4,t,s)},useInsertionEffect:function(t,s){iu(4,2,t,s)},useMemo:function(t,s){var a=ln();s=s===void 0?null:s;var l=t();if(Gr){xn(!0);try{t()}finally{xn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=ln();if(a!==void 0){var h=a(s);if(Gr){xn(!0);try{a(s)}finally{xn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=iA.bind(null,xe,t),[l.memoizedState,t]},useRef:function(t){var s=ln();return t={current:t},s.memoizedState=t},useState:function(t){t=qf(t);var s=t.queue,a=ay.bind(null,xe,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Gf,useDeferredValue:function(t,s){var a=ln();return Qf(a,t,s)},useTransition:function(){var t=qf(!1);return t=ty.bind(null,xe,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=xe,h=ln();if(He){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),at===null)throw Error(r(349));(ke&127)!==0||xg(l,s,a)}h.memoizedState=a;var d={value:a,getSnapshot:s};return h.queue=d,Qg(Og.bind(null,l,d,t),[t]),l.flags|=2048,Ha(9,{destroy:void 0},Dg.bind(null,l,d,a,s),null),a},useId:function(){var t=ln(),s=at.identifierPrefix;if(He){var a=Ns,l=Is;a=(l&~(1<<32-vt(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=eu++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Z0++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Yf,useFormState:Bg,useActionState:Bg,useOptimistic:function(t){var s=ln();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Xf.bind(null,xe,!0,a),a.dispatch=s,[t,s]},useMemoCache:Lf,useCacheRefresh:function(){return ln().memoizedState=sA.bind(null,xe)},useEffectEvent:function(t){var s=ln(),a={impl:t};return s.memoizedState=a,function(){if((Xe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},$f={readContext:Kt,use:nu,useCallback:Jg,useContext:Kt,useEffect:Ff,useImperativeHandle:Zg,useInsertionEffect:Yg,useLayoutEffect:Xg,useMemo:Wg,useReducer:su,useRef:Gg,useState:function(){return su(ei)},useDebugValue:Gf,useDeferredValue:function(t,s){var a=bt();return ey(a,nt.memoizedState,t,s)},useTransition:function(){var t=su(ei)[0],s=bt().memoizedState;return[typeof t=="boolean"?t:ro(t),s]},useSyncExternalStore:Cg,useId:iy,useHostTransitionStatus:Yf,useFormState:qg,useActionState:qg,useOptimistic:function(t,s){var a=bt();return jg(a,nt,t,s)},useMemoCache:Lf,useCacheRefresh:ry};$f.useEffectEvent=Kg;var uy={readContext:Kt,use:nu,useCallback:Jg,useContext:Kt,useEffect:Ff,useImperativeHandle:Zg,useInsertionEffect:Yg,useLayoutEffect:Xg,useMemo:Wg,useReducer:Bf,useRef:Gg,useState:function(){return Bf(ei)},useDebugValue:Gf,useDeferredValue:function(t,s){var a=bt();return nt===null?Qf(a,t,s):ey(a,nt.memoizedState,t,s)},useTransition:function(){var t=Bf(ei)[0],s=bt().memoizedState;return[typeof t=="boolean"?t:ro(t),s]},useSyncExternalStore:Cg,useId:iy,useHostTransitionStatus:Yf,useFormState:Fg,useActionState:Fg,useOptimistic:function(t,s){var a=bt();return nt!==null?jg(a,nt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Lf,useCacheRefresh:ry};uy.useEffectEvent=Kg;function Zf(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:A({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Jf={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=In(),h=Pi(l);h.payload=s,a!=null&&(h.callback=a),s=Ui(t,h,l),s!==null&&(mn(s,t,l),to(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=In(),h=Pi(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Ui(t,h,l),s!==null&&(mn(s,t,l),to(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=In(),l=Pi(a);l.tag=2,s!=null&&(l.callback=s),s=Ui(t,l,a),s!==null&&(mn(s,t,a),to(s,t,a))}};function hy(t,s,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):s.prototype&&s.prototype.isPureReactComponent?!Kl(a,l)||!Kl(h,d):!0}function fy(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Jf.enqueueReplaceState(s,s.state,null)}function Qr(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function dy(t){kc(t)}function my(t){console.error(t)}function py(t){kc(t)}function lu(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function gy(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wf(t,s,a){return a=Pi(a),a.tag=3,a.payload={element:null},a.callback=function(){lu(t,s)},a}function yy(t){return t=Pi(t),t.tag=3,t}function _y(t,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){gy(s,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){gy(s,a,l),typeof h!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function rA(t,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&ja(s,a,h,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return zn===null?vu():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Yc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Sd(t,l,h)),!1;case 22:return a.flags|=65536,l===Yc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Sd(t,l,h)),!1}throw Error(r(435,a.tag))}return Sd(t,l,h),vu(),!1}if(He)return s=An.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==_f&&(t=Error(r(422),{cause:l}),$l(Pn(t,a)))):(l!==_f&&(s=Error(r(423),{cause:l}),$l(Pn(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Pn(l,a),h=Wf(t.stateNode,l,h),Cf(t,h),yt!==4&&(yt=2)),!1;var d=Error(r(520),{cause:l});if(d=Pn(d,a),go===null?go=[d]:go.push(d),yt!==4&&(yt=2),s===null)return!0;l=Pn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Wf(a.stateNode,l,t),Cf(a,t),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Hi===null||!Hi.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=yy(h),_y(h,t,a,l),Cf(a,h),!1}a=a.return}while(a!==null);return!1}var ed=Error(r(461)),Dt=!1;function Yt(t,s,a,l){s.child=t===null?bg(s,null,a,l):Fr(s,t.child,a,l)}function vy(t,s,a,l,h){a=a.render;var d=s.ref;if("ref"in l){var v={};for(var b in l)b!=="ref"&&(v[b]=l[b])}else v=l;return zr(s),l=jf(t,s,a,v,d,h),b=Pf(),t!==null&&!Dt?(Uf(t,s,h),ti(t,s,h)):(He&&b&&gf(s),s.flags|=1,Yt(t,s,l,h),s.child)}function Ey(t,s,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!df(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,Ty(t,s,d,l,h)):(t=qc(a.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(d=t.child,!od(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Kl,a(v,l)&&t.ref===s.ref)return ti(t,s,h)}return s.flags|=1,t=Xs(d,l),t.ref=s.ref,t.return=s,s.child=t}function Ty(t,s,a,l,h){if(t!==null){var d=t.memoizedProps;if(Kl(d,l)&&t.ref===s.ref)if(Dt=!1,s.pendingProps=l=d,od(t,h))(t.flags&131072)!==0&&(Dt=!0);else return s.lanes=t.lanes,ti(t,s,h)}return td(t,s,a,l,h)}function by(t,s,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=s.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,s.child=null;return Ay(t,s,d,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qc(s,d!==null?d.cachePool:null),d!==null?wg(s,d):Df(),Rg(s);else return l=s.lanes=536870912,Ay(t,s,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Qc(s,d.cachePool),wg(s,d),Li(),s.memoizedState=null):(t!==null&&Qc(s,null),Df(),Li());return Yt(t,s,h,a),s.child}function oo(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ay(t,s,a,l,h){var d=wf();return d=d===null?null:{parent:Ct._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},t!==null&&Qc(s,null),Df(),Rg(s),t!==null&&ja(t,s,l,!0),s.childLanes=h,null}function ou(t,s){return s=uu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Sy(t,s,a){return Fr(s,t.child,null,a),t=ou(s,s.pendingProps),t.flags|=2,Sn(s),s.memoizedState=null,t}function aA(t,s,a){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(He){if(l.mode==="hidden")return t=ou(s,l),s.lanes=536870912,oo(null,t);if(Mf(s),(t=ot)?(t=P_(t,Ln),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Di!==null?{id:Is,overflow:Ns}:null,retryLane:536870912,hydrationErrors:null},a=lg(t),a.return=s,s.child=a,Qt=s,ot=null)):t=null,t===null)throw Mi(s);return s.lanes=536870912,null}return ou(s,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(Mf(s),h)if(s.flags&256)s.flags&=-257,s=Sy(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(r(558));else if(Dt||ja(t,s,a,!1),h=(a&t.childLanes)!==0,Dt||h){if(l=at,l!==null&&(v=Cl(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,Pr(t,v),mn(l,t,v),ed;vu(),s=Sy(t,s,a)}else t=d.treeContext,ot=Bn(v.nextSibling),Qt=s,He=!0,Oi=null,Ln=!1,t!==null&&ug(s,t),s=ou(s,l),s.flags|=4096;return s}return t=Xs(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function cu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function td(t,s,a,l,h){return zr(s),a=jf(t,s,a,l,void 0,h),l=Pf(),t!==null&&!Dt?(Uf(t,s,h),ti(t,s,h)):(He&&l&&gf(s),s.flags|=1,Yt(t,s,a,h),s.child)}function wy(t,s,a,l,h,d){return zr(s),s.updateQueue=null,a=Ng(s,l,a,h),Ig(t),l=Pf(),t!==null&&!Dt?(Uf(t,s,d),ti(t,s,d)):(He&&l&&gf(s),s.flags|=1,Yt(t,s,a,d),s.child)}function Ry(t,s,a,l,h){if(zr(s),s.stateNode===null){var d=Da,v=a.contextType;typeof v=="object"&&v!==null&&(d=Kt(v)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Jf,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},If(s),v=a.contextType,d.context=typeof v=="object"&&v!==null?Kt(v):Da,d.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Zf(s,a,v,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Jf.enqueueReplaceState(d,d.state,null),so(s,l,d,h),no(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){d=s.stateNode;var b=s.memoizedProps,O=Qr(a,b);d.props=O;var B=d.context,Z=a.contextType;v=Da,typeof Z=="object"&&Z!==null&&(v=Kt(Z));var W=a.getDerivedStateFromProps;Z=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==v)&&fy(s,d,l,v),ji=!1;var H=s.memoizedState;d.state=H,so(s,l,d,h),no(),B=s.memoizedState,b||H!==B||ji?(typeof W=="function"&&(Zf(s,a,W,l),B=s.memoizedState),(O=ji||hy(s,a,O,l,H,B,v))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=B),d.props=l,d.state=B,d.context=v,l=O):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Nf(t,s),v=s.memoizedProps,Z=Qr(a,v),d.props=Z,W=s.pendingProps,H=d.context,B=a.contextType,O=Da,typeof B=="object"&&B!==null&&(O=Kt(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==W||H!==O)&&fy(s,d,l,O),ji=!1,H=s.memoizedState,d.state=H,so(s,l,d,h),no();var K=s.memoizedState;v!==W||H!==K||ji||t!==null&&t.dependencies!==null&&Fc(t.dependencies)?(typeof b=="function"&&(Zf(s,a,b,l),K=s.memoizedState),(Z=ji||hy(s,a,Z,l,H,K,O)||t!==null&&t.dependencies!==null&&Fc(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,O)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=K),d.props=l,d.state=K,d.context=O,l=Z):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(s.flags|=1024),l=!1)}return d=l,cu(t,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,t!==null&&l?(s.child=Fr(s,t.child,null,h),s.child=Fr(s,null,a,h)):Yt(t,s,a,h),s.memoizedState=d.state,t=s.child):t=ti(t,s,h),t}function Iy(t,s,a,l){return kr(),s.flags|=256,Yt(t,s,a,l),s.child}var nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sd(t){return{baseLanes:t,cachePool:gg()}}function id(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Rn),t}function Ny(t,s,a){var l=s.pendingProps,h=!1,d=(s.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Tt.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(He){if(h?ki(s):Li(),(t=ot)?(t=P_(t,Ln),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Di!==null?{id:Is,overflow:Ns}:null,retryLane:536870912,hydrationErrors:null},a=lg(t),a.return=s,s.child=a,Qt=s,ot=null)):t=null,t===null)throw Mi(s);return zd(t)?s.lanes=32:s.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(Li(),h=s.mode,b=uu({mode:"hidden",children:b},h),l=Ur(l,h,a,null),b.return=s,l.return=s,b.sibling=l,s.child=b,l=s.child,l.memoizedState=sd(a),l.childLanes=id(t,v,a),s.memoizedState=nd,oo(null,l)):(ki(s),rd(s,b))}var O=t.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(d)s.flags&256?(ki(s),s.flags&=-257,s=ad(t,s,a)):s.memoizedState!==null?(Li(),s.child=t.child,s.flags|=128,s=null):(Li(),b=l.fallback,h=s.mode,l=uu({mode:"visible",children:l.children},h),b=Ur(b,h,a,null),b.flags|=2,l.return=s,b.return=s,l.sibling=b,s.child=l,Fr(s,t.child,null,a),l=s.child,l.memoizedState=sd(a),l.childLanes=id(t,v,a),s.memoizedState=nd,s=oo(null,l));else if(ki(s),zd(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var B=v.dgst;v=B,l=Error(r(419)),l.stack="",l.digest=v,$l({value:l,source:null,stack:null}),s=ad(t,s,a)}else if(Dt||ja(t,s,a,!1),v=(a&t.childLanes)!==0,Dt||v){if(v=at,v!==null&&(l=Cl(v,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Pr(t,l),mn(v,t,l),ed;Ld(b)||vu(),s=ad(t,s,a)}else Ld(b)?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,ot=Bn(b.nextSibling),Qt=s,He=!0,Oi=null,Ln=!1,t!==null&&ug(s,t),s=rd(s,l.children),s.flags|=4096);return s}return h?(Li(),b=l.fallback,h=s.mode,O=t.child,B=O.sibling,l=Xs(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,B!==null?b=Xs(B,b):(b=Ur(b,h,a,null),b.flags|=2),b.return=s,l.return=s,l.sibling=b,s.child=l,oo(null,l),l=s.child,b=t.child.memoizedState,b===null?b=sd(a):(h=b.cachePool,h!==null?(O=Ct._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=gg(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=id(t,v,a),s.memoizedState=nd,oo(t.child,l)):(ki(s),a=t.child,t=a.sibling,a=Xs(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function rd(t,s){return s=uu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function uu(t,s){return t=bn(22,t,null,s),t.lanes=0,t}function ad(t,s,a){return Fr(s,t.child,null,a),t=rd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Cy(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Tf(t.return,s,a)}function ld(t,s,a,l,h,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=d)}function xy(t,s,a){var l=s.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var v=Tt.current,b=(v&2)!==0;if(b?(v=v&1|2,s.flags|=128):v&=1,ae(Tt,v),Yt(t,s,l,a),l=He?Xl:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cy(t,a,s);else if(t.tag===19)Cy(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&Jc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),ld(s,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&Jc(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ld(s,!0,a,null,d,l);break;case"together":ld(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function ti(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),qi|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(ja(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=Xs(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Xs(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function od(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Fc(t)))}function lA(t,s,a){switch(s.tag){case 3:rt(s,s.stateNode.containerInfo),Vi(s,Ct,t.memoizedState.cache),kr();break;case 27:case 5:Cn(s);break;case 4:rt(s,s.stateNode.containerInfo);break;case 10:Vi(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Mf(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ki(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Ny(t,s,a):(ki(s),t=ti(t,s,a),t!==null?t.sibling:null);ki(s);break;case 19:var h=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(ja(t,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return xy(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(Tt,Tt.current),l)break;return null;case 22:return s.lanes=0,by(t,s,a,s.pendingProps);case 24:Vi(s,Ct,t.memoizedState.cache)}return ti(t,s,a)}function Dy(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)Dt=!0;else{if(!od(t,a)&&(s.flags&128)===0)return Dt=!1,lA(t,s,a);Dt=(t.flags&131072)!==0}else Dt=!1,He&&(s.flags&1048576)!==0&&cg(s,Xl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=qr(s.elementType),s.type=t,typeof t=="function")df(t)?(l=Qr(t,l),s.tag=1,s=Ry(null,s,t,l,a)):(s.tag=0,s=td(null,s,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ne){s.tag=11,s=vy(null,s,t,l,a);break e}else if(h===I){s.tag=14,s=Ey(null,s,t,l,a);break e}}throw s=Ne(t)||t,Error(r(306,s,""))}}return s;case 0:return td(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Qr(l,s.pendingProps),Ry(t,s,l,h,a);case 3:e:{if(rt(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;h=d.element,Nf(t,s),so(s,l,null,a);var v=s.memoizedState;if(l=v.cache,Vi(s,Ct,l),l!==d.cache&&bf(s,[Ct],a,!0),no(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=Iy(t,s,l,a);break e}else if(l!==h){h=Pn(Error(r(424)),s),$l(h),s=Iy(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ot=Bn(t.firstChild),Qt=s,He=!0,Oi=null,Ln=!0,a=bg(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(kr(),l===h){s=ti(t,s,a);break e}Yt(t,s,l,a)}s=s.child}return s;case 26:return cu(t,s),t===null?(a=q_(s.type,null,s.pendingProps,null))?s.memoizedState=a:He||(a=s.type,t=s.pendingProps,l=Ru(ye.current).createElement(a),l[Rt]=s,l[zt]=t,Xt(l,a,t),It(l),s.stateNode=l):s.memoizedState=q_(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Cn(s),t===null&&He&&(l=s.stateNode=L_(s.type,s.pendingProps,ye.current),Qt=s,Ln=!0,h=ot,Ki(s.type)?(Bd=h,ot=Bn(l.firstChild)):ot=h),Yt(t,s,s.pendingProps.children,a),cu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&He&&((h=l=ot)&&(l=UA(l,s.type,s.pendingProps,Ln),l!==null?(s.stateNode=l,Qt=s,ot=Bn(l.firstChild),Ln=!1,h=!0):h=!1),h||Mi(s)),Cn(s),h=s.type,d=s.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Pd(h,d)?l=null:v!==null&&Pd(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=jf(t,s,J0,null,null,a),So._currentValue=h),cu(t,s),Yt(t,s,l,a),s.child;case 6:return t===null&&He&&((t=a=ot)&&(a=kA(a,s.pendingProps,Ln),a!==null?(s.stateNode=a,Qt=s,ot=null,t=!0):t=!1),t||Mi(s)),null;case 13:return Ny(t,s,a);case 4:return rt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Fr(s,null,l,a):Yt(t,s,l,a),s.child;case 11:return vy(t,s,s.type,s.pendingProps,a);case 7:return Yt(t,s,s.pendingProps,a),s.child;case 8:return Yt(t,s,s.pendingProps.children,a),s.child;case 12:return Yt(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Vi(s,s.type,l.value),Yt(t,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,zr(s),h=Kt(h),l=l(h),s.flags|=1,Yt(t,s,l,a),s.child;case 14:return Ey(t,s,s.type,s.pendingProps,a);case 15:return Ty(t,s,s.type,s.pendingProps,a);case 19:return xy(t,s,a);case 31:return aA(t,s,a);case 22:return by(t,s,a,s.pendingProps);case 24:return zr(s),l=Kt(Ct),t===null?(h=wf(),h===null&&(h=at,d=Af(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),s.memoizedState={parent:l,cache:h},If(s),Vi(s,Ct,h)):((t.lanes&a)!==0&&(Nf(t,s),so(s,null,null,a),no()),h=t.memoizedState,d=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Vi(s,Ct,l)):(l=d.cache,Vi(s,Ct,l),l!==h.cache&&bf(s,[Ct],a,!0))),Yt(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ni(t){t.flags|=4}function cd(t,s,a,l,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(i_())t.flags|=8192;else throw Hr=Yc,Rf}else t.flags&=-16777217}function Oy(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!K_(s))if(i_())t.flags|=8192;else throw Hr=Yc,Rf}function hu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?yc():536870912,t.lanes|=s,Ka|=s)}function co(t,s){if(!He)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ct(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function oA(t,s,a){var l=s.pendingProps;switch(yf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(s),null;case 1:return ct(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Js(Ct),Ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Va(s)?ni(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,vf())),ct(s),null;case 26:var h=s.type,d=s.memoizedState;return t===null?(ni(s),d!==null?(ct(s),Oy(s,d)):(ct(s),cd(s,h,null,l,a))):d?d!==t.memoizedState?(ni(s),ct(s),Oy(s,d)):(ct(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&ni(s),ct(s),cd(s,h,t,l,a)),null;case 27:if(Qn(s),a=ye.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&ni(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ct(s),null}t=ce.current,Va(s)?hg(s):(t=L_(h,l,a),s.stateNode=t,ni(s))}return ct(s),null;case 5:if(Qn(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&ni(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ct(s),null}if(d=ce.current,Va(s))hg(s);else{var v=Ru(ye.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}d[Rt]=s,d[zt]=l;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=d;e:switch(Xt(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ni(s)}}return ct(s),cd(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&ni(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=ye.current,Va(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,h=Qt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Rt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||N_(t.nodeValue,a)),t||Mi(s,!0)}else t=Ru(t).createTextNode(l),t[Rt]=s,s.stateNode=t}return ct(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Va(s),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Rt]=s}else kr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),t=!1}else a=vf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Sn(s),s):(Sn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return ct(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Va(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Rt]=s}else kr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),h=!1}else h=vf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Sn(s),s):(Sn(s),null)}return Sn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),hu(s,s.updateQueue),ct(s),null);case 4:return Ue(),t===null&&Dd(s.stateNode.containerInfo),ct(s),null;case 10:return Js(s.type),ct(s),null;case 19:if(q(Tt),l=s.memoizedState,l===null)return ct(s),null;if(h=(s.flags&128)!==0,d=l.rendering,d===null)if(h)co(l,!1);else{if(yt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(d=Jc(t),d!==null){for(s.flags|=128,co(l,!1),t=d.updateQueue,s.updateQueue=t,hu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)ag(a,t),a=a.sibling;return ae(Tt,Tt.current&1|2),He&&$s(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&rn()>gu&&(s.flags|=128,h=!0,co(l,!1),s.lanes=4194304)}else{if(!h)if(t=Jc(d),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,hu(s,t),co(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!He)return ct(s),null}else 2*rn()-l.renderingStartTime>gu&&a!==536870912&&(s.flags|=128,h=!0,co(l,!1),s.lanes=4194304);l.isBackwards?(d.sibling=s.child,s.child=d):(t=l.last,t!==null?t.sibling=d:s.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=rn(),t.sibling=null,a=Tt.current,ae(Tt,h?a&1|2:a&1),He&&$s(s,l.treeForkCount),t):(ct(s),null);case 22:case 23:return Sn(s),Of(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ct(s),s.subtreeFlags&6&&(s.flags|=8192)):ct(s),a=s.updateQueue,a!==null&&hu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&q(Br),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Js(Ct),ct(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function cA(t,s){switch(yf(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Js(Ct),Ue(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Qn(s),null;case 31:if(s.memoizedState!==null){if(Sn(s),s.alternate===null)throw Error(r(340));kr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Sn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));kr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return q(Tt),null;case 4:return Ue(),null;case 10:return Js(s.type),null;case 22:case 23:return Sn(s),Of(),t!==null&&q(Br),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Js(Ct),null;case 25:return null;default:return null}}function My(t,s){switch(yf(s),s.tag){case 3:Js(Ct),Ue();break;case 26:case 27:case 5:Qn(s);break;case 4:Ue();break;case 31:s.memoizedState!==null&&Sn(s);break;case 13:Sn(s);break;case 19:q(Tt);break;case 10:Js(s.type);break;case 22:case 23:Sn(s),Of(),t!==null&&q(Br);break;case 24:Js(Ct)}}function uo(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(b){et(s,s.return,b)}}function zi(t,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=s;var O=a,B=b;try{B()}catch(Z){et(h,O,Z)}}}l=l.next}while(l!==d)}}catch(Z){et(s,s.return,Z)}}function Vy(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Sg(s,a)}catch(l){et(t,t.return,l)}}}function jy(t,s,a){a.props=Qr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){et(t,s,l)}}function ho(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){et(t,s,h)}}function Cs(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){et(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){et(t,s,h)}else a.current=null}function Py(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){et(t,t.return,h)}}function ud(t,s,a){try{var l=t.stateNode;DA(l,t.type,a,s),l[zt]=s}catch(h){et(t,t.return,h)}}function Uy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ki(t.type)||t.tag===4}function hd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ki(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fd(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Zn));else if(l!==4&&(l===27&&Ki(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(fd(t,s,a),t=t.sibling;t!==null;)fd(t,s,a),t=t.sibling}function fu(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Ki(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(fu(t,s,a),t=t.sibling;t!==null;)fu(t,s,a),t=t.sibling}function ky(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Xt(s,l,a),s[Rt]=t,s[zt]=a}catch(d){et(t,t.return,d)}}var si=!1,Ot=!1,dd=!1,Ly=typeof WeakSet=="function"?WeakSet:Set,qt=null;function uA(t,s){if(t=t.containerInfo,Vd=Mu,t=Zp(t),af(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,b=-1,O=-1,B=0,Z=0,W=t,H=null;t:for(;;){for(var K;W!==a||h!==0&&W.nodeType!==3||(b=v+h),W!==d||l!==0&&W.nodeType!==3||(O=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(K=W.firstChild)!==null;)H=W,W=K;for(;;){if(W===t)break t;if(H===a&&++B===h&&(b=v),H===d&&++Z===l&&(O=v),(K=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=K}a=b===-1||O===-1?null:{start:b,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(jd={focusedElem:t,selectionRange:a},Mu=!1,qt=s;qt!==null;)if(s=qt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,qt=t;else for(;qt!==null;){switch(s=qt,d=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=s,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var de=Qr(a.type,h);t=l.getSnapshotBeforeUpdate(de,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){et(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)kd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":kd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,qt=t;break}qt=s.return}}function zy(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ri(t,a),l&4&&uo(5,a);break;case 1:if(ri(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){et(a,a.return,v)}else{var h=Qr(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){et(a,a.return,v)}}l&64&&Vy(a),l&512&&ho(a,a.return);break;case 3:if(ri(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Sg(t,s)}catch(v){et(a,a.return,v)}}break;case 27:s===null&&l&4&&ky(a);case 26:case 5:ri(t,a),s===null&&l&4&&Py(a),l&512&&ho(a,a.return);break;case 12:ri(t,a);break;case 31:ri(t,a),l&4&&Hy(t,a);break;case 13:ri(t,a),l&4&&Fy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=vA.bind(null,a),LA(t,a))));break;case 22:if(l=a.memoizedState!==null||si,!l){s=s!==null&&s.memoizedState!==null||Ot,h=si;var d=Ot;si=l,(Ot=s)&&!d?ai(t,a,(a.subtreeFlags&8772)!==0):ri(t,a),si=h,Ot=d}break;case 30:break;default:ri(t,a)}}function By(t){var s=t.alternate;s!==null&&(t.alternate=null,By(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&ya(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,un=!1;function ii(t,s,a){for(a=a.child;a!==null;)qy(t,s,a),a=a.sibling}function qy(t,s,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:Ot||Cs(a,s),ii(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ot||Cs(a,s);var l=dt,h=un;Ki(a.type)&&(dt=a.stateNode,un=!1),ii(t,s,a),To(a.stateNode),dt=l,un=h;break;case 5:Ot||Cs(a,s);case 6:if(l=dt,h=un,dt=null,ii(t,s,a),dt=l,un=h,dt!==null)if(un)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(d){et(a,s,d)}else try{dt.removeChild(a.stateNode)}catch(d){et(a,s,d)}break;case 18:dt!==null&&(un?(t=dt,V_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),tl(t)):V_(dt,a.stateNode));break;case 4:l=dt,h=un,dt=a.stateNode.containerInfo,un=!0,ii(t,s,a),dt=l,un=h;break;case 0:case 11:case 14:case 15:zi(2,a,s),Ot||zi(4,a,s),ii(t,s,a);break;case 1:Ot||(Cs(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&jy(a,s,l)),ii(t,s,a);break;case 21:ii(t,s,a);break;case 22:Ot=(l=Ot)||a.memoizedState!==null,ii(t,s,a),Ot=l;break;default:ii(t,s,a)}}function Hy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{tl(t)}catch(a){et(s,s.return,a)}}}function Fy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{tl(t)}catch(a){et(s,s.return,a)}}function hA(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Ly),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Ly),s;default:throw Error(r(435,t.tag))}}function du(t,s){var a=hA(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var h=EA.bind(null,t,l);l.then(h,h)}})}function hn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=s,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(Ki(b.type)){dt=b.stateNode,un=!1;break e}break;case 5:dt=b.stateNode,un=!1;break e;case 3:case 4:dt=b.stateNode.containerInfo,un=!0;break e}b=b.return}if(dt===null)throw Error(r(160));qy(d,v,h),dt=null,un=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Gy(s,t),s=s.sibling}var ss=null;function Gy(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hn(s,t),fn(t),l&4&&(zi(3,t,t.return),uo(3,t),zi(5,t,t.return));break;case 1:hn(s,t),fn(t),l&512&&(Ot||a===null||Cs(a,a.return)),l&64&&si&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ss;if(hn(s,t),fn(t),l&512&&(Ot||a===null||Cs(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ps]||d[Rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Xt(d,l,a),d[Rt]=t,It(d),l=d;break e;case"link":var v=G_("link","href",h).get(l+(a.href||""));if(v){for(var b=0;b<v.length;b++)if(d=v[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(b,1);break t}}d=h.createElement(l),Xt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=G_("meta","content",h).get(l+(a.content||""))){for(b=0;b<v.length;b++)if(d=v[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(b,1);break t}}d=h.createElement(l),Xt(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Rt]=t,It(d),l=d}t.stateNode=l}else Q_(h,t.type,t.stateNode);else t.stateNode=F_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Q_(h,t.type,t.stateNode):F_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:hn(s,t),fn(t),l&512&&(Ot||a===null||Cs(a,a.return)),a!==null&&l&4&&ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(hn(s,t),fn(t),l&512&&(Ot||a===null||Cs(a,a.return)),t.flags&32){h=t.stateNode;try{cn(h,"")}catch(de){et(t,t.return,de)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,ud(t,h,a!==null?a.memoizedProps:h)),l&1024&&(dd=!0);break;case 6:if(hn(s,t),fn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(de){et(t,t.return,de)}}break;case 3:if(Cu=null,h=ss,ss=Iu(s.containerInfo),hn(s,t),ss=h,fn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{tl(s.containerInfo)}catch(de){et(t,t.return,de)}dd&&(dd=!1,Qy(t));break;case 4:l=ss,ss=Iu(t.stateNode.containerInfo),hn(s,t),fn(t),ss=l;break;case 12:hn(s,t),fn(t);break;case 31:hn(s,t),fn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,du(t,l)));break;case 13:hn(s,t),fn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(pu=rn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,du(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,B=si,Z=Ot;if(si=B||h,Ot=Z||O,hn(s,t),Ot=Z,si=B,fn(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||O||si||Ot||Kr(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(d=O.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=O.stateNode;var W=O.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;b.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(de){et(O,O.return,de)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(de){et(O,O.return,de)}}}else if(s.tag===18){if(a===null){O=s;try{var K=O.stateNode;h?j_(K,!0):j_(O.stateNode,!1)}catch(de){et(O,O.return,de)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,du(t,a))));break;case 19:hn(s,t),fn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,du(t,l)));break;case 30:break;case 21:break;default:hn(s,t),fn(t)}}function fn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(Uy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=hd(t);fu(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(cn(v,""),a.flags&=-33);var b=hd(t);fu(t,b,v);break;case 3:case 4:var O=a.stateNode.containerInfo,B=hd(t);fd(t,B,O);break;default:throw Error(r(161))}}catch(Z){et(t,t.return,Z)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Qy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Qy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function ri(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)zy(t,s.alternate,s),s=s.sibling}function Kr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:zi(4,s,s.return),Kr(s);break;case 1:Cs(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&jy(s,s.return,a),Kr(s);break;case 27:To(s.stateNode);case 26:case 5:Cs(s,s.return),Kr(s);break;case 22:s.memoizedState===null&&Kr(s);break;case 30:Kr(s);break;default:Kr(s)}t=t.sibling}}function ai(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,d=s,v=d.flags;switch(d.tag){case 0:case 11:case 15:ai(h,d,a),uo(4,d);break;case 1:if(ai(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){et(l,l.return,B)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)Ag(O[h],b)}catch(B){et(l,l.return,B)}}a&&v&64&&Vy(d),ho(d,d.return);break;case 27:ky(d);case 26:case 5:ai(h,d,a),a&&l===null&&v&4&&Py(d),ho(d,d.return);break;case 12:ai(h,d,a);break;case 31:ai(h,d,a),a&&v&4&&Hy(h,d);break;case 13:ai(h,d,a),a&&v&4&&Fy(h,d);break;case 22:d.memoizedState===null&&ai(h,d,a),ho(d,d.return);break;case 30:break;default:ai(h,d,a)}s=s.sibling}}function md(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Zl(a))}function pd(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Zl(t))}function is(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ky(t,s,a,l),s=s.sibling}function Ky(t,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:is(t,s,a,l),h&2048&&uo(9,s);break;case 1:is(t,s,a,l);break;case 3:is(t,s,a,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Zl(t)));break;case 12:if(h&2048){is(t,s,a,l),t=s.stateNode;try{var d=s.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){et(s,s.return,O)}}else is(t,s,a,l);break;case 31:is(t,s,a,l);break;case 13:is(t,s,a,l);break;case 23:break;case 22:d=s.stateNode,v=s.alternate,s.memoizedState!==null?d._visibility&2?is(t,s,a,l):fo(t,s):d._visibility&2?is(t,s,a,l):(d._visibility|=2,Fa(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&md(v,s);break;case 24:is(t,s,a,l),h&2048&&pd(s.alternate,s);break;default:is(t,s,a,l)}}function Fa(t,s,a,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var d=t,v=s,b=a,O=l,B=v.flags;switch(v.tag){case 0:case 11:case 15:Fa(d,v,b,O,h),uo(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?Fa(d,v,b,O,h):fo(d,v):(Z._visibility|=2,Fa(d,v,b,O,h)),h&&B&2048&&md(v.alternate,v);break;case 24:Fa(d,v,b,O,h),h&&B&2048&&pd(v.alternate,v);break;default:Fa(d,v,b,O,h)}s=s.sibling}}function fo(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,h=l.flags;switch(l.tag){case 22:fo(a,l),h&2048&&md(l.alternate,l);break;case 24:fo(a,l),h&2048&&pd(l.alternate,l);break;default:fo(a,l)}s=s.sibling}}var mo=8192;function Ga(t,s,a){if(t.subtreeFlags&mo)for(t=t.child;t!==null;)Yy(t,s,a),t=t.sibling}function Yy(t,s,a){switch(t.tag){case 26:Ga(t,s,a),t.flags&mo&&t.memoizedState!==null&&ZA(a,ss,t.memoizedState,t.memoizedProps);break;case 5:Ga(t,s,a);break;case 3:case 4:var l=ss;ss=Iu(t.stateNode.containerInfo),Ga(t,s,a),ss=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=mo,mo=16777216,Ga(t,s,a),mo=l):Ga(t,s,a));break;default:Ga(t,s,a)}}function Xy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function po(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];qt=l,Zy(l,t)}Xy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$y(t),t=t.sibling}function $y(t){switch(t.tag){case 0:case 11:case 15:po(t),t.flags&2048&&zi(9,t,t.return);break;case 3:po(t);break;case 12:po(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,mu(t)):po(t);break;default:po(t)}}function mu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];qt=l,Zy(l,t)}Xy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:zi(8,s,s.return),mu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,mu(s));break;default:mu(s)}t=t.sibling}}function Zy(t,s){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:zi(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qt=l;else e:for(a=t;qt!==null;){l=qt;var h=l.sibling,d=l.return;if(By(l),l===a){qt=null;break e}if(h!==null){h.return=d,qt=h;break e}qt=d}}}var fA={getCacheForType:function(t){var s=Kt(Ct),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Kt(Ct).controller.signal}},dA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,Ve=null,ke=0,We=0,wn=null,Bi=!1,Qa=!1,gd=!1,li=0,yt=0,qi=0,Yr=0,yd=0,Rn=0,Ka=0,go=null,dn=null,_d=!1,pu=0,Jy=0,gu=1/0,yu=null,Hi=null,kt=0,Fi=null,Ya=null,oi=0,vd=0,Ed=null,Wy=null,yo=0,Td=null;function In(){return(Xe&2)!==0&&ke!==0?ke&-ke:F.T!==null?Id():_c()}function e_(){if(Rn===0)if((ke&536870912)===0||He){var t=Tr;Tr<<=1,(Tr&3932160)===0&&(Tr=262144),Rn=t}else Rn=536870912;return t=An.current,t!==null&&(t.flags|=32),Rn}function mn(t,s,a){(t===at&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(Xa(t,0),Gi(t,ke,Rn,!1)),br(t,a),((Xe&2)===0||t!==at)&&(t===at&&((Xe&2)===0&&(Yr|=a),yt===4&&Gi(t,ke,Rn,!1)),xs(t))}function t_(t,s,a){if((Xe&6)!==0)throw Error(r(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Yn(t,s),h=l?gA(t,s):Ad(t,s,!0),d=l;do{if(h===0){Qa&&!l&&Gi(t,s,0,!1);break}else{if(a=t.current.alternate,d&&!mA(a)){h=Ad(t,s,!1),d=!1;continue}if(h===2){if(d=s,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var b=t;h=go;var O=b.current.memoizedState.isDehydrated;if(O&&(Xa(b,v).flags|=256),v=Ad(b,v,!1),v!==2){if(gd&&!O){b.errorRecoveryDisabledLanes|=d,Yr|=d,h=4;break e}d=dn,dn=h,d!==null&&(dn===null?dn=d:dn.push.apply(dn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Xa(t,0),Gi(t,s,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Gi(l,s,Rn,!Bi);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=pu+300-rn(),10<h)){if(Gi(l,s,Rn,!Bi),fs(l,0,!0)!==0)break e;oi=s,l.timeoutHandle=O_(n_.bind(null,l,a,dn,yu,_d,s,Rn,Yr,Ka,Bi,d,"Throttled",-0,0),h);break e}n_(l,a,dn,yu,_d,s,Rn,Yr,Ka,Bi,d,null,-0,0)}}break}while(!0);xs(t)}function n_(t,s,a,l,h,d,v,b,O,B,Z,W,H,K){if(t.timeoutHandle=-1,W=s.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},Yy(s,d,W);var de=(d&62914560)===d?pu-rn():(d&4194048)===d?Jy-rn():0;if(de=JA(W,de),de!==null){oi=d,t.cancelPendingCommit=de(u_.bind(null,t,s,d,a,l,h,v,b,O,Z,W,null,H,K)),Gi(t,d,v,!B);return}}u_(t,s,d,a,l,h,v,b,O)}function mA(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Tn(d(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Gi(t,s,a,l){s&=~yd,s&=~Yr,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var d=31-vt(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Ar(t,a,s)}function _u(){return(Xe&6)===0?(_o(0),!1):!0}function bd(){if(Ve!==null){if(We===0)var t=Ve.return;else t=Ve,Zs=Lr=null,kf(t),La=null,Wl=0,t=Ve;for(;t!==null;)My(t.alternate,t),t=t.return;Ve=null}}function Xa(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,VA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),oi=0,bd(),at=t,Ve=a=Xs(t.current,null),ke=s,We=0,wn=null,Bi=!1,Qa=Yn(t,s),gd=!1,Ka=Rn=yd=Yr=qi=yt=0,dn=go=null,_d=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-vt(l),d=1<<h;s|=t[h],l&=~d}return li=s,Lc(),a}function s_(t,s){xe=null,F.H=lo,s===ka||s===Kc?(s=vg(),We=3):s===Rf?(s=vg(),We=4):We=s===ed?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,wn=s,Ve===null&&(yt=1,lu(t,Pn(s,t.current)))}function i_(){var t=An.current;return t===null?!0:(ke&4194048)===ke?zn===null:(ke&62914560)===ke||(ke&536870912)!==0?t===zn:!1}function r_(){var t=F.H;return F.H=lo,t===null?lo:t}function a_(){var t=F.A;return F.A=fA,t}function vu(){yt=4,Bi||(ke&4194048)!==ke&&An.current!==null||(Qa=!0),(qi&134217727)===0&&(Yr&134217727)===0||at===null||Gi(at,ke,Rn,!1)}function Ad(t,s,a){var l=Xe;Xe|=2;var h=r_(),d=a_();(at!==t||ke!==s)&&(yu=null,Xa(t,s)),s=!1;var v=yt;e:do try{if(We!==0&&Ve!==null){var b=Ve,O=wn;switch(We){case 8:bd(),v=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(s=!0);var B=We;if(We=0,wn=null,$a(t,b,O,B),a&&Qa){v=0;break e}break;default:B=We,We=0,wn=null,$a(t,b,O,B)}}pA(),v=yt;break}catch(Z){s_(t,Z)}while(!0);return s&&t.shellSuspendCounter++,Zs=Lr=null,Xe=l,F.H=h,F.A=d,Ve===null&&(at=null,ke=0,Lc()),v}function pA(){for(;Ve!==null;)l_(Ve)}function gA(t,s){var a=Xe;Xe|=2;var l=r_(),h=a_();at!==t||ke!==s?(yu=null,gu=rn()+500,Xa(t,s)):Qa=Yn(t,s);e:do try{if(We!==0&&Ve!==null){s=Ve;var d=wn;t:switch(We){case 1:We=0,wn=null,$a(t,s,d,1);break;case 2:case 9:if(yg(d)){We=0,wn=null,o_(s);break}s=function(){We!==2&&We!==9||at!==t||(We=7),xs(t)},d.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:yg(d)?(We=0,wn=null,o_(s)):(We=0,wn=null,$a(t,s,d,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var b=Ve;if(v?K_(v):b.stateNode.complete){We=0,wn=null;var O=b.sibling;if(O!==null)Ve=O;else{var B=b.return;B!==null?(Ve=B,Eu(B)):Ve=null}break t}}We=0,wn=null,$a(t,s,d,5);break;case 6:We=0,wn=null,$a(t,s,d,6);break;case 8:bd(),yt=6;break e;default:throw Error(r(462))}}yA();break}catch(Z){s_(t,Z)}while(!0);return Zs=Lr=null,F.H=l,F.A=h,Xe=a,Ve!==null?0:(at=null,ke=0,Lc(),yt)}function yA(){for(;Ve!==null&&!Jh();)l_(Ve)}function l_(t){var s=Dy(t.alternate,t,li);t.memoizedProps=t.pendingProps,s===null?Eu(t):Ve=s}function o_(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=wy(a,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=wy(a,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:kf(s);default:My(a,s),s=Ve=ag(s,li),s=Dy(a,s,li)}t.memoizedProps=t.pendingProps,s===null?Eu(t):Ve=s}function $a(t,s,a,l){Zs=Lr=null,kf(s),La=null,Wl=0;var h=s.return;try{if(rA(t,h,s,a,ke)){yt=1,lu(t,Pn(a,t.current)),Ve=null;return}}catch(d){if(h!==null)throw Ve=h,d;yt=1,lu(t,Pn(a,t.current)),Ve=null;return}s.flags&32768?(He||l===1?t=!0:Qa||(ke&536870912)!==0?t=!1:(Bi=t=!0,(l===2||l===9||l===3||l===6)&&(l=An.current,l!==null&&l.tag===13&&(l.flags|=16384))),c_(s,t)):Eu(s)}function Eu(t){var s=t;do{if((s.flags&32768)!==0){c_(s,Bi);return}t=s.return;var a=oA(s.alternate,s,li);if(a!==null){Ve=a;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=t}while(s!==null);yt===0&&(yt=5)}function c_(t,s){do{var a=cA(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);yt=6,Ve=null}function u_(t,s,a,l,h,d,v,b,O){t.cancelPendingCommit=null;do Tu();while(kt!==0);if((Xe&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=hf,tf(t,a,d,v,b,O),t===at&&(Ve=at=null,ke=0),Ya=s,Fi=t,oi=a,vd=d,Ed=h,Wy=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,TA(Ti,function(){return p_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,h=$.p,$.p=2,v=Xe,Xe|=4;try{uA(t,s,a)}finally{Xe=v,$.p=h,F.T=l}}kt=1,h_(),f_(),d_()}}function h_(){if(kt===1){kt=0;var t=Fi,s=Ya,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=$.p;$.p=2;var h=Xe;Xe|=4;try{Gy(s,t);var d=jd,v=Zp(t.containerInfo),b=d.focusedElem,O=d.selectionRange;if(v!==b&&b&&b.ownerDocument&&$p(b.ownerDocument.documentElement,b)){if(O!==null&&af(b)){var B=O.start,Z=O.end;if(Z===void 0&&(Z=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(Z,b.value.length);else{var W=b.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var K=H.getSelection(),de=b.textContent.length,Ee=Math.min(O.start,de),it=O.end===void 0?Ee:Math.min(O.end,de);!K.extend&&Ee>it&&(v=it,it=Ee,Ee=v);var U=Xp(b,Ee),j=Xp(b,it);if(U&&j&&(K.rangeCount!==1||K.anchorNode!==U.node||K.anchorOffset!==U.offset||K.focusNode!==j.node||K.focusOffset!==j.offset)){var z=W.createRange();z.setStart(U.node,U.offset),K.removeAllRanges(),Ee>it?(K.addRange(z),K.extend(j.node,j.offset)):(z.setEnd(j.node,j.offset),K.addRange(z))}}}}for(W=[],K=b;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<W.length;b++){var J=W[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Mu=!!Vd,jd=Vd=null}finally{Xe=h,$.p=l,F.T=a}}t.current=s,kt=2}}function f_(){if(kt===2){kt=0;var t=Fi,s=Ya,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=$.p;$.p=2;var h=Xe;Xe|=4;try{zy(t,s.alternate,s)}finally{Xe=h,$.p=l,F.T=a}}kt=3}}function d_(){if(kt===4||kt===3){kt=0,hc();var t=Fi,s=Ya,a=oi,l=Wy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?kt=5:(kt=0,Ya=Fi=null,m_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Hi=null),Gs(a),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Kn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=F.T,h=$.p,$.p=2,F.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var b=l[v];d(b.value,{componentStack:b.stack})}}finally{F.T=s,$.p=h}}(oi&3)!==0&&Tu(),xs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Td?yo++:(yo=0,Td=t):yo=0,_o(0)}}function m_(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Zl(s)))}function Tu(){return h_(),f_(),d_(),p_()}function p_(){if(kt!==5)return!1;var t=Fi,s=vd;vd=0;var a=Gs(oi),l=F.T,h=$.p;try{$.p=32>a?32:a,F.T=null,a=Ed,Ed=null;var d=Fi,v=oi;if(kt=0,Ya=Fi=null,oi=0,(Xe&6)!==0)throw Error(r(331));var b=Xe;if(Xe|=4,$y(d.current),Ky(d,d.current,v,a),Xe=b,_o(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Kn,d)}catch{}return!0}finally{$.p=h,F.T=l,m_(t,s)}}function g_(t,s,a){s=Pn(a,s),s=Wf(t.stateNode,s,2),t=Ui(t,s,2),t!==null&&(br(t,2),xs(t))}function et(t,s,a){if(t.tag===3)g_(t,t,a);else for(;s!==null;){if(s.tag===3){g_(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Hi===null||!Hi.has(l))){t=Pn(a,t),a=yy(2),l=Ui(s,a,2),l!==null&&(_y(a,l,s,t),br(l,2),xs(l));break}}s=s.return}}function Sd(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new dA;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(gd=!0,h.add(a),t=_A.bind(null,t,s,a),s.then(t,t))}function _A(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,at===t&&(ke&a)===a&&(yt===4||yt===3&&(ke&62914560)===ke&&300>rn()-pu?(Xe&2)===0&&Xa(t,0):yd|=a,Ka===ke&&(Ka=0)),xs(t)}function y_(t,s){s===0&&(s=yc()),t=Pr(t,s),t!==null&&(br(t,s),xs(t))}function vA(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),y_(t,a)}function EA(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),y_(t,a)}function TA(t,s){return Ut(t,s)}var bu=null,Za=null,wd=!1,Au=!1,Rd=!1,Qi=0;function xs(t){t!==Za&&t.next===null&&(Za===null?bu=Za=t:Za=Za.next=t),Au=!0,wd||(wd=!0,AA())}function _o(t,s){if(!Rd&&Au){Rd=!0;do for(var a=!1,l=bu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-vt(42|t)+1)-1,d&=h&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,T_(l,d))}else d=ke,d=fs(l,l===at?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Yn(l,d)||(a=!0,T_(l,d));l=l.next}while(a);Rd=!1}}function bA(){__()}function __(){Au=wd=!1;var t=0;Qi!==0&&MA()&&(t=Qi);for(var s=rn(),a=null,l=bu;l!==null;){var h=l.next,d=v_(l,s);d===0?(l.next=null,a===null?bu=h:a.next=h,h===null&&(Za=a)):(a=l,(t!==0||(d&3)!==0)&&(Au=!0)),l=h}kt!==0&&kt!==5||_o(t),Qi!==0&&(Qi=0)}function v_(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-vt(d),b=1<<v,O=h[v];O===-1?((b&a)===0||(b&l)!==0)&&(h[v]=ef(b,s)):O<=s&&(t.expiredLanes|=b),d&=~b}if(s=at,a=ke,a=fs(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ei(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&Ei(l),Gs(a)){case 2:case 8:a=Il;break;case 32:a=Ti;break;case 268435456:a=fc;break;default:a=Ti}return l=E_.bind(null,t),a=Ut(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&Ei(l),t.callbackPriority=2,t.callbackNode=null,2}function E_(t,s){if(kt!==0&&kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Tu()&&t.callbackNode!==a)return null;var l=ke;return l=fs(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(t_(t,l,s),v_(t,rn()),t.callbackNode!=null&&t.callbackNode===a?E_.bind(null,t):null)}function T_(t,s){if(Tu())return null;t_(t,s,!0)}function AA(){jA(function(){(Xe&6)!==0?Ut(Rl,bA):__()})}function Id(){if(Qi===0){var t=Pa;t===0&&(t=us,us<<=1,(us&261888)===0&&(us=256)),Qi=t}return Qi}function b_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ta(""+t)}function A_(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function SA(t,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var d=b_((h[zt]||null).action),v=l.submitter;v&&(s=(s=v[zt]||null)?b_(s.formAction):v.getAttribute("formAction"),s!==null&&(d=s,v=null));var b=new As("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Qi!==0){var O=v?A_(h,v):new FormData(h);Kf(a,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(b.preventDefault(),O=v?A_(h,v):new FormData(h),Kf(a,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var Nd=0;Nd<uf.length;Nd++){var Cd=uf[Nd],wA=Cd.toLowerCase(),RA=Cd[0].toUpperCase()+Cd.slice(1);ns(wA,"on"+RA)}ns(eg,"onAnimationEnd"),ns(tg,"onAnimationIteration"),ns(ng,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(q0,"onTransitionRun"),ns(H0,"onTransitionStart"),ns(F0,"onTransitionCancel"),ns(sg,"onTransitionEnd"),vs("onMouseEnter",["mouseout","mouseover"]),vs("onMouseLeave",["mouseout","mouseover"]),vs("onPointerEnter",["pointerout","pointerover"]),vs("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vo));function S_(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(s)for(var v=l.length-1;0<=v;v--){var b=l[v],O=b.instance,B=b.currentTarget;if(b=b.listener,O!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(Z){kc(Z)}h.currentTarget=null,d=O}else for(v=0;v<l.length;v++){if(b=l[v],O=b.instance,B=b.currentTarget,b=b.listener,O!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=B;try{d(h)}catch(Z){kc(Z)}h.currentTarget=null,d=O}}}}function je(t,s){var a=s[ga];a===void 0&&(a=s[ga]=new Set);var l=t+"__bubble";a.has(l)||(w_(s,t,2,!1),a.add(l))}function xd(t,s,a){var l=0;s&&(l|=4),w_(a,t,l,s)}var Su="_reactListening"+Math.random().toString(36).slice(2);function Dd(t){if(!t[Su]){t[Su]=!0,xl.forEach(function(a){a!=="selectionchange"&&(IA.has(a)||xd(a,!1,t),xd(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Su]||(s[Su]=!0,xd("selectionchange",!1,s))}}function w_(t,s,a,l){switch(ev(s)){case 2:var h=tS;break;case 8:h=nS;break;default:h=Qd}a=h.bind(null,s,a,t),h=void 0,!Nr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function Od(t,s,a,l,h){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var b=l.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=l.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=gs(b),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){l=d=v;continue e}b=b.parentNode}}l=l.return}Ii(function(){var B=d,Z=On(a),W=[];e:{var H=ig.get(t);if(H!==void 0){var K=As,de=t;switch(t){case"keypress":if(xr(a)===0)break e;case"keydown":case"keyup":K=jc;break;case"focusin":de="focus",K=Or;break;case"focusout":de="blur",K=Or;break;case"beforeblur":case"afterblur":K=Or;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Rc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=g;break;case eg:case tg:case ng:K=Nc;break;case sg:K=w;break;case"scroll":case"scrollend":K=ql;break;case"wheel":K=Q;break;case"copy":case"cut":case"paste":K=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ys;break;case"toggle":case"beforetoggle":K=Ce}var Ee=(s&4)!==0,it=!Ee&&(t==="scroll"||t==="scrollend"),U=Ee?H!==null?H+"Capture":null:H;Ee=[];for(var j=B,z;j!==null;){var J=j;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||U===null||(J=Jn(j,U),J!=null&&Ee.push(Eo(j,J,z))),it)break;j=j.return}0<Ee.length&&(H=new K(H,de,null,a,Z),W.push({event:H,listeners:Ee}))}}if((s&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",H&&a!==Ll&&(de=a.relatedTarget||a.fromElement)&&(gs(de)||de[ms]))break e;if((K||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,K?(de=a.relatedTarget||a.toElement,K=B,de=de?gs(de):null,de!==null&&(it=c(de),Ee=de.tag,de!==it||Ee!==5&&Ee!==27&&Ee!==6)&&(de=null)):(K=null,de=B),K!==de)){if(Ee=Hl,J="onMouseLeave",U="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=Ys,J="onPointerLeave",U="onPointerEnter",j="pointer"),it=K==null?H:vn(K),z=de==null?H:vn(de),H=new Ee(J,j+"leave",K,a,Z),H.target=it,H.relatedTarget=z,J=null,gs(Z)===B&&(Ee=new Ee(U,j+"enter",de,a,Z),Ee.target=z,Ee.relatedTarget=it,J=Ee),it=J,K&&de)t:{for(Ee=NA,U=K,j=de,z=0,J=U;J;J=Ee(J))z++;J=0;for(var _e=j;_e;_e=Ee(_e))J++;for(;0<z-J;)U=Ee(U),z--;for(;0<J-z;)j=Ee(j),J--;for(;z--;){if(U===j||j!==null&&U===j.alternate){Ee=U;break t}U=Ee(U),j=Ee(j)}Ee=null}else Ee=null;K!==null&&R_(W,H,K,Ee,!1),de!==null&&it!==null&&R_(W,it,de,Ee,!0)}}e:{if(H=B?vn(B):window,K=H.nodeName&&H.nodeName.toLowerCase(),K==="select"||K==="input"&&H.type==="file")var Qe=Hp;else if(Bp(H))if(Fp)Qe=L0;else{Qe=U0;var pe=P0}else K=H.nodeName,!K||K.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&Ea(B.elementType)&&(Qe=Hp):Qe=k0;if(Qe&&(Qe=Qe(t,B))){qp(W,Qe,a,Z);break e}pe&&pe(t,H,B),t==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&Pl(H,"number",H.value)}switch(pe=B?vn(B):window,t){case"focusin":(Bp(pe)||pe.contentEditable==="true")&&(Na=pe,lf=B,Yl=null);break;case"focusout":Yl=lf=Na=null;break;case"mousedown":of=!0;break;case"contextmenu":case"mouseup":case"dragend":of=!1,Jp(W,a,Z);break;case"selectionchange":if(B0)break;case"keydown":case"keyup":Jp(W,a,Z)}var De;if(Ye)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Ia?Mr(t,a)&&(Le="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(Rs&&a.locale!=="ko"&&(Ia||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Ia&&(De=Bl()):(bs=Z,zl="value"in bs?bs.value:bs.textContent,Ia=!0)),pe=wu(B,Le),0<pe.length&&(Le=new ws(Le,t,null,a,Z),W.push({event:Le,listeners:pe}),De?Le.data=De:(De=Ra(a),De!==null&&(Le.data=De)))),(De=Vn?O0(t,a):M0(t,a))&&(Le=wu(B,"onBeforeInput"),0<Le.length&&(pe=new ws("onBeforeInput","beforeinput",null,a,Z),W.push({event:pe,listeners:Le}),pe.data=De)),SA(W,t,B,a,Z)}S_(W,s)})}function Eo(t,s,a){return{instance:t,listener:s,currentTarget:a}}function wu(t,s){for(var a=s+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Jn(t,a),h!=null&&l.unshift(Eo(t,h,d)),h=Jn(t,s),h!=null&&l.push(Eo(t,h,d))),t.tag===3)return l;t=t.return}return[]}function NA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function R_(t,s,a,l,h){for(var d=s._reactName,v=[];a!==null&&a!==l;){var b=a,O=b.alternate,B=b.stateNode;if(b=b.tag,O!==null&&O===l)break;b!==5&&b!==26&&b!==27||B===null||(O=B,h?(B=Jn(a,d),B!=null&&v.unshift(Eo(a,B,O))):h||(B=Jn(a,d),B!=null&&v.push(Eo(a,B,O)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var CA=/\r\n?/g,xA=/\u0000|\uFFFD/g;function I_(t){return(typeof t=="string"?t:""+t).replace(CA,`
`).replace(xA,"")}function N_(t,s){return s=I_(s),I_(t)===s}function st(t,s,a,l,h,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||cn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&cn(t,""+l);break;case"className":En(t,"class",l);break;case"tabIndex":En(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":En(t,a,l);break;case"style":kl(t,l,d);break;case"data":if(s!=="object"){En(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ta(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&st(t,s,"name",h.name,h,null),st(t,s,"formEncType",h.formEncType,h,null),st(t,s,"formMethod",h.formMethod,h,null),st(t,s,"formTarget",h.formTarget,h,null)):(st(t,s,"encType",h.encType,h,null),st(t,s,"method",h.method,h,null),st(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ta(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Zn);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ta(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),_a(t,"popover",l);break;case"xlinkActuate":Nt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Nt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Nt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Nt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Nt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Nt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Nt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_a(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wc.get(a)||a,_a(t,a,l))}}function Md(t,s,a,l,h,d){switch(a){case"style":kl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?cn(t,l):(typeof l=="number"||typeof l=="bigint")&&cn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),d=t[zt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(s,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):_a(t,a,l)}}}function Xt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(t,s,d,v,a,null)}}h&&st(t,s,"srcSet",a.srcSet,a,null),l&&st(t,s,"src",a.src,a,null);return;case"input":je("invalid",t);var b=d=v=h=null,O=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":v=Z;break;case"checked":O=Z;break;case"defaultChecked":B=Z;break;case"value":d=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:st(t,s,l,Z,a,null)}}bc(t,d,b,O,B,v,h,!1);return;case"select":je("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":v=b;break;case"multiple":l=b;default:st(t,s,h,b,a,null)}s=d,a=v,t.multiple=!!l,s!=null?Ai(t,!!l,s,!1):a!=null&&Ai(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(b=a[v],b!=null))switch(v){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:st(t,s,v,b,a,null)}Si(t,l,h,d);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:st(t,s,O,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<vo.length;l++)je(vo[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:st(t,s,B,l,a,null)}return;default:if(Ea(s)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Md(t,s,Z,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&st(t,s,b,l,a,null))}function DA(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,b=null,O=null,B=null,Z=null;for(K in a){var W=a[K];if(a.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":O=W;default:l.hasOwnProperty(K)||st(t,s,K,null,l,W)}}for(var H in l){var K=l[H];if(W=a[H],l.hasOwnProperty(H)&&(K!=null||W!=null))switch(H){case"type":d=K;break;case"name":h=K;break;case"checked":B=K;break;case"defaultChecked":Z=K;break;case"value":v=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:K!==W&&st(t,s,H,K,l,W)}}va(t,v,b,O,B,Z,d,h);return;case"select":K=v=b=H=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":K=O;default:l.hasOwnProperty(d)||st(t,s,d,null,l,O)}for(h in l)if(d=l[h],O=a[h],l.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":H=d;break;case"defaultValue":b=d;break;case"multiple":v=d;default:d!==O&&st(t,s,h,d,l,O)}s=b,a=v,l=K,H!=null?Ai(t,!!a,H,!1):!!l!=!!a&&(s!=null?Ai(t,!!a,s,!0):Ai(t,!!a,a?[]:"",!1));return;case"textarea":K=H=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:st(t,s,b,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":H=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&st(t,s,v,h,l,d)}Ac(t,H,K);return;case"option":for(var de in a)if(H=a[de],a.hasOwnProperty(de)&&H!=null&&!l.hasOwnProperty(de))switch(de){case"selected":t.selected=!1;break;default:st(t,s,de,null,l,H)}for(O in l)if(H=l[O],K=a[O],l.hasOwnProperty(O)&&H!==K&&(H!=null||K!=null))switch(O){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:st(t,s,O,H,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)H=a[Ee],a.hasOwnProperty(Ee)&&H!=null&&!l.hasOwnProperty(Ee)&&st(t,s,Ee,null,l,H);for(B in l)if(H=l[B],K=a[B],l.hasOwnProperty(B)&&H!==K&&(H!=null||K!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,s));break;default:st(t,s,B,H,l,K)}return;default:if(Ea(s)){for(var it in a)H=a[it],a.hasOwnProperty(it)&&H!==void 0&&!l.hasOwnProperty(it)&&Md(t,s,it,void 0,l,H);for(Z in l)H=l[Z],K=a[Z],!l.hasOwnProperty(Z)||H===K||H===void 0&&K===void 0||Md(t,s,Z,H,l,K);return}}for(var U in a)H=a[U],a.hasOwnProperty(U)&&H!=null&&!l.hasOwnProperty(U)&&st(t,s,U,null,l,H);for(W in l)H=l[W],K=a[W],!l.hasOwnProperty(W)||H===K||H==null&&K==null||st(t,s,W,H,l,K)}function C_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function OA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,v=h.initiatorType,b=h.duration;if(d&&b&&C_(v)){for(v=0,b=h.responseEnd,l+=1;l<a.length;l++){var O=a[l],B=O.startTime;if(B>b)break;var Z=O.transferSize,W=O.initiatorType;Z&&C_(W)&&(O=O.responseEnd,v+=Z*(O<b?1:(b-B)/(O-B)))}if(--l,s+=8*(d+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Vd=null,jd=null;function Ru(t){return t.nodeType===9?t:t.ownerDocument}function x_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D_(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Pd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ud=null;function MA(){var t=window.event;return t&&t.type==="popstate"?t===Ud?!1:(Ud=t,!0):(Ud=null,!1)}var O_=typeof setTimeout=="function"?setTimeout:void 0,VA=typeof clearTimeout=="function"?clearTimeout:void 0,M_=typeof Promise=="function"?Promise:void 0,jA=typeof queueMicrotask=="function"?queueMicrotask:typeof M_<"u"?function(t){return M_.resolve(null).then(t).catch(PA)}:O_;function PA(t){setTimeout(function(){throw t})}function Ki(t){return t==="head"}function V_(t,s){var a=s,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),tl(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")To(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,To(a);for(var d=a.firstChild;d;){var v=d.nextSibling,b=d.nodeName;d[ps]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&To(t.ownerDocument.body);a=h}while(a);tl(s)}function j_(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function kd(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kd(a),ya(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function UA(t,s,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ps])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Bn(t.nextSibling),t===null)break}return null}function kA(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Bn(t.nextSibling),t===null))return null;return t}function P_(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Bn(t.nextSibling),t===null))return null;return t}function Ld(t){return t.data==="$?"||t.data==="$~"}function zd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function LA(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Bn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Bd=null;function U_(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return Bn(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function k_(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function L_(t,s,a){switch(s=Ru(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function To(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ya(t)}var qn=new Map,z_=new Set;function Iu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ci=$.d;$.d={f:zA,r:BA,D:qA,C:HA,L:FA,m:GA,X:KA,S:QA,M:YA};function zA(){var t=ci.f(),s=_u();return t||s}function BA(t){var s=Dn(t);s!==null&&s.tag===5&&s.type==="form"?sy(s):ci.r(t)}var Ja=typeof document>"u"?null:document;function B_(t,s,a){var l=Ja;if(l&&typeof s=="string"&&s){var h=on(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),z_.has(h)||(z_.add(h),t={rel:t,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),Xt(s,"link",t),It(s),l.head.appendChild(s)))}}function qA(t){ci.D(t),B_("dns-prefetch",t,null)}function HA(t,s){ci.C(t,s),B_("preconnect",t,s)}function FA(t,s,a){ci.L(t,s,a);var l=Ja;if(l&&t&&s){var h='link[rel="preload"][as="'+on(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+on(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+on(a.imageSizes)+'"]')):h+='[href="'+on(t)+'"]';var d=h;switch(s){case"style":d=Wa(t);break;case"script":d=el(t)}qn.has(d)||(t=A({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),qn.set(d,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(bo(d))||s==="script"&&l.querySelector(Ao(d))||(s=l.createElement("link"),Xt(s,"link",t),It(s),l.head.appendChild(s)))}}function GA(t,s){ci.m(t,s);var a=Ja;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+on(l)+'"][href="'+on(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=el(t)}if(!qn.has(d)&&(t=A({rel:"modulepreload",href:t},s),qn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ao(d)))return}l=a.createElement("link"),Xt(l,"link",t),It(l),a.head.appendChild(l)}}}function QA(t,s,a){ci.S(t,s,a);var l=Ja;if(l&&t){var h=ys(l).hoistableStyles,d=Wa(t);s=s||"default";var v=h.get(d);if(!v){var b={loading:0,preload:null};if(v=l.querySelector(bo(d)))b.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":s},a),(a=qn.get(d))&&qd(t,a);var O=v=l.createElement("link");It(O),Xt(O,"link",t),O._p=new Promise(function(B,Z){O.onload=B,O.onerror=Z}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Nu(v,s,l)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(d,v)}}}function KA(t,s){ci.X(t,s);var a=Ja;if(a&&t){var l=ys(a).hoistableScripts,h=el(t),d=l.get(h);d||(d=a.querySelector(Ao(h)),d||(t=A({src:t,async:!0},s),(s=qn.get(h))&&Hd(t,s),d=a.createElement("script"),It(d),Xt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function YA(t,s){ci.M(t,s);var a=Ja;if(a&&t){var l=ys(a).hoistableScripts,h=el(t),d=l.get(h);d||(d=a.querySelector(Ao(h)),d||(t=A({src:t,async:!0,type:"module"},s),(s=qn.get(h))&&Hd(t,s),d=a.createElement("script"),It(d),Xt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function q_(t,s,a,l){var h=(h=ye.current)?Iu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Wa(a.href),a=ys(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Wa(a.href);var d=ys(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(bo(t)))&&!d._p&&(v.instance=d,v.state.loading=5),qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qn.set(t,a),d||XA(h,t,a,v.state))),s&&l===null)throw Error(r(528,""));return v}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=el(a),a=ys(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Wa(t){return'href="'+on(t)+'"'}function bo(t){return'link[rel="stylesheet"]['+t+"]"}function H_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function XA(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Xt(s,"link",a),It(s),t.head.appendChild(s))}function el(t){return'[src="'+on(t)+'"]'}function Ao(t){return"script[async]"+t}function F_(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+on(a.href)+'"]');if(l)return s.instance=l,It(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),It(l),Xt(l,"style",h),Nu(l,a.precedence,t),s.instance=l;case"stylesheet":h=Wa(a.href);var d=t.querySelector(bo(h));if(d)return s.state.loading|=4,s.instance=d,It(d),d;l=H_(a),(h=qn.get(h))&&qd(l,h),d=(t.ownerDocument||t).createElement("link"),It(d);var v=d;return v._p=new Promise(function(b,O){v.onload=b,v.onerror=O}),Xt(d,"link",l),s.state.loading|=4,Nu(d,a.precedence,t),s.instance=d;case"script":return d=el(a.src),(h=t.querySelector(Ao(d)))?(s.instance=h,It(h),h):(l=a,(h=qn.get(d))&&(l=A({},a),Hd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),It(h),Xt(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Nu(l,a.precedence,t));return s.instance}function Nu(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var b=l[v];if(b.dataset.precedence===s)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function qd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Hd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Cu=null;function G_(t,s,a){if(Cu===null){var l=new Map,h=Cu=new Map;h.set(a,l)}else h=Cu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ps]||d[Rt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(s)||"";v=t+v;var b=l.get(v);b?b.push(d):l.set(v,[d])}}return l}function Q_(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function $A(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function K_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function ZA(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Wa(l.href),d=s.querySelector(bo(h));if(d){s=d._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=xu.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=d,It(d);return}d=s.ownerDocument||s,l=H_(l),(h=qn.get(h))&&qd(l,h),d=d.createElement("link"),It(d);var v=d;v._p=new Promise(function(b,O){v.onload=b,v.onerror=O}),Xt(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=xu.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Fd=0;function JA(t,s){return t.stylesheets&&t.count===0&&Ou(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Ou(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+s);0<t.imgBytes&&Fd===0&&(Fd=62500*OA());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ou(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Fd?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function xu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ou(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Du=null;function Ou(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Du=new Map,s.forEach(WA,t),Du=null,xu.call(t))}function WA(t,s){if(!(s.state.loading&4)){var a=Du.get(t);if(a)var l=a.get(null);else{a=new Map,Du.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=s.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=xu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var So={$$typeof:re,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function eS(t,s,a,l,h,d,v,b,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ds(0),this.hiddenUpdates=ds(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Y_(t,s,a,l,h,d,v,b,O,B,Z,W){return t=new eS(t,s,a,v,O,B,Z,W,b),s=1,d===!0&&(s|=24),d=bn(3,null,null,s),t.current=d,d.stateNode=t,s=Af(),s.refCount++,t.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},If(d),t}function X_(t){return t?(t=Da,t):Da}function $_(t,s,a,l,h,d){h=X_(h),l.context===null?l.context=h:l.pendingContext=h,l=Pi(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ui(t,l,s),a!==null&&(mn(a,t,s),to(a,t,s))}function Z_(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Gd(t,s){Z_(t,s),(t=t.alternate)&&Z_(t,s)}function J_(t){if(t.tag===13||t.tag===31){var s=Pr(t,67108864);s!==null&&mn(s,t,67108864),Gd(t,67108864)}}function W_(t){if(t.tag===13||t.tag===31){var s=In();s=Sr(s);var a=Pr(t,s);a!==null&&mn(a,t,s),Gd(t,s)}}var Mu=!0;function tS(t,s,a,l){var h=F.T;F.T=null;var d=$.p;try{$.p=2,Qd(t,s,a,l)}finally{$.p=d,F.T=h}}function nS(t,s,a,l){var h=F.T;F.T=null;var d=$.p;try{$.p=8,Qd(t,s,a,l)}finally{$.p=d,F.T=h}}function Qd(t,s,a,l){if(Mu){var h=Kd(l);if(h===null)Od(t,s,l,Vu,a),tv(t,l);else if(iS(h,t,s,a,l))l.stopPropagation();else if(tv(t,l),s&4&&-1<sS.indexOf(t)){for(;h!==null;){var d=Dn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=hs(d.pendingLanes);if(v!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var O=1<<31-vt(v);b.entanglements[1]|=O,v&=~O}xs(d),(Xe&6)===0&&(gu=rn()+500,_o(0))}}break;case 31:case 13:b=Pr(d,2),b!==null&&mn(b,d,2),_u(),Gd(d,2)}if(d=Kd(l),d===null&&Od(t,s,l,Vu,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Od(t,s,l,null,a)}}function Kd(t){return t=On(t),Yd(t)}var Vu=null;function Yd(t){if(Vu=null,t=gs(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Vu=t,null}function ev(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case Rl:return 2;case Il:return 8;case Ti:case Wh:return 32;case fc:return 268435456;default:return 32}default:return 32}}var Xd=!1,Yi=null,Xi=null,$i=null,wo=new Map,Ro=new Map,Zi=[],sS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tv(t,s){switch(t){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":wo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(s.pointerId)}}function Io(t,s,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},s!==null&&(s=Dn(s),s!==null&&J_(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function iS(t,s,a,l,h){switch(s){case"focusin":return Yi=Io(Yi,t,s,a,l,h),!0;case"dragenter":return Xi=Io(Xi,t,s,a,l,h),!0;case"mouseover":return $i=Io($i,t,s,a,l,h),!0;case"pointerover":var d=h.pointerId;return wo.set(d,Io(wo.get(d)||null,t,s,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ro.set(d,Io(Ro.get(d)||null,t,s,a,l,h)),!0}return!1}function nv(t){var s=gs(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,Xn(t.priority,function(){W_(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,Xn(t.priority,function(){W_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Kd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ll=l,a.target.dispatchEvent(l),Ll=null}else return s=Dn(a),s!==null&&J_(s),t.blockedOn=a,!1;s.shift()}return!0}function sv(t,s,a){ju(t)&&a.delete(s)}function rS(){Xd=!1,Yi!==null&&ju(Yi)&&(Yi=null),Xi!==null&&ju(Xi)&&(Xi=null),$i!==null&&ju($i)&&($i=null),wo.forEach(sv),Ro.forEach(sv)}function Pu(t,s){t.blockedOn===s&&(t.blockedOn=null,Xd||(Xd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,rS)))}var Uu=null;function iv(t){Uu!==t&&(Uu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Uu===t&&(Uu=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(Yd(l||a)===null)continue;break}var d=Dn(a);d!==null&&(t.splice(s,3),s-=3,Kf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function tl(t){function s(O){return Pu(O,t)}Yi!==null&&Pu(Yi,t),Xi!==null&&Pu(Xi,t),$i!==null&&Pu($i,t),wo.forEach(s),Ro.forEach(s);for(var a=0;a<Zi.length;a++){var l=Zi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Zi.length&&(a=Zi[0],a.blockedOn===null);)nv(a),a.blockedOn===null&&Zi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[zt]||null;if(typeof d=="function")v||iv(a);else if(v){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[zt]||null)b=v.formAction;else if(Yd(h)!==null)continue}else b=v.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),iv(a)}}}function rv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function $d(t){this._internalRoot=t}ku.prototype.render=$d.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=In();$_(a,l,t,s,null,null)},ku.prototype.unmount=$d.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;$_(t.current,2,null,t,null,null),_u(),s[ms]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var s=_c();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Zi.length&&s!==0&&s<Zi[a].priority;a++);Zi.splice(a,0,t),a===0&&nv(t)}};var av=e.version;if(av!=="19.2.0")throw Error(r(527,av,"19.2.0"));$.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=_(s),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var aS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{Kn=Lu.inject(aS),Ft=Lu}catch{}}return Co.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",h=dy,d=my,v=py;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=Y_(t,1,!1,null,null,a,l,null,h,d,v,rv),t[ms]=s.current,Dd(t),new $d(s)},Co.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=dy,v=my,b=py,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),s=Y_(t,1,!0,s,a??null,l,h,O,d,v,b,rv),s.context=X_(null),a=s.current,l=In(),l=Sr(l),h=Pi(l),h.callback=null,Ui(a,h,l),a=l,s.current.lanes=a,br(s,a),xs(s),t[ms]=s.current,Dd(t),new ku(s)},Co.version="19.2.0",Co}var gv;function gS(){if(gv)return Wd.exports;gv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Wd.exports=pS(),Wd.exports}var yS=gS();const _S=()=>{};var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},vS=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],f=i[n++],p=i[n++],y=((o&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],f=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},WE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],f=o+1<i.length,p=f?i[o+1]:0,y=o+2<i.length,_=y?i[o+2]:0,T=c>>2,A=(c&3)<<4|p>>4;let S=(p&15)<<2|_>>6,P=_&63;y||(P=64,f||(S=64)),r.push(n[T],n[A],n[S],n[P])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(JE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):vS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const _=o<i.length?n[i.charAt(o)]:64;++o;const A=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||_==null||A==null)throw new ES;const S=c<<2|p>>4;if(r.push(S),_!==64){const P=p<<4&240|_>>2;if(r.push(P),A!==64){const G=_<<6&192|A;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class ES extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TS=function(i){const e=JE(i);return WE.encodeByteArray(e,!0)},sh=function(i){return TS(i).replace(/\./g,"")},eT=function(i){try{return WE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=()=>bS().__FIREBASE_DEFAULTS__,SS=()=>{if(typeof process>"u"||typeof yv>"u")return;const i=yv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},wS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&eT(i[1]);return e&&JSON.parse(e)},wh=()=>{try{return _S()||AS()||SS()||wS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},tT=i=>wh()?.emulatorHosts?.[i],nT=i=>{const e=tT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sT=()=>wh()?.config,iT=i=>wh()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fm(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[sh(JSON.stringify(n)),sh(JSON.stringify(f)),""].join(".")}const Po={};function IS(){const i={prod:[],emulator:[]};for(const e of Object.keys(Po))Po[e]?i.emulator.push(e):i.prod.push(e);return i}function NS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let _v=!1;function Gm(i,e){if(typeof window>"u"||typeof document>"u"||!aa(window.location.host)||Po[i]===e||Po[i]||_v)return;Po[i]=e;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",c=IS().prod.length>0;function f(){const S=document.getElementById(r);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,P){S.setAttribute("width","24"),S.setAttribute("id",P),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{_v=!0,f()},S}function T(S,P){S.setAttribute("id",P),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=NS(r),P=n("text"),G=document.getElementById(P)||document.createElement("span"),k=n("learnmore"),Y=document.getElementById(k)||document.createElement("a"),X=n("preprendIcon"),se=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;p(re),T(Y,k);const ne=_();y(se,X),re.append(se,G,Y,ne),document.body.appendChild(re)}c?(G.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function xS(){const i=wh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function MS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VS(){const i=sn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function jS(){return!xS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PS(){try{return typeof indexedDB=="object"}catch{return!1}}function US(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="FirebaseError";class Hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kS,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jo.prototype.create)}}class Jo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?LS(c,r):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Hs(o,p,r)}}function LS(i,e){return i.replace(zS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const zS=/\{\$([^}]+)}/g;function BS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ea(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],f=e[o];if(vv(c)&&vv(f)){if(!ea(c,f))return!1}else if(c!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function vv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xo(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Do(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function qS(i,e){const n=new HS(i,e);return n.subscribe.bind(n)}class HS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=sm),o.error===void 0&&(o.error=sm),o.complete===void 0&&(o.complete=sm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FS(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(i){return i&&i._delegate?i._delegate:i}class cr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KS(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QS(i){return i===Xr?void 0:i}function KS(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ze||(ze={}));const XS={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},$S=ze.INFO,ZS={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},JS=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=ZS[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=$S,this._logHandler=JS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const WS=(i,e)=>e.some(n=>i instanceof n);let Ev,Tv;function e1(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t1(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aT=new WeakMap,gm=new WeakMap,lT=new WeakMap,im=new WeakMap,Km=new WeakMap;function n1(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(rr(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&aT.set(n,i)}).catch(()=>{}),Km.set(e,i),e}function s1(i){if(gm.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});gm.set(i,e)}let ym={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return gm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||lT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function i1(i){ym=i(ym)}function r1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(rm(this),e,...n);return lT.set(r,e.sort?e.sort():[e]),rr(r)}:t1().includes(i)?function(...e){return i.apply(rm(this),e),rr(aT.get(this))}:function(...e){return rr(i.apply(rm(this),e))}}function a1(i){return typeof i=="function"?r1(i):(i instanceof IDBTransaction&&s1(i),WS(i,e1())?new Proxy(i,ym):i)}function rr(i){if(i instanceof IDBRequest)return n1(i);if(im.has(i))return im.get(i);const e=a1(i);return e!==i&&(im.set(i,e),Km.set(e,i)),e}const rm=i=>Km.get(i);function l1(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const f=indexedDB.open(i,e),p=rr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(rr(f.result),y.oldVersion,y.newVersion,rr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const o1=["get","getKey","getAll","getAllKeys","count"],c1=["put","add","delete","clear"],am=new Map;function bv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(am.get(e))return am.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=c1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||o1.includes(n)))return;const c=async function(f,...p){const y=this.transaction(f,o?"readwrite":"readonly");let _=y.store;return r&&(_=_.index(p.shift())),(await Promise.all([_[n](...p),o&&y.done]))[0]};return am.set(e,c),c}i1(i=>({...i,get:(e,n,r)=>bv(e,n)||i.get(e,n,r),has:(e,n)=>!!bv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function h1(i){return i.getComponent()?.type==="VERSION"}const _m="@firebase/app",Av="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Qm("@firebase/app"),f1="@firebase/app-compat",d1="@firebase/analytics-compat",m1="@firebase/analytics",p1="@firebase/app-check-compat",g1="@firebase/app-check",y1="@firebase/auth",_1="@firebase/auth-compat",v1="@firebase/database",E1="@firebase/data-connect",T1="@firebase/database-compat",b1="@firebase/functions",A1="@firebase/functions-compat",S1="@firebase/installations",w1="@firebase/installations-compat",R1="@firebase/messaging",I1="@firebase/messaging-compat",N1="@firebase/performance",C1="@firebase/performance-compat",x1="@firebase/remote-config",D1="@firebase/remote-config-compat",O1="@firebase/storage",M1="@firebase/storage-compat",V1="@firebase/firestore",j1="@firebase/ai",P1="@firebase/firestore-compat",U1="firebase",k1="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="[DEFAULT]",L1={[_m]:"fire-core",[f1]:"fire-core-compat",[m1]:"fire-analytics",[d1]:"fire-analytics-compat",[g1]:"fire-app-check",[p1]:"fire-app-check-compat",[y1]:"fire-auth",[_1]:"fire-auth-compat",[v1]:"fire-rtdb",[E1]:"fire-data-connect",[T1]:"fire-rtdb-compat",[b1]:"fire-fn",[A1]:"fire-fn-compat",[S1]:"fire-iid",[w1]:"fire-iid-compat",[R1]:"fire-fcm",[I1]:"fire-fcm-compat",[N1]:"fire-perf",[C1]:"fire-perf-compat",[x1]:"fire-rc",[D1]:"fire-rc-compat",[O1]:"fire-gcs",[M1]:"fire-gcs-compat",[V1]:"fire-fst",[P1]:"fire-fst-compat",[j1]:"fire-vertex","fire-js":"fire-js",[U1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,z1=new Map,Em=new Map;function Sv(i,e){try{i.container.addComponent(e)}catch(n){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function ta(i){const e=i.name;if(Em.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;Em.set(e,i);for(const n of ih.values())Sv(n,i);for(const n of z1.values())Sv(n,i);return!0}function Rh(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function gn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Jo("app","Firebase",B1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=k1;function oT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:vm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ar.create("bad-app-name",{appName:String(o)});if(n||(n=sT()),!n)throw ar.create("no-options");const c=ih.get(o);if(c){if(ea(n,c.options)&&ea(r,c.config))return c;throw ar.create("duplicate-app",{appName:o})}const f=new YS(o);for(const y of Em.values())f.addComponent(y);const p=new q1(n,r,f);return ih.set(o,p),p}function Ym(i=vm){const e=ih.get(i);if(!e&&i===vm&&sT())return oT();if(!e)throw ar.create("no-app",{appName:i});return e}function Os(i,e,n){let r=L1[i]??i;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(f.join(" "));return}ta(new cr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="firebase-heartbeat-database",F1=1,qo="firebase-heartbeat-store";let lm=null;function cT(){return lm||(lm=l1(H1,F1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(qo)}catch(n){console.warn(n)}}}}).catch(i=>{throw ar.create("idb-open",{originalErrorMessage:i.message})})),lm}async function G1(i){try{const n=(await cT()).transaction(qo),r=await n.objectStore(qo).get(uT(i));return await n.done,r}catch(e){if(e instanceof Hs)mi.warn(e.message);else{const n=ar.create("idb-get",{originalErrorMessage:e?.message});mi.warn(n.message)}}}async function wv(i,e){try{const r=(await cT()).transaction(qo,"readwrite");await r.objectStore(qo).put(e,uT(i)),await r.done}catch(n){if(n instanceof Hs)mi.warn(n.message);else{const r=ar.create("idb-set",{originalErrorMessage:n?.message});mi.warn(r.message)}}}function uT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=1024,K1=30;class Y1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Rv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>K1){const o=Z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Rv(),{heartbeatsToSend:n,unsentEntries:r}=X1(this._heartbeatsCache.heartbeats),o=sh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return mi.warn(e),""}}}function Rv(){return new Date().toISOString().substring(0,10)}function X1(i,e=Q1){const n=[];let r=i.slice();for(const o of i){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Iv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Iv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PS()?US().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await G1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Iv(i){return sh(JSON.stringify({version:2,heartbeats:i})).length}function Z1(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(i){ta(new cr("platform-logger",e=>new u1(e),"PRIVATE")),ta(new cr("heartbeat",e=>new Y1(e),"PRIVATE")),Os(_m,Av,i),Os(_m,Av,"esm2020"),Os("fire-js","")}J1("");function hT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W1=hT,fT=new Jo("auth","Firebase",hT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=new Qm("@firebase/auth");function ew(i,...e){rh.logLevel<=ze.WARN&&rh.warn(`Auth (${la}): ${i}`,...e)}function Ku(i,...e){rh.logLevel<=ze.ERROR&&rh.error(`Auth (${la}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(i,...e){throw Xm(i,...e)}function Ms(i,...e){return Xm(i,...e)}function dT(i,e,n){const r={...W1(),[e]:n};return new Jo("auth","Firebase",r).create(e,{appName:i.name})}function Vs(i){return dT(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xm(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return fT.create(i,...e)}function Te(i,e,...n){if(!i)throw Xm(e,...n)}function ui(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ku(e),new Error(e)}function pi(i,e){i||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(){return typeof self<"u"&&self.location?.href||""}function tw(){return Nv()==="http:"||Nv()==="https:"}function Nv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tw()||OS()||"connection"in navigator)?navigator.onLine:!0}function sw(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.shortDelay=e,this.longDelay=n,pi(n>e,"Short delay should be less than long delay!"),this.isMobile=CS()||MS()}get(){return nw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(i,e){pi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aw=new ec(3e4,6e4);function gr(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function vi(i,e,n,r,o={}){return pT(i,o,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const p=Wo({key:i.config.apiKey,...f}).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const _={method:e,headers:y,...c};return DS()||(_.referrerPolicy="no-referrer"),i.emulatorConfig&&aa(i.emulatorConfig.host)&&(_.credentials="include"),mT.fetch()(await gT(i,i.config.apiHost,n,p),_)})}async function pT(i,e,n){i._canInitEmulator=!1;const r={...iw,...e};try{const o=new ow(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw zu(i,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[y,_]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw zu(i,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw zu(i,"email-already-in-use",f);if(y==="USER_DISABLED")throw zu(i,"user-disabled",f);const T=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw dT(i,T,_);ls(i,T)}}catch(o){if(o instanceof Hs)throw o;ls(i,"network-request-failed",{message:String(o)})}}async function tc(i,e,n,r,o={}){const c=await vi(i,e,n,r,o);return"mfaPendingCredential"in c&&ls(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function gT(i,e,n,r){const o=`${e}${n}?${r}`,c=i,f=c.config.emulator?$m(i.config,o):`${i.config.apiScheme}://${o}`;return rw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function lw(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ow{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ms(this.auth,"network-request-failed")),aw.get())})}}function zu(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ms(i,e,r);return o.customData._tokenResponse=n,o}function Cv(i){return i!==void 0&&i.enterprise!==void 0}class cw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lw(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uw(i,e){return vi(i,"GET","/v2/recaptchaConfig",gr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(i,e){return vi(i,"POST","/v1/accounts:delete",e)}async function ah(i,e){return vi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fw(i,e=!1){const n=mt(i),r=await n.getIdToken(e),o=Zm(r);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c?.sign_in_provider;return{claims:o,token:r,authTime:Uo(om(o.auth_time)),issuedAtTime:Uo(om(o.iat)),expirationTime:Uo(om(o.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function om(i){return Number(i)*1e3}function Zm(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const o=eT(n);return o?JSON.parse(o):(Ku("Failed to decode base64 JWT payload"),null)}catch(o){return Ku("Caught error parsing JWT payload as JSON",o?.toString()),null}}function xv(i){const e=Zm(i);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hs&&dw(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function dw({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uo(this.lastLoginAt),this.creationTime=Uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(i){const e=i.auth,n=await i.getIdToken(),r=await hl(i,ah(e,{idToken:n}));Te(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?yT(o.providerUserInfo):[],f=gw(i.providerData,c),p=i.isAnonymous,y=!(i.email&&o.passwordHash)&&!f?.length,_=p?y:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(i,T)}async function pw(i){const e=mt(i);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gw(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function yT(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(i,e){const n=await pT(i,{},async()=>{const r=Wo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,f=await gT(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return i.emulatorConfig&&aa(i.emulatorConfig.host)&&(y.credentials="include"),mT.fetch()(f,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _w(i,e){return vi(i,"POST","/v2/accounts:revokeToken",gr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=xv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await yw(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,f=new ll;return r&&(Te(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Te(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(Te(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(i,e){Te(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class rs{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new mw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await hl(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fw(this,e)}reload(){return pw(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await hl(this,hw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,_=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:A,emailVerified:S,isAnonymous:P,providerData:G,stsTokenManager:k}=n;Te(A&&k,e,"internal-error");const Y=ll.fromJSON(this.name,k);Te(typeof A=="string",e,"internal-error"),Wi(r,e.name),Wi(o,e.name),Te(typeof S=="boolean",e,"internal-error"),Te(typeof P=="boolean",e,"internal-error"),Wi(c,e.name),Wi(f,e.name),Wi(p,e.name),Wi(y,e.name),Wi(_,e.name),Wi(T,e.name);const X=new rs({uid:A,auth:e,email:o,emailVerified:S,displayName:r,isAnonymous:P,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:Y,createdAt:_,lastLoginAt:T});return G&&Array.isArray(G)&&(X.providerData=G.map(se=>({...se}))),y&&(X._redirectEventId=y),X}static async _fromIdTokenResponse(e,n,r=!1){const o=new ll;o.updateFromServerResponse(n);const c=new rs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await lh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?yT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!c?.length,p=new ll;p.updateFromIdToken(r);const y=new rs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;function hi(i){pi(i instanceof Function,"Expected a class definition");let e=Dv.get(i);return e?(pi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Dv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_T.type="NONE";const Ov=_T;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(i,e,n){return`firebase:${i}:${e}:${n}`}class ol{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Yu(this.userKey,o.apiKey,c),this.fullPersistenceKey=Yu("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ah(this.auth,{idToken:e}).catch(()=>{});return n?rs._fromGetAccountInfoResponse(this.auth,n,e):null}return rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ol(hi(Ov),e,r);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||hi(Ov);const f=Yu(r,e.config.apiKey,e.name);let p=null;for(const _ of n)try{const T=await _._get(f);if(T){let A;if(typeof T=="string"){const S=await ah(e,{idToken:T}).catch(()=>{});if(!S)break;A=await rs._fromGetAccountInfoResponse(e,S,T)}else A=rs._fromJSON(e,T);_!==c&&(p=A),c=_;break}}catch{}const y=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new ol(c,e,r):(c=y[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(f)}catch{}})),new ol(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ST(e))return"Blackberry";if(wT(e))return"Webos";if(ET(e))return"Safari";if((e.includes("chrome/")||TT(e))&&!e.includes("edge/"))return"Chrome";if(AT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function vT(i=sn()){return/firefox\//i.test(i)}function ET(i=sn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TT(i=sn()){return/crios\//i.test(i)}function bT(i=sn()){return/iemobile/i.test(i)}function AT(i=sn()){return/android/i.test(i)}function ST(i=sn()){return/blackberry/i.test(i)}function wT(i=sn()){return/webos/i.test(i)}function Jm(i=sn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function vw(i=sn()){return Jm(i)&&!!window.navigator?.standalone}function Ew(){return VS()&&document.documentMode===10}function RT(i=sn()){return Jm(i)||AT(i)||wT(i)||ST(i)||/windows phone/i.test(i)||bT(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(i,e=[]){let n;switch(i){case"Browser":n=Mv(sn());break;case"Worker":n=`${Mv(sn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${la}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((f,p)=>{try{const y=e(c);f(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(i,e={}){return vi(i,"GET","/v2/passwordPolicy",gr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=6;class Sw{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Aw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vv(this),this.idTokenSubscription=new Vv(this),this.beforeStateQueue=new Tw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ol.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ah(this,{idToken:e}),r=await rs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(Vs(this));const n=e?mt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bw(this),n=new Sw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Jo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _w(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hi(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await ol.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,o);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ew(`Error while retrieving App Check token: ${e.error}`),e?.token}}function oa(i){return mt(i)}class Vv{constructor(e){this.auth=e,this.observer=null,this.addObserver=qS(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rw(i){Ih=i}function NT(i){return Ih.loadJS(i)}function Iw(){return Ih.recaptchaEnterpriseScript}function Nw(){return Ih.gapiScript}function Cw(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class xw{constructor(){this.enterprise=new Dw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Dw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Ow="recaptcha-enterprise",CT="NO_RECAPTCHA";class Mw{constructor(e){this.type=Ow,this.auth=oa(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{uw(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const _=new cw(y);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,f(_.siteKey)}}).catch(y=>{p(y)})})}function o(c,f,p){const y=window.grecaptcha;Cv(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(_=>{f(_)}).catch(()=>{f(CT)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xw().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{r(this.auth).then(p=>{if(!n&&Cv(window.grecaptcha))o(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=Iw();y.length!==0&&(y+=p),NT(y).then(()=>{o(p,c,f)}).catch(_=>{f(_)})}}).catch(p=>{f(p)})})}}async function jv(i,e,n,r=!1,o=!1){const c=new Mw(i);let f;if(o)f=CT;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,_=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Am(i,e,n,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await jv(i,e,n,n==="getOobCode");return r(i,c)}else return r(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await jv(i,e,n,n==="getOobCode");return r(i,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(i,e){const n=Rh(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ea(c,e??{}))return o;ls(o,"already-initialized")}return n.initialize({options:e})}function jw(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(hi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function Pw(i,e,n){const r=oa(i);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=xT(e),{host:f,port:p}=Uw(e),y=p===null?"":`:${p}`,_={url:`${c}//${f}${y}/`},T=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(ea(_,r.config.emulator)&&ea(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,aa(f)?(Fm(`${c}//${f}${y}`),Gm("Auth",!0)):kw()}function xT(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function Uw(i){const e=xT(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:Pv(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:Pv(f)}}}function Pv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function kw(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}async function Lw(i,e){return vi(i,"POST","/v1/accounts:update",e)}async function zw(i,e){return vi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(i,e){return tc(i,"POST","/v1/accounts:signInWithPassword",gr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(i,e){return tc(i,"POST","/v1/accounts:signInWithEmailLink",gr(i,e))}async function Hw(i,e){return tc(i,"POST","/v1/accounts:signInWithEmailLink",gr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Wm{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ho(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ho(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(e,n,"signInWithPassword",Bw);case"emailLink":return qw(e,{email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(e,r,"signUpPassword",zw);case"emailLink":return Hw(e,{idToken:n,email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(i,e){return tc(i,"POST","/v1/accounts:signInWithIdp",gr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="http://localhost";class na extends Wm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const f=new na(r,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return cl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,cl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cl(e,n)}buildRequest(){const e={requestUri:Fw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qw(i){const e=xo(Do(i)).link,n=e?xo(Do(e)).deep_link_id:null,r=xo(Do(i)).deep_link_id;return(r?xo(Do(r)).link:null)||r||n||e||i}class ep{constructor(e){const n=xo(Do(e)),r=n.apiKey??null,o=n.oobCode??null,c=Gw(n.mode??null);Te(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Qw(e);try{return new ep(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,n){return Ho._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ep.parseLink(n);return Te(r,"argument-error"),Ho._fromEmailAndCode(e,r.code,r.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends DT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends nc{constructor(){super("facebook.com")}static credential(e){return na._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.FACEBOOK_SIGN_IN_METHOD="facebook.com";er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return na._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends nc{constructor(){super("github.com")}static credential(e){return na._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends nc{constructor(){super("twitter.com")}static credential(e,n){return na._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(i,e){return tc(i,"POST","/v1/accounts:signUp",gr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await rs._fromIdTokenResponse(e,r,o),f=Uv(r);return new sa({user:c,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Uv(r);return new sa({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Uv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends Hs{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new oh(e,n,r,o)}}function OT(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(i,c,e,r):c})}async function Yw(i,e,n=!1){const r=await hl(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return sa._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(i,e,n=!1){const{auth:r}=i;if(gn(r.app))return Promise.reject(Vs(r));const o="reauthenticate";try{const c=await hl(i,OT(r,o,e,i),n);Te(c.idToken,r,"internal-error");const f=Zm(c.idToken);Te(f,r,"internal-error");const{sub:p}=f;return Te(i.uid===p,r,"user-mismatch"),sa._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ls(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VT(i,e,n=!1){if(gn(i.app))return Promise.reject(Vs(i));const r="signIn",o=await OT(i,r,e),c=await sa._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function Xw(i,e){return VT(oa(i),e)}async function $w(i,e){return MT(mt(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(i){const e=oa(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Zw(i,e,n){if(gn(i.app))return Promise.reject(Vs(i));const r=oa(i),f=await Am(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kw).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&jT(i),y}),p=await sa._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function Jw(i,e,n){return gn(i.app)?Promise.reject(Vs(i)):Xw(mt(i),ca.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jT(i),r})}function Ww(i,e){const n=mt(i);return gn(n.auth.app)?Promise.reject(Vs(n.auth)):PT(n,e,null)}function eR(i,e){return PT(mt(i),null,e)}async function PT(i,e,n){const{auth:r}=i,c={idToken:await i.getIdToken(),returnSecureToken:!0};e&&(c.email=e),n&&(c.password=n);const f=await hl(i,Lw(r,c));await i._updateTokensIfNecessary(f,!0)}function tR(i,e,n,r){return mt(i).onIdTokenChanged(e,n,r)}function nR(i,e,n){return mt(i).beforeAuthStateChanged(e,n)}function sR(i,e,n,r){return mt(i).onAuthStateChanged(e,n,r)}function UT(i){return mt(i).signOut()}const ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=1e3,rR=10;class LT extends kT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);Ew()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,rR):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LT.type="LOCAL";const aR=LT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT extends kT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zT.type="SESSION";const BT=zT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Nh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(f).map(async _=>_(n.origin,c)),y=await lR(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((p,y)=>{const _=tp("",20);o.port1.start();const T=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(A){const S=A;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(S.data.response);break;default:clearTimeout(T),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return window}function cR(i){js().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(){return typeof js().WorkerGlobalScope<"u"&&typeof js().importScripts=="function"}async function uR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hR(){return navigator?.serviceWorker?.controller||null}function fR(){return qT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="firebaseLocalStorageDb",dR=1,uh="firebaseLocalStorage",FT="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(i,e){return i.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function mR(){const i=indexedDB.deleteDatabase(HT);return new sc(i).toPromise()}function Sm(){const i=indexedDB.open(HT,dR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(uh,{keyPath:FT})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),await mR(),e(await Sm()))})})}async function kv(i,e,n){const r=Ch(i,!0).put({[FT]:e,value:n});return new sc(r).toPromise()}async function pR(i,e){const n=Ch(i,!1).get(e),r=await new sc(n).toPromise();return r===void 0?null:r.value}function Lv(i,e){const n=Ch(i,!0).delete(e);return new sc(n).toPromise()}const gR=800,yR=3;class GT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>yR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(fR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uR(),!this.activeServiceWorker)return;this.sender=new oR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sm();return await kv(e,ch,"1"),await Lv(e,ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Ch(o,!1).getAll();return new sc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GT.type="LOCAL";const _R=GT;new ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(i,e){return e?hi(e):(Te(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends Wm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ER(i){return VT(i.auth,new np(i),i.bypassAuthState)}function TR(i){const{auth:e,user:n}=i;return Te(n,e,"internal-error"),MT(n,new np(i),i.bypassAuthState)}async function bR(i){const{auth:e,user:n}=i;return Te(n,e,"internal-error"),Yw(n,new np(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ER;case"linkViaPopup":case"linkViaRedirect":return bR;case"reauthViaPopup":case"reauthViaRedirect":return TR;default:ls(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=new ec(2e3,1e4);class al extends QT{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,al.currentPopupAction&&al.currentPopupAction.cancel(),al.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=tp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,al.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AR.get())};e()}}al.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="pendingRedirect",Xu=new Map;class wR extends QT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const r=await RR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RR(i,e){const n=CR(e),r=NR(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function IR(i,e){Xu.set(i._key(),e)}function NR(i){return hi(i._redirectPersistence)}function CR(i){return Yu(SR,i.config.apiKey,i.name)}async function xR(i,e,n=!1){if(gn(i.app))return Promise.reject(Vs(i));const r=oa(i),o=vR(r,e),f=await new wR(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=600*1e3;class OR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!KT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ms(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DR&&this.cachedEventUids.clear(),this.cachedEventUids.has(zv(e))}saveEventToCache(e){this.cachedEventUids.add(zv(e)),this.lastProcessedEventTime=Date.now()}}function zv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function KT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function MR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(i,e={}){return vi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PR=/^https?/;async function UR(i){if(i.config.emulator)return;const{authorizedDomains:e}=await VR(i);for(const n of e)try{if(kR(n))return}catch{}ls(i,"unauthorized-domain")}function kR(i){const e=Tm(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!PR.test(n))return!1;if(jR.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new ec(3e4,6e4);function Bv(){const i=js().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function zR(i){return new Promise((e,n)=>{function r(){Bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bv(),n(Ms(i,"network-request-failed"))},timeout:LR.get()})}if(js().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(js().gapi?.load)r();else{const o=Cw("iframefcb");return js()[o]=()=>{gapi.load?r():n(Ms(i,"network-request-failed"))},NT(`${Nw()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw $u=null,e})}let $u=null;function BR(i){return $u=$u||zR(i),$u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new ec(5e3,15e3),HR="__/auth/iframe",FR="emulator/auth/iframe",GR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KR(i){const e=i.config;Te(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?$m(e,FR):`https://${i.config.authDomain}/${HR}`,r={apiKey:e.apiKey,appName:i.name,v:la},o=QR.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Wo(r).slice(1)}`}async function YR(i){const e=await BR(i),n=js().gapi;return Te(n,i,"internal-error"),e.open({where:document.body,url:KR(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GR,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const f=Ms(i,"network-request-failed"),p=js().setTimeout(()=>{c(f)},qR.get());function y(){js().clearTimeout(p),o(r)}r.ping(y).then(y,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$R=500,ZR=600,JR="_blank",WR="http://localhost";class qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eI(i,e,n,r=$R,o=ZR){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...XR,width:r.toString(),height:o.toString(),top:c,left:f},_=sn().toLowerCase();n&&(p=TT(_)?JR:n),vT(_)&&(e=e||WR,y.scrollbars="yes");const T=Object.entries(y).reduce((S,[P,G])=>`${S}${P}=${G},`,"");if(vw(_)&&p!=="_self")return tI(e||"",p),new qv(null);const A=window.open(e||"",p,T);Te(A,i,"popup-blocked");try{A.focus()}catch{}return new qv(A)}function tI(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="__/auth/handler",sI="emulator/auth/handler",iI=encodeURIComponent("fac");async function Hv(i,e,n,r,o,c){Te(i.config.authDomain,i,"auth-domain-config-required"),Te(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:la,eventId:o};if(e instanceof DT){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",BS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))f[T]=A}if(e instanceof nc){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(f.scopes=T.join(","))}i.tenantId&&(f.tid=i.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const y=await i._getAppCheckToken(),_=y?`#${iI}=${encodeURIComponent(y)}`:"";return`${rI(i)}?${Wo(p).slice(1)}${_}`}function rI({config:i}){return i.emulator?$m(i,sI):`https://${i.authDomain}/${nI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="webStorageSupport";class aI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=xR,this._overrideRedirectResult=IR}async _openPopup(e,n,r,o){pi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Hv(e,n,r,Tm(),o);return eI(e,c,tp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await Hv(e,n,r,Tm(),o);return cR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(pi(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await YR(e),r=new OR(e);return n.register("authEvent",o=>(Te(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cm,{type:cm},o=>{const c=o?.[0]?.[cm];c!==void 0&&n(!!c),ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RT()||ET()||Jm()}}const lI=aI;var Fv="@firebase/auth",Gv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uI(i){ta(new cr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;Te(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IT(i)},_=new ww(r,o,c,y);return jw(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ta(new cr("auth-internal",e=>{const n=oa(e.getProvider("auth").getImmediate());return(r=>new oI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(Fv,Gv,cI(i)),Os(Fv,Gv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=300,fI=iT("authIdTokenMaxAge")||hI;let Qv=null;const dI=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fI)return;const o=n?.token;Qv!==o&&(Qv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mI(i=Ym()){const e=Rh(i,"auth");if(e.isInitialized())return e.getImmediate();const n=Vw(i,{popupRedirectResolver:lI,persistence:[_R,aR,BT]}),r=iT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=dI(c.toString());nR(n,f,()=>f(n.currentUser)),tR(n,p=>f(p))}}const o=tT("auth");return o&&Pw(n,`http://${o}`),n}function pI(){return document.getElementsByTagName("head")?.[0]??document}Rw({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Ms("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",pI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uI("Browser");var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lr,YT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function C(){}C.prototype=R.prototype,I.F=R.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(V,x,M){for(var N=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)N[Ne-2]=arguments[Ne];return R.prototype[x].apply(V,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,C){C||(C=0);const V=Array(16);if(typeof R=="string")for(var x=0;x<16;++x)V[x]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(x=0;x<16;++x)V[x]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=I.g[0],C=I.g[1],x=I.g[2];let M=I.g[3],N;N=R+(M^C&(x^M))+V[0]+3614090360&4294967295,R=C+(N<<7&4294967295|N>>>25),N=M+(x^R&(C^x))+V[1]+3905402710&4294967295,M=R+(N<<12&4294967295|N>>>20),N=x+(C^M&(R^C))+V[2]+606105819&4294967295,x=M+(N<<17&4294967295|N>>>15),N=C+(R^x&(M^R))+V[3]+3250441966&4294967295,C=x+(N<<22&4294967295|N>>>10),N=R+(M^C&(x^M))+V[4]+4118548399&4294967295,R=C+(N<<7&4294967295|N>>>25),N=M+(x^R&(C^x))+V[5]+1200080426&4294967295,M=R+(N<<12&4294967295|N>>>20),N=x+(C^M&(R^C))+V[6]+2821735955&4294967295,x=M+(N<<17&4294967295|N>>>15),N=C+(R^x&(M^R))+V[7]+4249261313&4294967295,C=x+(N<<22&4294967295|N>>>10),N=R+(M^C&(x^M))+V[8]+1770035416&4294967295,R=C+(N<<7&4294967295|N>>>25),N=M+(x^R&(C^x))+V[9]+2336552879&4294967295,M=R+(N<<12&4294967295|N>>>20),N=x+(C^M&(R^C))+V[10]+4294925233&4294967295,x=M+(N<<17&4294967295|N>>>15),N=C+(R^x&(M^R))+V[11]+2304563134&4294967295,C=x+(N<<22&4294967295|N>>>10),N=R+(M^C&(x^M))+V[12]+1804603682&4294967295,R=C+(N<<7&4294967295|N>>>25),N=M+(x^R&(C^x))+V[13]+4254626195&4294967295,M=R+(N<<12&4294967295|N>>>20),N=x+(C^M&(R^C))+V[14]+2792965006&4294967295,x=M+(N<<17&4294967295|N>>>15),N=C+(R^x&(M^R))+V[15]+1236535329&4294967295,C=x+(N<<22&4294967295|N>>>10),N=R+(x^M&(C^x))+V[1]+4129170786&4294967295,R=C+(N<<5&4294967295|N>>>27),N=M+(C^x&(R^C))+V[6]+3225465664&4294967295,M=R+(N<<9&4294967295|N>>>23),N=x+(R^C&(M^R))+V[11]+643717713&4294967295,x=M+(N<<14&4294967295|N>>>18),N=C+(M^R&(x^M))+V[0]+3921069994&4294967295,C=x+(N<<20&4294967295|N>>>12),N=R+(x^M&(C^x))+V[5]+3593408605&4294967295,R=C+(N<<5&4294967295|N>>>27),N=M+(C^x&(R^C))+V[10]+38016083&4294967295,M=R+(N<<9&4294967295|N>>>23),N=x+(R^C&(M^R))+V[15]+3634488961&4294967295,x=M+(N<<14&4294967295|N>>>18),N=C+(M^R&(x^M))+V[4]+3889429448&4294967295,C=x+(N<<20&4294967295|N>>>12),N=R+(x^M&(C^x))+V[9]+568446438&4294967295,R=C+(N<<5&4294967295|N>>>27),N=M+(C^x&(R^C))+V[14]+3275163606&4294967295,M=R+(N<<9&4294967295|N>>>23),N=x+(R^C&(M^R))+V[3]+4107603335&4294967295,x=M+(N<<14&4294967295|N>>>18),N=C+(M^R&(x^M))+V[8]+1163531501&4294967295,C=x+(N<<20&4294967295|N>>>12),N=R+(x^M&(C^x))+V[13]+2850285829&4294967295,R=C+(N<<5&4294967295|N>>>27),N=M+(C^x&(R^C))+V[2]+4243563512&4294967295,M=R+(N<<9&4294967295|N>>>23),N=x+(R^C&(M^R))+V[7]+1735328473&4294967295,x=M+(N<<14&4294967295|N>>>18),N=C+(M^R&(x^M))+V[12]+2368359562&4294967295,C=x+(N<<20&4294967295|N>>>12),N=R+(C^x^M)+V[5]+4294588738&4294967295,R=C+(N<<4&4294967295|N>>>28),N=M+(R^C^x)+V[8]+2272392833&4294967295,M=R+(N<<11&4294967295|N>>>21),N=x+(M^R^C)+V[11]+1839030562&4294967295,x=M+(N<<16&4294967295|N>>>16),N=C+(x^M^R)+V[14]+4259657740&4294967295,C=x+(N<<23&4294967295|N>>>9),N=R+(C^x^M)+V[1]+2763975236&4294967295,R=C+(N<<4&4294967295|N>>>28),N=M+(R^C^x)+V[4]+1272893353&4294967295,M=R+(N<<11&4294967295|N>>>21),N=x+(M^R^C)+V[7]+4139469664&4294967295,x=M+(N<<16&4294967295|N>>>16),N=C+(x^M^R)+V[10]+3200236656&4294967295,C=x+(N<<23&4294967295|N>>>9),N=R+(C^x^M)+V[13]+681279174&4294967295,R=C+(N<<4&4294967295|N>>>28),N=M+(R^C^x)+V[0]+3936430074&4294967295,M=R+(N<<11&4294967295|N>>>21),N=x+(M^R^C)+V[3]+3572445317&4294967295,x=M+(N<<16&4294967295|N>>>16),N=C+(x^M^R)+V[6]+76029189&4294967295,C=x+(N<<23&4294967295|N>>>9),N=R+(C^x^M)+V[9]+3654602809&4294967295,R=C+(N<<4&4294967295|N>>>28),N=M+(R^C^x)+V[12]+3873151461&4294967295,M=R+(N<<11&4294967295|N>>>21),N=x+(M^R^C)+V[15]+530742520&4294967295,x=M+(N<<16&4294967295|N>>>16),N=C+(x^M^R)+V[2]+3299628645&4294967295,C=x+(N<<23&4294967295|N>>>9),N=R+(x^(C|~M))+V[0]+4096336452&4294967295,R=C+(N<<6&4294967295|N>>>26),N=M+(C^(R|~x))+V[7]+1126891415&4294967295,M=R+(N<<10&4294967295|N>>>22),N=x+(R^(M|~C))+V[14]+2878612391&4294967295,x=M+(N<<15&4294967295|N>>>17),N=C+(M^(x|~R))+V[5]+4237533241&4294967295,C=x+(N<<21&4294967295|N>>>11),N=R+(x^(C|~M))+V[12]+1700485571&4294967295,R=C+(N<<6&4294967295|N>>>26),N=M+(C^(R|~x))+V[3]+2399980690&4294967295,M=R+(N<<10&4294967295|N>>>22),N=x+(R^(M|~C))+V[10]+4293915773&4294967295,x=M+(N<<15&4294967295|N>>>17),N=C+(M^(x|~R))+V[1]+2240044497&4294967295,C=x+(N<<21&4294967295|N>>>11),N=R+(x^(C|~M))+V[8]+1873313359&4294967295,R=C+(N<<6&4294967295|N>>>26),N=M+(C^(R|~x))+V[15]+4264355552&4294967295,M=R+(N<<10&4294967295|N>>>22),N=x+(R^(M|~C))+V[6]+2734768916&4294967295,x=M+(N<<15&4294967295|N>>>17),N=C+(M^(x|~R))+V[13]+1309151649&4294967295,C=x+(N<<21&4294967295|N>>>11),N=R+(x^(C|~M))+V[4]+4149444226&4294967295,R=C+(N<<6&4294967295|N>>>26),N=M+(C^(R|~x))+V[11]+3174756917&4294967295,M=R+(N<<10&4294967295|N>>>22),N=x+(R^(M|~C))+V[2]+718787259&4294967295,x=M+(N<<15&4294967295|N>>>17),N=C+(M^(x|~R))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(x+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+M&4294967295}r.prototype.v=function(I,R){R===void 0&&(R=I.length);const C=R-this.blockSize,V=this.C;let x=this.h,M=0;for(;M<R;){if(x==0)for(;M<=C;)o(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<R;)if(V[x++]=I.charCodeAt(M++),x==this.blockSize){o(this,V),x=0;break}}else for(;M<R;)if(V[x++]=I[M++],x==this.blockSize){o(this,V),x=0;break}}this.h=x,this.o+=R},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)I[R++]=this.g[C]>>>V&255;return I};function c(I,R){var C=p;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=R(I)}function f(I,R){this.h=R;const C=[];let V=!0;for(let x=I.length-1;x>=0;x--){const M=I[x]|0;V&&M==R||(C[x]=M,V=!1)}this.g=C}var p={};function y(I){return-128<=I&&I<128?c(I,function(R){return new f([R|0],R<0?-1:0)}):new f([I|0],I<0?-1:0)}function _(I){if(isNaN(I)||!isFinite(I))return A;if(I<0)return Y(_(-I));const R=[];let C=1;for(let V=0;I>=C;V++)R[V]=I/C|0,C*=4294967296;return new f(R,0)}function T(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return Y(T(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(R,8));let V=A;for(let M=0;M<I.length;M+=8){var x=Math.min(8,I.length-M);const N=parseInt(I.substring(M,M+x),R);x<8?(x=_(Math.pow(R,x)),V=V.j(x).add(_(N))):(V=V.j(C),V=V.add(_(N)))}return V}var A=y(0),S=y(1),P=y(16777216);i=f.prototype,i.m=function(){if(k(this))return-Y(this).m();let I=0,R=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);I+=(V>=0?V:4294967296+V)*R,R*=4294967296}return I},i.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(G(this))return"0";if(k(this))return"-"+Y(this).toString(I);const R=_(Math.pow(I,6));var C=this;let V="";for(;;){const x=ne(C,R).g;C=X(C,x.j(R));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=x,G(C))return M+V;for(;M.length<6;)M="0"+M;V=M+V}},i.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function G(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function k(I){return I.h==-1}i.l=function(I){return I=X(this,I),k(I)?-1:G(I)?0:1};function Y(I){const R=I.g.length,C=[];for(let V=0;V<R;V++)C[V]=~I.g[V];return new f(C,~I.h).add(S)}i.abs=function(){return k(this)?Y(this):this},i.add=function(I){const R=Math.max(this.g.length,I.g.length),C=[];let V=0;for(let x=0;x<=R;x++){let M=V+(this.i(x)&65535)+(I.i(x)&65535),N=(M>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);V=N>>>16,M&=65535,N&=65535,C[x]=N<<16|M}return new f(C,C[C.length-1]&-2147483648?-1:0)};function X(I,R){return I.add(Y(R))}i.j=function(I){if(G(this)||G(I))return A;if(k(this))return k(I)?Y(this).j(Y(I)):Y(Y(this).j(I));if(k(I))return Y(this.j(Y(I)));if(this.l(P)<0&&I.l(P)<0)return _(this.m()*I.m());const R=this.g.length+I.g.length,C=[];for(var V=0;V<2*R;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let x=0;x<I.g.length;x++){const M=this.i(V)>>>16,N=this.i(V)&65535,Ne=I.i(x)>>>16,Ge=I.i(x)&65535;C[2*V+2*x]+=N*Ge,se(C,2*V+2*x),C[2*V+2*x+1]+=M*Ge,se(C,2*V+2*x+1),C[2*V+2*x+1]+=N*Ne,se(C,2*V+2*x+1),C[2*V+2*x+2]+=M*Ne,se(C,2*V+2*x+2)}for(I=0;I<R;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=R;I<2*R;I++)C[I]=0;return new f(C,0)};function se(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function re(I,R){this.g=I,this.h=R}function ne(I,R){if(G(R))throw Error("division by zero");if(G(I))return new re(A,A);if(k(I))return R=ne(Y(I),R),new re(Y(R.g),Y(R.h));if(k(R))return R=ne(I,Y(R)),new re(Y(R.g),R.h);if(I.g.length>30){if(k(I)||k(R))throw Error("slowDivide_ only works with positive integers.");for(var C=S,V=R;V.l(I)<=0;)C=ue(C),V=ue(V);var x=me(C,1),M=me(V,1);for(V=me(V,2),C=me(C,2);!G(V);){var N=M.add(V);N.l(I)<=0&&(x=x.add(C),M=N),V=me(V,1),C=me(C,1)}return R=X(I,x.j(R)),new re(x,R)}for(x=A;I.l(R)>=0;){for(C=Math.max(1,Math.floor(I.m()/R.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),M=_(C),N=M.j(R);k(N)||N.l(I)>0;)C-=V,M=_(C),N=M.j(R);G(M)&&(M=S),x=x.add(M),I=X(I,N)}return new re(x,I)}i.B=function(I){return ne(this,I).h},i.and=function(I){const R=Math.max(this.g.length,I.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)&I.i(V);return new f(C,this.h&I.h)},i.or=function(I){const R=Math.max(this.g.length,I.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)|I.i(V);return new f(C,this.h|I.h)},i.xor=function(I){const R=Math.max(this.g.length,I.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)^I.i(V);return new f(C,this.h^I.h)};function ue(I){const R=I.g.length+1,C=[];for(let V=0;V<R;V++)C[V]=I.i(V)<<1|I.i(V-1)>>>31;return new f(C,I.h)}function me(I,R){const C=R>>5;R%=32;const V=I.g.length-C,x=[];for(let M=0;M<V;M++)x[M]=R>0?I.i(M+C)>>>R|I.i(M+C+1)<<32-R:I.i(M+C);return new f(x,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,YT=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=T,lr=f}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XT,Oo,$T,Zu,wm,ZT,JT,WT;(function(){var i,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var g=0;g<u.length;++g){var E=u[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function o(u,g){if(g)e:{var E=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var L=u[w];if(!(L in E))break e;E=E[L]}u=u[u.length-1],w=E[u],g=g(w),g!=w&&g!=null&&e(E,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var E=[],w;for(w in g)Object.prototype.hasOwnProperty.call(g,w)&&E.push([w,g[w]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,E){return u.call.apply(u.bind,arguments)}function _(u,g,E){return _=y,_.apply(null,arguments)}function T(u,g){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function A(u,g){function E(){}E.prototype=g.prototype,u.Z=g.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(w,L,Q){for(var le=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)le[Ce-2]=arguments[Ce];return g.prototype[L].apply(w,le)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const g=u.length;if(g>0){const E=Array(g);for(let w=0;w<g;w++)E[w]=u[w];return E}return[]}function G(u,g){for(let w=1;w<arguments.length;w++){const L=arguments[w];var E=typeof L;if(E=E!="object"?E:L?Array.isArray(L)?"array":E:"null",E=="array"||E=="object"&&typeof L.length=="number"){E=u.length||0;const Q=L.length||0;u.length=E+Q;for(let le=0;le<Q;le++)u[E+le]=L[le]}else u.push(L)}}class k{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Y(u){f.setTimeout(()=>{throw u},0)}function X(){var u=I;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class se{constructor(){this.h=this.g=null}add(g,E){const w=re.get();w.set(g,E),this.h?this.h.next=w:this.g=w,this.h=w}}var re=new k(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,me=!1,I=new se,R=()=>{const u=Promise.resolve(void 0);ue=()=>{u.then(C)}};function C(){for(var u;u=X();){try{u.h.call(u.g)}catch(E){Y(E)}var g=re;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}me=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};f.addEventListener("test",E,g),f.removeEventListener("test",E,g)}catch{}return u})();function N(u){return/^[\s\xa0]*$/.test(u)}function Ne(u,g){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}A(Ne,x),Ne.prototype.init=function(u,g){const E=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(E=="mouseover"?g=u.fromElement:E=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ge="closure_listenable_"+(Math.random()*1e6|0),F=0;function $(u,g,E,w,L){this.listener=u,this.proxy=null,this.src=g,this.type=E,this.capture=!!w,this.ha=L,this.key=++F,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ae(u,g,E){for(const w in u)g.call(E,u[w],w,u)}function Oe(u,g){for(const E in u)g.call(void 0,u[E],E,u)}function D(u){const g={};for(const E in u)g[E]=u[E];return g}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(u,g){let E,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(E in w)u[E]=w[E];for(let Q=0;Q<q.length;Q++)E=q[Q],Object.prototype.hasOwnProperty.call(w,E)&&(u[E]=w[E])}}function ce(u){this.src=u,this.g={},this.h=0}ce.prototype.add=function(u,g,E,w,L){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const le=ye(u,g,w,L);return le>-1?(g=u[le],E||(g.fa=!1)):(g=new $(g,this.src,Q,!!w,L),g.fa=E,u.push(g)),g};function ge(u,g){const E=g.type;if(E in u.g){var w=u.g[E],L=Array.prototype.indexOf.call(w,g,void 0),Q;(Q=L>=0)&&Array.prototype.splice.call(w,L,1),Q&&(oe(g),u.g[E].length==0&&(delete u.g[E],u.h--))}}function ye(u,g,E,w){for(let L=0;L<u.length;++L){const Q=u[L];if(!Q.da&&Q.listener==g&&Q.capture==!!E&&Q.ha==w)return L}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),rt={};function Ue(u,g,E,w,L){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)Ue(u,g[Q],E,w,L);return null}return E=wl(E),u&&u[Ge]?u.J(g,E,p(w)?!!w.capture:!1,L):Cn(u,g,E,!1,w,L)}function Cn(u,g,E,w,L,Q){if(!g)throw Error("Invalid event type");const le=p(L)?!!L.capture:!!L;let Ce=vr(u);if(Ce||(u[Me]=Ce=new ce(u)),E=Ce.add(g,E,w,le,Q),E.proxy)return E;if(w=Qn(),E.proxy=w,w.src=u,w.listener=E,u.addEventListener)M||(L=le),L===void 0&&(L=!1),u.addEventListener(g.toString(),w,L);else if(u.attachEvent)u.attachEvent(cs(g.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Qn(){function u(E){return g.call(u.src,u.listener,E)}const g=Al;return u}function da(u,g,E,w,L){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)da(u,g[Q],E,w,L);else w=p(w)?!!w.capture:!!w,E=wl(E),u&&u[Ge]?(u=u.i,Q=String(g).toString(),Q in u.g&&(g=u.g[Q],E=ye(g,E,w,L),E>-1&&(oe(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete u.g[Q],u.h--)))):u&&(u=vr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ye(g,E,w,L)),(E=u>-1?g[u]:null)&&ma(E))}function ma(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ge])ge(g.i,u);else{var E=u.type,w=u.proxy;g.removeEventListener?g.removeEventListener(E,w,u.capture):g.detachEvent?g.detachEvent(cs(E),w):g.addListener&&g.removeListener&&g.removeListener(w),(E=vr(g))?(ge(E,u),E.h==0&&(E.src=null,g[Me]=null)):oe(u)}}}function cs(u){return u in rt?rt[u]:rt[u]="on"+u}function Al(u,g){if(u.da)u=!0;else{g=new Ne(g,this);const E=u.listener,w=u.ha||u.src;u.fa&&ma(u),u=E.call(w,g)}return u}function vr(u){return u=u[Me],u instanceof ce?u:null}var Sl="__closure_events_fn_"+(Math.random()*1e9>>>0);function wl(u){return typeof u=="function"?u:(u[Sl]||(u[Sl]=function(g){return u.handleEvent(g)}),u[Sl])}function St(){V.call(this),this.i=new ce(this),this.M=this,this.G=null}A(St,V),St.prototype[Ge]=!0,St.prototype.removeEventListener=function(u,g,E,w){da(this,u,g,E,w)};function Ut(u,g){var E,w=u.G;if(w)for(E=[];w;w=w.G)E.push(w);if(u=u.M,w=g.type||g,typeof g=="string")g=new x(g,u);else if(g instanceof x)g.target=g.target||u;else{var L=g;g=new x(w,u),ae(g,L)}L=!0;let Q,le;if(E)for(le=E.length-1;le>=0;le--)Q=g.g=E[le],L=Ei(Q,w,!0,g)&&L;if(Q=g.g=u,L=Ei(Q,w,!0,g)&&L,L=Ei(Q,w,!1,g)&&L,E)for(le=0;le<E.length;le++)Q=g.g=E[le],L=Ei(Q,w,!1,g)&&L}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const E=u.g[g];for(let w=0;w<E.length;w++)oe(E[w]);delete u.g[g],u.h--}}this.G=null},St.prototype.J=function(u,g,E,w){return this.i.add(String(u),g,!1,E,w)},St.prototype.K=function(u,g,E,w){return this.i.add(String(u),g,!0,E,w)};function Ei(u,g,E,w){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let Q=0;Q<g.length;++Q){const le=g[Q];if(le&&!le.da&&le.capture==E){const Ce=le.listener,Et=le.ha||le.src;le.fa&&ge(u.i,le),L=Ce.call(Et,w)!==!1&&L}}return L&&!w.defaultPrevented}function Jh(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function hc(u){u.g=Jh(()=>{u.g=null,u.i&&(u.i=!1,hc(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class rn extends V{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:hc(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(u){V.call(this),this.h=u,this.g={}}A(Er,V);var Rl=[];function Il(u){Ae(u.g,function(g,E){this.g.hasOwnProperty(E)&&ma(g)},u),u.g={}}Er.prototype.N=function(){Er.Z.N.call(this),Il(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ti=f.JSON.stringify,Wh=f.JSON.parse,fc=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function dc(){}function mc(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ft(){x.call(this,"d")}A(Ft,x);function xn(){x.call(this,"c")}A(xn,x);var vt={},pc=null;function pa(){return pc=pc||new St}vt.Ia="serverreachability";function gc(u){x.call(this,vt.Ia,u)}A(gc,x);function us(u){const g=pa();Ut(g,new gc(g))}vt.STAT_EVENT="statevent";function Tr(u,g){x.call(this,vt.STAT_EVENT,u),this.stat=g}A(Tr,x);function wt(u){const g=pa();Ut(g,new Tr(g,u))}vt.Ja="timingevent";function hs(u,g){x.call(this,vt.Ja,u),this.size=g}A(hs,x);function fs(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function ef(u,g,E,w,L,Q){u.info(function(){if(u.g)if(Q){var le="",Ce=Q.split("&");for(let Ye=0;Ye<Ce.length;Ye++){var Et=Ce[Ye].split("=");if(Et.length>1){const ft=Et[0];Et=Et[1];const Vn=ft.split("_");le=Vn.length>=2&&Vn[1]=="type"?le+(ft+"="+Et+"&"):le+(ft+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+g+`
`+E+`
`+le})}function yc(u,g,E,w,L,Q,le){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+g+`
`+E+`
`+Q+" "+le})}function ds(u,g,E,w){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+tf(u,E)+(w?" "+w:"")})}function br(u,g){u.info(function(){return"TIMEOUT: "+g})}Yn.prototype.info=function(){};function tf(u,g){if(!u.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var E=Q[u];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var L=w[0];if(L!="noop"&&L!="stop"&&L!="close")for(let le=1;le<w.length;le++)w[le]=""}}}}return Ti(Q)}catch{return g}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cl;function Sr(){}A(Sr,dc),Sr.prototype.g=function(){return new XMLHttpRequest},Cl=new Sr;function Gs(u){return encodeURIComponent(String(u))}function _c(u){var g=1;u=u.split(":");const E=[];for(;g>0&&u.length;)E.push(u.shift()),g--;return u.length&&E.push(u.join(":")),E}function Xn(u,g,E,w){this.j=u,this.i=g,this.l=E,this.S=w||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var Rt={},zt={};function ms(u,g,E){u.M=1,u.A=wr(Nt(g)),u.u=E,u.R=!0,ga(u,null)}function ga(u,g){u.F=Date.now(),ps(u),u.B=Nt(u.A);var E=u.B,w=u.S;Array.isArray(w)||(w=[String(w)]),Ea(E.i,"t",w),u.C=0,E=u.j.L,u.h=new $n,u.g=Mc(u.j,E?g:null,!u.u),u.P>0&&(u.O=new rn(_(u.Y,u,u.g),u.P)),g=u.V,E=u.g,w=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(Rl[0]=L.toString()),L=Rl);for(let Q=0;Q<L.length;Q++){const le=Ue(E,L[Q],w||g.handleEvent,!1,g.h||g);if(!le)break;g.g[le.key]=le}g=u.J?D(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),us(),ef(u.i,u.v,u.B,u.l,u.S,u.u)}Xn.prototype.ba=function(u){u=u.target;const g=this.O;g&&Wn(u)==3?g.j():this.Y(u)},Xn.prototype.Y=function(u){try{if(u==this.g)e:{const Ce=Wn(this.g),Et=this.g.ya(),Ye=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Gt(this.g)))){this.K||Ce!=4||Et==7||(Et==8||Ye<=0?us(3):us(2)),gs(this);var g=this.g.ca();this.X=g;var E=nf(this);if(this.o=g==200,yc(this.i,this.v,this.B,this.l,this.S,Ce,g),this.o){if(this.U&&!this.L){t:{if(this.g){var w,L=this.g;if((w=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(w)){var Q=w;break t}}Q=null}if(u=Q)ds(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ys(this,u);else{this.o=!1,this.m=3,wt(12),vn(this),Dn(this);break e}}if(this.R){u=!0;let ft;for(;!this.K&&this.C<E.length;)if(ft=Ec(this,E),ft==zt){Ce==4&&(this.m=4,wt(14),u=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==Rt){this.m=4,wt(15),ds(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else ds(this.i,this.l,ft,null),ys(this,ft);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,wt(16),u=!1),this.o=this.o&&u,!u)ds(this.i,this.l,E,"[Invalid Chunked Response]"),vn(this),Dn(this);else if(E.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Fl(le),le.P=!0,wt(11))}}else ds(this.i,this.l,E,null),ys(this,E);Ce==4&&vn(this),this.o&&!this.K&&(Ce==4?Cc(this.j,this):(this.o=!1,ps(this)))}else Ks(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),vn(this),Dn(this)}}}catch{}finally{}};function nf(u){if(!vc(u))return u.g.la();const g=Gt(u.g);if(g==="")return"";let E="";const w=g.length,L=Wn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vn(u),Dn(u),"";u.h.i=new f.TextDecoder}for(let Q=0;Q<w;Q++)u.h.h=!0,E+=u.h.i.decode(g[Q],{stream:!(L&&Q==w-1)});return g.length=0,u.h.g+=E,u.C=0,u.h.g}function vc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ec(u,g){var E=u.C,w=g.indexOf(`
`,E);return w==-1?zt:(E=Number(g.substring(E,w)),isNaN(E)?Rt:(w+=1,w+E>g.length?zt:(g=g.slice(w,w+E),u.C=w+E,g)))}Xn.prototype.cancel=function(){this.K=!0,vn(this)};function ps(u){u.T=Date.now()+u.H,ya(u,u.H)}function ya(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=fs(_(u.aa,u),g)}function gs(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Xn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(br(this.i,this.B),this.M!=2&&(us(),wt(17)),vn(this),this.m=2,Dn(this)):ya(this,this.T-u)};function Dn(u){u.j.I==0||u.K||Cc(u.j,u)}function vn(u){gs(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Il(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function ys(u,g){try{var E=u.j;if(E.I!=0&&(E.g==u||vs(E.h,u))){if(!u.L&&vs(E.h,u)&&E.I==3){try{var w=E.Ba.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)wa(E),Ci(E);else break e;Or(E),wt(18)}}else E.xa=L[1],0<E.xa-E.K&&L[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=fs(_(E.Va,E),6e3));_s(E.h)<=1&&E.ta&&(E.ta=void 0)}else ws(E,11)}else if((u.L||E.g==u)&&wa(E),!N(g))for(L=E.Ba.g.parse(g),g=0;g<L.length;g++){let Ye=L[g];const ft=Ye[0];if(!(ft<=E.K))if(E.K=ft,Ye=Ye[1],E.I==2)if(Ye[0]=="c"){E.M=Ye[1],E.ba=Ye[2];const Vn=Ye[3];Vn!=null&&(E.ka=Vn,E.j.info("VER="+E.ka));const Rs=Ye[4];Rs!=null&&(E.za=Rs,E.j.info("SVER="+E.za));const es=Ye[5];es!=null&&typeof es=="number"&&es>0&&(w=1.5*es,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const ts=u.g;if(ts){const Mr=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var Q=w.h;Q.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ol(Q,Q.h),Q.h=null))}if(w.G){const Ra=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Ra&&(w.wa=Ra,Je(w.J,w.G,Ra))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var le=u;if(w.na=Oc(w,w.L?w.ba:null,w.W),le.L){Ml(w.h,le);var Ce=le,Et=w.O;Et&&(Ce.H=Et),Ce.D&&(gs(Ce),ps(Ce)),w.g=le}else Ic(w);E.i.length>0&&Ss(E)}else Ye[0]!="stop"&&Ye[0]!="close"||ws(E,7);else E.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ws(E,7):ql(E):Ye[0]!="noop"&&E.l&&E.l.qa(Ye),E.A=0)}}us(4)}catch{}}var It=class{constructor(u,g){this.g=u,this.map=g}};function xl(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _s(u){return u.h?1:u.g?u.g.size:0}function vs(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Ol(u,g){u.g?u.g.add(g):u.h=g}function Ml(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}xl.prototype.cancel=function(){if(this.i=Vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Vl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const E of u.g.values())g=g.concat(E.G);return g}return P(u.i)}var Tc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _a(u,g){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const w=u[E].indexOf("=");let L,Q=null;w>=0?(L=u[E].substring(0,w),Q=u[E].substring(w+1)):L=u[E],g(L,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function En(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof En?(this.l=u.l,Bt(this,u.j),this.o=u.o,this.g=u.g,bi(this,u.u),this.h=u.h,jl(this,wc(u.i)),this.m=u.m):u&&(g=String(u).match(Tc))?(this.l=!1,Bt(this,g[1]||"",!0),this.o=Es(g[2]||""),this.g=Es(g[3]||"",!0),bi(this,g[4]),this.h=Es(g[5]||"",!0),jl(this,g[6]||"",!0),this.m=Es(g[7]||"")):(this.l=!1,this.i=new Si(null,this.l))}En.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Rr(g,va,!0),":");var E=this.g;return(E||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Rr(g,va,!0),"@"),u.push(Gs(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Rr(E,E.charAt(0)=="/"?Pl:bc,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Rr(E,Ac)),u.join("")},En.prototype.resolve=function(u){const g=Nt(this);let E=!!u.j;E?Bt(g,u.j):E=!!u.o,E?g.o=u.o:E=!!u.g,E?g.g=u.g:E=u.u!=null;var w=u.h;if(E)bi(g,u.u);else if(E=!!u.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var L=g.h.lastIndexOf("/");L!=-1&&(w=g.h.slice(0,L+1)+w)}if(L=w,L==".."||L==".")w="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){w=L.lastIndexOf("/",0)==0,L=L.split("/");const Q=[];for(let le=0;le<L.length;){const Ce=L[le++];Ce=="."?w&&le==L.length&&Q.push(""):Ce==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),w&&le==L.length&&Q.push("")):(Q.push(Ce),w=!0)}w=Q.join("/")}else w=L}return E?g.h=w:E=u.i.toString()!=="",E?jl(g,wc(u.i)):E=!!u.m,E&&(g.m=u.m),g};function Nt(u){return new En(u)}function Bt(u,g,E){u.j=E?Es(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function bi(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function jl(u,g,E){g instanceof Si?(u.i=g,Ta(u.i,u.l)):(E||(g=Rr(g,Ai)),u.i=new Si(g,u.l))}function Je(u,g,E){u.i.set(g,E)}function wr(u){return Je(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Es(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Rr(u,g,E){return typeof u=="string"?(u=encodeURI(u).replace(g,on),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function on(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var va=/[#\/\?@]/g,bc=/[#\?:]/g,Pl=/[#\?]/g,Ai=/[#\?@]/g,Ac=/#/g;function Si(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function cn(u){u.g||(u.g=new Map,u.h=0,u.i&&_a(u.i,function(g,E){u.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}i=Si.prototype,i.add=function(u,g){cn(this),this.i=null,u=wi(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(g),this.h+=1,this};function Sc(u,g){cn(u),g=wi(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ul(u,g){return cn(u),g=wi(u,g),u.g.has(g)}i.forEach=function(u,g){cn(this),this.g.forEach(function(E,w){E.forEach(function(L){u.call(g,L,w,this)},this)},this)};function kl(u,g){cn(u);let E=[];if(typeof g=="string")Ul(u,g)&&(E=E.concat(u.g.get(wi(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)E=E.concat(u[g]);return E}i.set=function(u,g){return cn(this),this.i=null,u=wi(this,u),Ul(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},i.get=function(u,g){return u?(u=kl(this,u),u.length>0?String(u[0]):g):g};function Ea(u,g,E){Sc(u,g),E.length>0&&(u.i=null,u.g.set(wi(u,g),P(E)),u.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let w=0;w<g.length;w++){var E=g[w];const L=Gs(E);E=kl(this,E);for(let Q=0;Q<E.length;Q++){let le=L;E[Q]!==""&&(le+="="+Gs(E[Q])),u.push(le)}}return this.i=u.join("&")};function wc(u){const g=new Si;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function wi(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Ta(u,g){g&&!u.j&&(cn(u),u.i=null,u.g.forEach(function(E,w){const L=w.toLowerCase();w!=L&&(Sc(this,w),Ea(this,L,E))},u)),u.j=g}function Zn(u,g){const E=new Yn;if(f.Image){const w=new Image;w.onload=T(On,E,"TestLoadImage: loaded",!0,g,w),w.onerror=T(On,E,"TestLoadImage: error",!1,g,w),w.onabort=T(On,E,"TestLoadImage: abort",!1,g,w),w.ontimeout=T(On,E,"TestLoadImage: timeout",!1,g,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else g(!1)}function Ll(u,g){const E=new Yn,w=new AbortController,L=setTimeout(()=>{w.abort(),On(E,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:w.signal}).then(Q=>{clearTimeout(L),Q.ok?On(E,"TestPingServer: ok",!0,g):On(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),On(E,"TestPingServer: error",!1,g)})}function On(u,g,E,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(E)}catch{}}function Ri(){this.g=new fc}function Ts(u){this.i=u.Sb||null,this.h=u.ab||!1}A(Ts,dc),Ts.prototype.g=function(){return new Ir(this.i,this.h)};function Ir(u,g){St.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Ir,St),i=Ir.prototype,i.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Jn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ba(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ba(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ii(this):Jn(this),this.readyState==3&&ba(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,Ii(this))},i.Na=function(u){this.g&&(this.response=u,Ii(this))},i.ga=function(){this.g&&Ii(this)};function Ii(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Jn(u)}i.setRequestHeader=function(u,g){this.A.append(u,g)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=g.next();return u.join(`\r
`)};function Jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Mn(u){let g="";return Ae(u,function(E,w){g+=w,g+=":",g+=E,g+=`\r
`}),g}function Nr(u,g,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=Mn(E),typeof u=="string"?E!=null&&Gs(E):Je(u,g,E))}function tt(u){St.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(tt,St);var bs=/^https?$/i,zl=["POST","PUT"];i=tt.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,g,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cl.g(),this.g.onreadystatechange=S(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){Cr(this,Q);return}if(u=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)E.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())E.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),L=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(zl,g,void 0)>=0)||w||L||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of E)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){Cr(this,Q)}};function Cr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Bl(u),Qs(u)}function Bl(u){u.A||(u.A=!0,Ut(u,"complete"),Ut(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ut(this,"complete"),Ut(this,"abort"),Qs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qs(this,!0)),tt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},i.Xa=function(){xr(this)};function xr(u){if(u.h&&typeof c<"u"){if(u.v&&Wn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ut(u,"readystatechange"),Wn(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var w;if(w=Q===0){let le=String(u.D).match(Tc)[1]||null;!le&&f.self&&f.self.location&&(le=f.self.location.protocol.slice(0,-1)),w=!bs.test(le?le.toLowerCase():"")}E=w}if(E)Ut(u,"complete"),Ut(u,"success");else{u.o=6;try{var L=Wn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Bl(u)}}finally{Qs(u)}}}}function Qs(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,g||Ut(u,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Wn(u){return u.g?u.g.readyState:0}i.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Wh(g)}};function Gt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ks(u){const g={};u=(u.g&&Wn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(N(u[w]))continue;var E=_c(u[w]);const L=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=g[L]||[];g[L]=Q,Q.push(E)}Oe(g,function(w){return w.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(u,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||g}function Ni(u){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=As("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=As("baseRetryDelayMs",5e3,u),this.Za=As("retryDelaySeedMs",1e4,u),this.Ta=As("forwardChannelMaxRetries",2,u),this.va=As("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new xl(u&&u.concurrentRequestLimit),this.Ba=new Ri,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ni.prototype,i.ka=8,i.I=1,i.connect=function(u,g,E,w){wt(0),this.W=u,this.H=g||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=Oc(this,null,this.W),Ss(this)};function ql(u){if(Aa(u),u.I==3){var g=u.V++,E=Nt(u.J);if(Je(E,"SID",u.M),Je(E,"RID",g),Je(E,"TYPE","terminate"),Dr(u,E),g=new Xn(u,u.j,g),g.M=2,g.A=wr(Nt(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=g.A,E=!0),E||(g.g=Mc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ps(g)}Dc(u)}function Ci(u){u.g&&(Fl(u),u.g.cancel(),u.g=null)}function Aa(u){Ci(u),u.v&&(f.clearTimeout(u.v),u.v=null),wa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ss(u){if(!Dl(u.h)&&!u.m){u.m=!0;var g=u.Ea;ue||R(),me||(ue(),me=!0),I.add(g,u),u.D=0}}function Sa(u,g){return _s(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=fs(_(u.Ea,u,g),xc(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Xn(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=D(Q),ae(Q,this.U)):Q=this.U),this.u!==null||this.R||(L.J=Q,Q=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=Rc(this,L,g),E=Nt(this.J),Je(E,"RID",u),Je(E,"CVER",22),this.G&&Je(E,"X-HTTP-Session-Id",this.G),Dr(this,E),Q&&(this.R?g="headers="+Gs(Mn(Q))+"&"+g:this.u&&Nr(E,this.u,Q)),Ol(this.h,L),this.Ra&&Je(E,"TYPE","init"),this.S?(Je(E,"$req",g),Je(E,"SID","null"),L.U=!0,ms(L,E,null)):ms(L,E,g),this.I=2}}else this.I==3&&(u?Hl(this,u):this.i.length==0||Dl(this.h)||Hl(this))};function Hl(u,g){var E;g?E=g.l:E=u.V++;const w=Nt(u.J);Je(w,"SID",u.M),Je(w,"RID",E),Je(w,"AID",u.K),Dr(u,w),u.u&&u.o&&Nr(w,u.u,u.o),E=new Xn(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Rc(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ol(u.h,E),ms(E,w,g)}function Dr(u,g){u.H&&Ae(u.H,function(E,w){Je(g,w,E)}),u.l&&Ae({},function(E,w){Je(g,w,E)})}function Rc(u,g,E){E=Math.min(u.i.length,E);const w=u.l?_(u.l.Ka,u.l,u):null;e:{var L=u.i;let Ce=-1;for(;;){const Et=["count="+E];Ce==-1?E>0?(Ce=L[0].g,Et.push("ofs="+Ce)):Ce=0:Et.push("ofs="+Ce);let Ye=!0;for(let ft=0;ft<E;ft++){var Q=L[ft].g;const Vn=L[ft].map;if(Q-=Ce,Q<0)Ce=Math.max(0,L[ft].g-100),Ye=!1;else try{Q="req"+Q+"_"||"";try{var le=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Rs,es]of le){let ts=es;p(es)&&(ts=Ti(es)),Et.push(Q+Rs+"="+encodeURIComponent(ts))}}catch(Rs){throw Et.push(Q+"type="+encodeURIComponent("_badmap")),Rs}}catch{w&&w(Vn)}}if(Ye){le=Et.join("&");break e}}le=void 0}return u=u.i.splice(0,E),g.G=u,le}function Ic(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ue||R(),me||(ue(),me=!0),I.add(g,u),u.A=0}}function Or(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=fs(_(u.Da,u),xc(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,Nc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=fs(_(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Ci(this),Nc(this))};function Fl(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Nc(u){u.g=new Xn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Nt(u.na);Je(g,"RID","rpc"),Je(g,"SID",u.M),Je(g,"AID",u.K),Je(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Je(g,"TO",u.ia),Je(g,"TYPE","xmlhttp"),Dr(u,g),u.u&&u.o&&Nr(g,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=wr(Nt(g)),E.u=null,E.R=!0,ga(E,u)}i.Va=function(){this.C!=null&&(this.C=null,Ci(this),Or(this),wt(19))};function wa(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Cc(u,g){var E=null;if(u.g==g){wa(u),Fl(u),u.g=null;var w=2}else if(vs(u.h,g))E=g.G,Ml(u.h,g),w=1;else return;if(u.I!=0){if(g.o)if(w==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var L=u.D;w=pa(),Ut(w,new hs(w,E)),Ss(u)}else Ic(u);else if(L=g.m,L==3||L==0&&g.X>0||!(w==1&&Sa(u,g)||w==2&&Or(u)))switch(E&&E.length>0&&(g=u.h,g.i=g.i.concat(E)),L){case 1:ws(u,5);break;case 4:ws(u,10);break;case 3:ws(u,6);break;default:ws(u,2)}}}function xc(u,g){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*g}function ws(u,g){if(u.j.info("Error code "+g),g==2){var E=_(u.bb,u),w=u.Ua;const L=!w;w=new En(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Bt(w,"https"),wr(w),L?Zn(w.toString(),E):Ll(w.toString(),E)}else wt(2);u.I=0,u.l&&u.l.pa(g),Dc(u),Aa(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Dc(u){if(u.I=0,u.ja=[],u.l){const g=Vl(u.h);(g.length!=0||u.i.length!=0)&&(G(u.ja,g),G(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function Oc(u,g,E){var w=E instanceof En?Nt(E):new En(E);if(w.g!="")g&&(w.g=g+"."+w.g),bi(w,w.u);else{var L=f.location;w=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const Q=new En(null);w&&Bt(Q,w),g&&(Q.g=g),L&&bi(Q,L),E&&(Q.h=E),w=Q}return E=u.G,g=u.wa,E&&g&&Je(w,E,g),Je(w,"VER",u.ka),Dr(u,w),w}function Mc(u,g,E){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new tt(new Ts({ab:E})):new tt(u.ma),g.Fa(u.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vc(){}i=Vc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function xi(){}xi.prototype.g=function(u,g){return new an(u,g)};function an(u,g){St.call(this),this.g=new Ni(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!N(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Ys(this)}A(an,St),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){ql(this.g)},an.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=Ti(u),u=E);g.i.push(new It(g.Ya++,u)),g.I==3&&Ss(g)},an.prototype.N=function(){this.g.l=null,delete this.j,ql(this.g),delete this.g,an.Z.N.call(this)};function jc(u){Ft.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const E in g){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}A(jc,Ft);function Pc(){xn.call(this),this.status=1}A(Pc,xn);function Ys(u){this.g=u}A(Ys,Vc),Ys.prototype.ra=function(){Ut(this.g,"a")},Ys.prototype.qa=function(u){Ut(this.g,new jc(u))},Ys.prototype.pa=function(u){Ut(this.g,new Pc)},Ys.prototype.oa=function(){Ut(this.g,"b")},xi.prototype.createWebChannel=xi.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,WT=function(){return new xi},JT=function(){return pa()},ZT=vt,wm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,Zu=Ar,Nl.COMPLETE="complete",$T=Nl,mc.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",St.prototype.listen=St.prototype.J,Oo=mc,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,XT=tt}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore",Xv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new Qm("@firebase/firestore");function nl(){return ia.logLevel}function fe(i,...e){if(ia.logLevel<=ze.DEBUG){const n=e.map(sp);ia.debug(`Firestore (${vl}): ${i}`,...n)}}function gi(i,...e){if(ia.logLevel<=ze.ERROR){const n=e.map(sp);ia.error(`Firestore (${vl}): ${i}`,...n)}}function fl(i,...e){if(ia.logLevel<=ze.WARN){const n=e.map(sp);ia.warn(`Firestore (${vl}): ${i}`,...n)}}function sp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eb(i,r,n)}function eb(i,e,n){let r=`FIRESTORE (${vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw gi(r),new Error(r)}function Ze(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||eb(e,o,r)}function Ie(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(tn.UNAUTHENTICATED)))}shutdown(){}}class yI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class _I{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new fi,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},p=y=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new fi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string",31837,{l:r}),new tb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class vI{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new vI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const r=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $v(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=bI(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Be(i,e){return i<e?-1:i>e?1:0}function Rm(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return um(o)===um(c)?Be(o,c):um(o)?1:-1}return Be(i.length,e.length)}const AI=55296,SI=57343;function um(i){const e=i.charCodeAt(0);return e>=AI&&e<=SI}function dl(i,e,n){return i.length===e.length&&i.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="__name__";class Ds{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ds.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ds?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Ds.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Be(e.length,n.length)}static compareSegments(e,n){const r=Ds.isNumericId(e),o=Ds.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ds.extractNumericId(e).compare(Ds.extractNumericId(n)):Rm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lr.fromString(e.substring(4,e.length-2))}}class lt extends Ds{construct(e,n,r){return new lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const wI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Ds{construct(e,n,r){return new Zt(e,n,r)}static isValidIdentifier(e){return wI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zv}static keyField(){return new Zt([Zv])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(r+=p,o++):(c(),o++)}if(c(),f)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(n)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(lt.fromString(e))}static fromName(e){return new ve(lt.fromString(e).popFirst(5))}static empty(){return new ve(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(i,e,n){if(!n)throw new he(ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function RI(i,e,n,r){if(e===!0&&r===!0)throw new he(ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Jv(i){if(!ve.isDocumentKey(i))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Wv(i){if(ve.isDocumentKey(i))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function sb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function xh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function _n(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xh(i);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(i,e){const n={typeString:i};return e&&(n.value=e),n}function ic(i,e){if(!sb(i))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const f=i[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new he(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=-62135596800,tE=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tE);return new ut(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eE)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tE}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ic(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Pt("string",ut._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new ut(0,0))}static max(){return new Se(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=-1;function II(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new ur(o,ve.empty(),e)}function NI(i){return new ur(i.readTime,i.key,Fo)}class ur{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ur(Se.min(),ve.empty(),Fo)}static max(){return new ur(Se.max(),ve.empty(),Fo)}}function CI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(i.documentKey,e.documentKey),n!==0?n:Be(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(i){if(i.code!==ee.FAILED_PRECONDITION||i.message!==xI)throw i;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):te.reject(n)}static resolve(e){return new te(((n,r)=>{n(e)}))}static reject(e){return new te(((n,r)=>{r(e)}))}static waitFor(e){return new te(((n,r)=>{let o=0,c=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++c,f&&c===o&&n()}),(y=>r(y)))})),f=!0,c===o&&n()}))}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next((o=>o?te.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new te(((r,o)=>{const c=e.length,f=new Array(c);let p=0;for(let y=0;y<c;y++){const _=y;n(e[_]).next((T=>{f[_]=T,++p,p===c&&r(f)}),(T=>o(T)))}}))}static doWhile(e,n){return new te(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function OI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=-1;function Oh(i){return i==null}function hh(i){return i===0&&1/i==-1/0}function MI(i){return typeof i=="number"&&Number.isInteger(i)&&!hh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="";function VI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=nE(e)),e=jI(i.get(n),e);return nE(e)}function jI(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case ib:n+="";break;default:n+=c}}return n}function nE(i){return i+ib+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function yr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function rb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??$t.RED,this.left=o??$t.EMPTY,this.right=c??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new $t(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iE(this.data.getIterator())}getIteratorFrom(e){return new iE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class iE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new Lt(Zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new ab("Invalid base64 string: "+c):c}})(e);return new Jt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c})(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const PI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(i){if(Ze(!!i,39018),typeof i=="string"){let e=0;const n=PI.exec(i);if(Ze(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(i.seconds),nanos:At(i.nanos)}}function At(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function fr(i){return typeof i=="string"?Jt.fromBase64String(i):Jt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="server_timestamp",ob="__type__",cb="__previous_value__",ub="__local_write_time__";function ap(i){return(i?.mapValue?.fields||{})[ob]?.stringValue===lb}function Mh(i){const e=i.mapValue.fields[cb];return ap(e)?Mh(e):e}function Go(i){const e=hr(i.mapValue.fields[ub].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,r,o,c,f,p,y,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=T}}const fh="(default)";class Qo{constructor(e,n){this.projectId=e,this.database=n||fh}static empty(){return new Qo("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof Qo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="__type__",kI="__max__",Hu={mapValue:{}},fb="__vector__",dh="value";function dr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ap(i)?4:zI(i)?9007199254740991:LI(i)?10:11:be(28295,{value:i})}function zs(i,e){if(i===e)return!0;const n=dr(i);if(n!==dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Go(i).isEqual(Go(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=hr(o.timestampValue),p=hr(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return fr(o.bytesValue).isEqual(fr(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return At(o.geoPointValue.latitude)===At(c.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return At(o.integerValue)===At(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=At(o.doubleValue),p=At(c.doubleValue);return f===p?hh(f)===hh(p):isNaN(f)&&isNaN(p)}return!1})(i,e);case 9:return dl(i.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:case 11:return(function(o,c){const f=o.mapValue.fields||{},p=c.mapValue.fields||{};if(sE(f)!==sE(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!zs(f[y],p[y])))return!1;return!0})(i,e);default:return be(52216,{left:i})}}function Ko(i,e){return(i.values||[]).find((n=>zs(n,e)))!==void 0}function ml(i,e){if(i===e)return 0;const n=dr(i),r=dr(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=At(c.integerValue||c.doubleValue),y=At(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(i,e);case 3:return rE(i.timestampValue,e.timestampValue);case 4:return rE(Go(i),Go(e));case 5:return Rm(i.stringValue,e.stringValue);case 6:return(function(c,f){const p=fr(c),y=fr(f);return p.compareTo(y)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),y=f.split("/");for(let _=0;_<p.length&&_<y.length;_++){const T=Be(p[_],y[_]);if(T!==0)return T}return Be(p.length,y.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=Be(At(c.latitude),At(f.latitude));return p!==0?p:Be(At(c.longitude),At(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return aE(i.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},y=f.fields||{},_=p[dh]?.arrayValue,T=y[dh]?.arrayValue,A=Be(_?.values?.length||0,T?.values?.length||0);return A!==0?A:aE(_,T)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Hu.mapValue&&f===Hu.mapValue)return 0;if(c===Hu.mapValue)return 1;if(f===Hu.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),_=f.fields||{},T=Object.keys(_);y.sort(),T.sort();for(let A=0;A<y.length&&A<T.length;++A){const S=Rm(y[A],T[A]);if(S!==0)return S;const P=ml(p[y[A]],_[T[A]]);if(P!==0)return P}return Be(y.length,T.length)})(i.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function rE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Be(i,e);const n=hr(i),r=hr(e),o=Be(n.seconds,r.seconds);return o!==0?o:Be(n.nanos,r.nanos)}function aE(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=ml(n[o],r[o]);if(c)return c}return Be(n.length,r.length)}function pl(i){return Im(i)}function Im(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=hr(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return fr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ve.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Im(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const f of r)c?c=!1:o+=",",o+=`${f}:${Im(n.fields[f])}`;return o+"}"})(i.mapValue):be(61005,{value:i})}function Ju(i){switch(dr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(i);return e?16+Ju(e):16;case 5:return 2*i.stringValue.length;case 6:return fr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Ju(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return yr(r.fields,((c,f)=>{o+=c.length+Ju(f)})),o})(i.mapValue);default:throw be(13486,{value:i})}}function lE(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Nm(i){return!!i&&"integerValue"in i}function lp(i){return!!i&&"arrayValue"in i}function oE(i){return!!i&&"nullValue"in i}function cE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Wu(i){return!!i&&"mapValue"in i}function LI(i){return(i?.mapValue?.fields||{})[hb]?.stringValue===fb}function ko(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return yr(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ko(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ko(i.arrayValue.values[n]);return e}return{...i}}function zI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===kI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ko(n)}setAll(e){let n=Zt.emptyPath(),r={},o=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,o),r={},o=[],n=p.popLast()}f?r[p.lastSegment()]=ko(f):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Wu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){yr(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new yn(ko(this.value))}}function db(i){const e=[];return yr(i.fields,((n,r)=>{const o=new Zt([n]);if(Wu(r)){const c=db(r.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)})),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,r,o,c,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new nn(e,0,Se.min(),Se.min(),Se.min(),yn.empty(),0)}static newFoundDocument(e,n,r,o){return new nn(e,1,n,Se.min(),r,o,0)}static newNoDocument(e,n){return new nn(e,2,n,Se.min(),Se.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Se.min(),Se.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.position=e,this.inclusive=n}}function uE(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],f=i.position[o];if(c.field.isKeyField()?r=ve.comparator(ve.fromName(f.referenceValue),n.key):r=ml(f,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function hE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!zs(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n="asc"){this.field=e,this.dir=n}}function BI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{}class Vt extends mb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HI(e,n,r):n==="array-contains"?new QI(e,r):n==="in"?new KI(e,r):n==="not-in"?new YI(e,r):n==="array-contains-any"?new XI(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FI(e,r):new GI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ml(n,this.value)):n!==null&&dr(this.value)===dr(n)&&this.matchesComparison(ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class os extends mb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new os(e,n)}matches(e){return pb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pb(i){return i.op==="and"}function gb(i){return qI(i)&&pb(i)}function qI(i){for(const e of i.filters)if(e instanceof os)return!1;return!0}function Cm(i){if(i instanceof Vt)return i.field.canonicalString()+i.op.toString()+pl(i.value);if(gb(i))return i.filters.map((e=>Cm(e))).join(",");{const e=i.filters.map((n=>Cm(n))).join(",");return`${i.op}(${e})`}}function yb(i,e){return i instanceof Vt?(function(r,o){return o instanceof Vt&&r.op===o.op&&r.field.isEqual(o.field)&&zs(r.value,o.value)})(i,e):i instanceof os?(function(r,o){return o instanceof os&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,f,p)=>c&&yb(f,o.filters[p])),!0):!1})(i,e):void be(19439)}function _b(i){return i instanceof Vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${pl(n.value)}`})(i):i instanceof os?(function(n){return n.op.toString()+" {"+n.getFilters().map(_b).join(" ,")+"}"})(i):"Filter"}class HI extends Vt{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class FI extends Vt{constructor(e,n){super(e,"in",n),this.keys=vb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class GI extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=vb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function vb(i,e){return(e.arrayValue?.values||[]).map((n=>ve.fromName(n.referenceValue)))}class QI extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lp(n)&&Ko(n.arrayValue,this.value)}}class KI extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ko(this.value.arrayValue,n)}}class YI extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ko(this.value.arrayValue,n)}}class XI extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ko(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n=null,r=[],o=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function fE(i,e=null,n=[],r=[],o=null,c=null,f=null){return new $I(i,e,n,r,o,c,f)}function op(i){const e=Ie(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Cm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>pl(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>pl(r))).join(",")),e.Te=n}return e.Te}function cp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!BI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!yb(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!hE(i.startAt,e.startAt)&&hE(i.endAt,e.endAt)}function xm(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n=null,r=[],o=[],c=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZI(i,e,n,r,o,c,f,p){return new rc(i,e,n,r,o,c,f,p)}function Vh(i){return new rc(i)}function dE(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Eb(i){return i.collectionGroup!==null}function Lo(i){const e=Ie(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Lt(Zt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(p=p.add(_.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ph(c,r))})),n.has(Zt.keyField().canonicalString())||e.Ie.push(new ph(Zt.keyField(),r))}return e.Ie}function Ps(i){const e=Ie(i);return e.Ee||(e.Ee=JI(e,Lo(i))),e.Ee}function JI(i,e){if(i.limitType==="F")return fE(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new ph(o.field,c)}));const n=i.endAt?new mh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new mh(i.startAt.position,i.startAt.inclusive):null;return fE(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Dm(i,e){const n=i.filters.concat([e]);return new rc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Om(i,e,n){return new rc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function jh(i,e){return cp(Ps(i),Ps(e))&&i.limitType===e.limitType}function Tb(i){return`${op(Ps(i))}|lt:${i.limitType}`}function sl(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>_b(o))).join(", ")}]`),Oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>pl(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>pl(o))).join(",")),`Target(${r})`})(Ps(i))}; limitType=${i.limitType})`}function Ph(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):ve.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of Lo(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(f,p,y){const _=uE(f,p,y);return f.inclusive?_<=0:_<0})(r.startAt,Lo(r),o)||r.endAt&&!(function(f,p,y){const _=uE(f,p,y);return f.inclusive?_>=0:_>0})(r.endAt,Lo(r),o))})(i,e)}function WI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function bb(i){return(e,n)=>{let r=!1;for(const o of Lo(i)){const c=eN(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function eN(i,e,n){const r=i.field.isKeyField()?ve.comparator(e.key,n.key):(function(c,f,p){const y=f.data.field(c),_=p.data.field(c);return y!==null&&_!==null?ml(y,_):be(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){yr(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new pt(ve.comparator);function yi(){return tN}const Ab=new pt(ve.comparator);function Mo(...i){let e=Ab;for(const n of i)e=e.insert(n.key,n);return e}function Sb(i){let e=Ab;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function $r(){return zo()}function wb(){return zo()}function zo(){return new ua((i=>i.toString()),((i,e)=>i.isEqual(e)))}const nN=new pt(ve.comparator),sN=new Lt(ve.comparator);function qe(...i){let e=sN;for(const n of i)e=e.add(n);return e}const iN=new Lt(Be);function rN(){return iN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hh(e)?"-0":e}}function Rb(i){return{integerValue:""+i}}function aN(i,e){return MI(e)?Rb(e):up(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function lN(i,e,n){return i instanceof Yo?(function(o,c){const f={fields:{[ob]:{stringValue:lb},[ub]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&ap(c)&&(c=Mh(c)),c&&(f.fields[cb]=c),{mapValue:f}})(n,e):i instanceof Xo?Nb(i,e):i instanceof $o?Cb(i,e):(function(o,c){const f=Ib(o,c),p=mE(f)+mE(o.Ae);return Nm(f)&&Nm(o.Ae)?Rb(p):up(o.serializer,p)})(i,e)}function oN(i,e,n){return i instanceof Xo?Nb(i,e):i instanceof $o?Cb(i,e):n}function Ib(i,e){return i instanceof gh?(function(r){return Nm(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Yo extends Uh{}class Xo extends Uh{constructor(e){super(),this.elements=e}}function Nb(i,e){const n=xb(e);for(const r of i.elements)n.some((o=>zs(o,r)))||n.push(r);return{arrayValue:{values:n}}}class $o extends Uh{constructor(e){super(),this.elements=e}}function Cb(i,e){let n=xb(e);for(const r of i.elements)n=n.filter((o=>!zs(o,r)));return{arrayValue:{values:n}}}class gh extends Uh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function mE(i){return At(i.integerValue||i.doubleValue)}function xb(i){return lp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n){this.field=e,this.transform=n}}function uN(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Xo&&o instanceof Xo||r instanceof $o&&o instanceof $o?dl(r.elements,o.elements,zs):r instanceof gh&&o instanceof gh?zs(r.Ae,o.Ae):r instanceof Yo&&o instanceof Yo})(i.transform,e.transform)}class hN{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class kh{}function Db(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new hp(i.key,Gn.none()):new ac(i.key,i.data,Gn.none());{const n=i.data,r=yn.empty();let o=new Lt(Zt.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?r.delete(c):r.set(c,f),o=o.add(c)}return new _r(i.key,r,new Nn(o.toArray()),Gn.none())}}function fN(i,e,n){i instanceof ac?(function(o,c,f){const p=o.value.clone(),y=gE(o.fieldTransforms,c,f.transformResults);p.setAll(y),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,n):i instanceof _r?(function(o,c,f){if(!eh(o.precondition,c))return void c.convertToUnknownDocument(f.version);const p=gE(o.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(Ob(o)),y.setAll(p),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(i,e,n):(function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Bo(i,e,n,r){return i instanceof ac?(function(c,f,p,y){if(!eh(c.precondition,f))return p;const _=c.value.clone(),T=yE(c.fieldTransforms,y,f);return _.setAll(T),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(i,e,n,r):i instanceof _r?(function(c,f,p,y){if(!eh(c.precondition,f))return p;const _=yE(c.fieldTransforms,y,f),T=f.data;return T.setAll(Ob(c)),T.setAll(_),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((A=>A.field)))})(i,e,n,r):(function(c,f,p){return eh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(i,e,n)}function dN(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=Ib(r.transform,o||null);c!=null&&(n===null&&(n=yn.empty()),n.set(r.field,c))}return n||null}function pE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&dl(r,o,((c,f)=>uN(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ac extends kh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class _r extends kh{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ob(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function gE(i,e,n){const r=new Map;Ze(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],f=c.transform,p=e.data.field(c.field);r.set(c.field,oN(f,p,n[o]))}return r}function yE(i,e,n){const r=new Map;for(const o of i){const c=o.transform,f=n.data.field(o.field);r.set(o.field,lN(c,f,e))}return r}class hp extends kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mN extends kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&fN(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wb();return this.mutations.forEach((o=>{const c=e.get(o.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(o.key)?null:p;const y=Db(f,p);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qe())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,((n,r)=>pE(n,r)))&&dl(this.baseMutations,e.baseMutations,((n,r)=>pE(n,r)))}}class fp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return nN})();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,r[f].version);return new fp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Fe;function _N(i){switch(i){case ee.OK:return be(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function Mb(i){if(i===void 0)return gi("GRPC error has no .code"),ee.UNKNOWN;switch(i){case Mt.OK:return ee.OK;case Mt.CANCELLED:return ee.CANCELLED;case Mt.UNKNOWN:return ee.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return ee.INTERNAL;case Mt.UNAVAILABLE:return ee.UNAVAILABLE;case Mt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Mt.NOT_FOUND:return ee.NOT_FOUND;case Mt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Mt.ABORTED:return ee.ABORTED;case Mt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Mt.DATA_LOSS:return ee.DATA_LOSS;default:return be(39323,{code:i})}}(Fe=Mt||(Mt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new lr([4294967295,4294967295],0);function _E(i){const e=vN().encode(i),n=new YT;return n.update(e),new Uint8Array(n.digest())}function vE(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new lr([n,r],0),new lr([o,c],0)]}class dp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vo(`Invalid padding: ${n}`);if(r<0)throw new Vo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=lr.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(lr.fromNumber(r)));return o.compare(EN)===1&&(o=new lr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_E(e),[r,o]=vE(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,o,c);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new dp(c,o,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=_E(e),[r,o]=vE(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,o,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lh(Se.min(),o,new pt(Be),yi(),qe())}}class lc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lc(r,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class Vb{constructor(e,n){this.targetId=e,this.Ce=n}}class jb{constructor(e,n,r=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class EE{constructor(){this.ve=0,this.Fe=TE(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),n=qe(),r=qe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:be(38017,{changeType:c})}})),new lc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=TE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class TN{constructor(e){this.Ge=e,this.ze=new Map,this.je=yi(),this.Je=Fu(),this.He=Fu(),this.Ye=new pt(Be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(xm(c))if(r===0){const f=new ve(c.path);this.et(n,f,nn.newNoDocument(f,Se.min()))}else Ze(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(n);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let f,p;try{f=fr(r).toUint8Array()}catch(y){if(y instanceof ab)return fl("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new dp(f,o,c)}catch(y){return fl(y instanceof Vo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&xm(p.target)){const y=new ve(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,nn.newNoDocument(y,e))}c.Be&&(n.set(f,c.ke()),c.qe())}}));let r=qe();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const o=new Lh(e,n,this.Ye,this.je,r);return this.je=yi(),this.Je=Fu(),this.He=Fu(),this.Ye=new pt(Be),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new EE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Lt(Be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Lt(Be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new EE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fu(){return new pt(ve.comparator)}function TE(){return new pt(ve.comparator)}const bN={asc:"ASCENDING",desc:"DESCENDING"},AN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SN={and:"AND",or:"OR"};class wN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mm(i,e){return i.useProto3Json||Oh(e)?e:{value:e}}function yh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function RN(i,e){return yh(i,e.toTimestamp())}function Us(i){return Ze(!!i,49232),Se.fromTimestamp((function(n){const r=hr(n);return new ut(r.seconds,r.nanos)})(i))}function mp(i,e){return Vm(i,e).canonicalString()}function Vm(i,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function Ub(i){const e=lt.fromString(i);return Ze(qb(e),10190,{key:e.toString()}),e}function jm(i,e){return mp(i.databaseId,e.path)}function hm(i,e){const n=Ub(e);if(n.get(1)!==i.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ve(Lb(n))}function kb(i,e){return mp(i.databaseId,e)}function IN(i){const e=Ub(i);return e.length===4?lt.emptyPath():Lb(e)}function Pm(i){return new lt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Lb(i){return Ze(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function bE(i,e,n){return{name:jm(i,e),fields:n.value.mapValue.fields}}function NN(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:be(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(_,T){return _.useProto3Json?(Ze(T===void 0||typeof T=="string",58123),Jt.fromBase64String(T||"")):(Ze(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Jt.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(_){const T=_.code===void 0?ee.UNKNOWN:Mb(_.code);return new he(T,_.message||"")})(f);n=new jb(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=hm(i,r.document.name),c=Us(r.document.updateTime),f=r.document.createTime?Us(r.document.createTime):Se.min(),p=new yn({mapValue:{fields:r.document.fields}}),y=nn.newFoundDocument(o,c,f,p),_=r.targetIds||[],T=r.removedTargetIds||[];n=new th(_,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=hm(i,r.document),c=r.readTime?Us(r.readTime):Se.min(),f=nn.newNoDocument(o,c),p=r.removedTargetIds||[];n=new th([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=hm(i,r.document),c=r.removedTargetIds||[];n=new th([],c,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,f=new yN(o,c),p=r.targetId;n=new Vb(p,f)}}return n}function CN(i,e){let n;if(e instanceof ac)n={update:bE(i,e.key,e.value)};else if(e instanceof hp)n={delete:jm(i,e.key)};else if(e instanceof _r)n={update:bE(i,e.key,e.data),updateMask:kN(e.fieldMask)};else{if(!(e instanceof mN))return be(16599,{Vt:e.type});n={verify:jm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,f){const p=f.transform;if(p instanceof Yo)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Xo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof $o)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof gh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw be(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:RN(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:be(27497)})(i,e.precondition)),n}function xN(i,e){return i&&i.length>0?(Ze(e!==void 0,14353),i.map((n=>(function(o,c){let f=o.updateTime?Us(o.updateTime):Us(c);return f.isEqual(Se.min())&&(f=Us(c)),new hN(f,o.transformResults||[])})(n,e)))):[]}function DN(i,e){return{documents:[kb(i,e.path)]}}function ON(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kb(i,o);const c=(function(_){if(_.length!==0)return Bb(os.create(_,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(_){if(_.length!==0)return _.map((T=>(function(S){return{field:il(S.field),direction:jN(S.dir)}})(T)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=Mm(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:o}}function MN(i){let e=IN(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ze(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(A){const S=zb(A);return S instanceof os&&gb(S)?S.getFilters():[S]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((S=>(function(G){return new ph(rl(G.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(S)))})(n.orderBy));let p=null;n.limit&&(p=(function(A){let S;return S=typeof A=="object"?A.value:A,Oh(S)?null:S})(n.limit));let y=null;n.startAt&&(y=(function(A){const S=!!A.before,P=A.values||[];return new mh(P,S)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const S=!A.before,P=A.values||[];return new mh(P,S)})(n.endAt)),ZI(e,o,f,c,p,"F",y,_)}function VN(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zb(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=rl(n.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=rl(n.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=rl(n.unaryFilter.field);return Vt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=rl(n.unaryFilter.field);return Vt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Vt.create(rl(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return os.create(n.compositeFilter.filters.map((r=>zb(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(i):be(30097,{filter:i})}function jN(i){return bN[i]}function PN(i){return AN[i]}function UN(i){return SN[i]}function il(i){return{fieldPath:i.canonicalString()}}function rl(i){return Zt.fromServerFormat(i.fieldPath)}function Bb(i){return i instanceof Vt?(function(n){if(n.op==="=="){if(cE(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NAN"}};if(oE(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cE(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NOT_NAN"}};if(oE(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(n.field),op:PN(n.op),value:n.value}}})(i):i instanceof os?(function(n){const r=n.getFilters().map((o=>Bb(o)));return r.length===1?r[0]:{compositeFilter:{op:UN(n.op),filters:r}}})(i):be(54877,{filter:i})}function kN(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function qb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r,o,c=Se.min(),f=Se.min(),p=Jt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.yt=e}}function zN(i){const e=MN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Om(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.Cn=new qN}addToCollectionParentIndex(e,n){return this.Cn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(ur.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class qN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Lt(lt.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Lt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hb=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(Hb,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gl(0)}static cr(){return new gl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="LruGarbageCollector",HN=1048576;function wE([i,e],[n,r]){const o=Be(i,n);return o===0?Be(e,r):o}class FN{constructor(e){this.Ir=e,this.buffer=new Lt(wE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();wE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(SE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tl(n)?fe(SE,"Ignoring IndexedDB error during garbage collection: ",n):await El(n)}await this.Vr(3e5)}))}}class QN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Dh.ce);const r=new FN(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(AE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,f,p,y,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(r=A,p=Date.now(),this.removeTargets(e,r,n)))).next((A=>(c=A,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((A=>(_=Date.now(),nl()<=ze.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${A} documents in `+(_-y)+`ms
Total Duration: ${_-T}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A}))))}}function KN(i,e){return new QN(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.changes=new ua((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Bo(r.mutation,o,Nn.empty(),ut.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,qe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=qe()){const o=$r();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let f=Mo();return c.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=$r();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,qe())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,o){let c=yi();const f=zo(),p=(function(){return zo()})();return n.forEach(((y,_)=>{const T=r.get(_.key);o.has(_.key)&&(T===void 0||T.mutation instanceof _r)?c=c.insert(_.key,_):T!==void 0?(f.set(_.key,T.mutation.getFieldMask()),Bo(T.mutation,_,T.mutation.getFieldMask(),ut.now())):f.set(_.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((_,T)=>f.set(_,T))),n.forEach(((_,T)=>p.set(_,new XN(T,f.get(_)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=zo();let o=new pt(((f,p)=>f-p)),c=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((y=>{const _=n.get(y);if(_===null)return;let T=r.get(y)||Nn.empty();T=p.applyToLocalView(_,T),r.set(y,T);const A=(o.get(p.batchId)||qe()).add(y);o=o.insert(p.batchId,A)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),_=y.key,T=y.value,A=wb();T.forEach((S=>{if(!c.has(S)){const P=Db(n.get(S),r.get(S));P!==null&&A.set(S,P),c=c.add(S)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,A))}return te.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Eb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):te.resolve($r());let p=Fo,y=c;return f.next((_=>te.forEach(_,((T,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),c.get(T)?te.resolve():this.remoteDocumentCache.getEntry(e,T).next((S=>{y=y.insert(T,S)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,y,_,qe()))).next((T=>({batchId:p,changes:Sb(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((r=>{let o=Mo();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let f=Mo();return this.indexManager.getCollectionParents(e,c).next((p=>te.forEach(p,(y=>{const _=(function(A,S){return new rc(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,r,o).next((T=>{T.forEach(((A,S)=>{f=f.insert(A,S)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((f=>{c.forEach(((y,_)=>{const T=_.getKey();f.get(T)===null&&(f=f.insert(T,nn.newInvalidDocument(T)))}));let p=Mo();return f.forEach(((y,_)=>{const T=c.get(y);T!==void 0&&Bo(T.mutation,_,Nn.empty(),ut.now()),Ph(n,_)&&(p=p.insert(y,_))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return te.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Us(o.createTime)}})(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:zN(o.bundledQuery),readTime:Us(o.readTime)}})(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.overlays=new pt(ve.comparator),this.qr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$r();return te.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),te.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const o=$r(),c=n.length+1,f=new ve(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,_=y.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&y.largestBatchId>r&&o.set(y.getKey(),y)}return te.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new pt(((_,T)=>_-T));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let T=c.get(_.largestBatchId);T===null&&(T=$r(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const p=$r(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,T)=>p.set(_,T))),!(p.size()>=o)););return te.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new gN(n,r));let c=this.qr.get(n);c===void 0&&(c=qe(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this.Qr=new Lt(Ht.$r),this.Ur=new Lt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ht(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Ht(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ve(new lt([])),r=new Ht(n,e),o=new Ht(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new lt([])),r=new Ht(n,e),o=new Ht(n,e+1);let c=qe();return this.Ur.forEachInRange([r,o],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new Ht(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Be(e.Yr,n.Yr)}static Kr(e,n){return Be(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(Ht.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new pN(c,n,r,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new Ht(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return te.resolve(f)}lookupMutationBatch(e,n){return te.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?rp:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ht(n,0),o=new Ht(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(f=>{const p=this.Xr(f.Yr);c.push(p)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(Be);return n.forEach((o=>{const c=new Ht(o,0),f=new Ht(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{r=r.add(p.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;ve.isDocumentKey(c)||(c=c.child(""));const f=new Ht(new ve(c),0);let p=new Lt(Be);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(p=p.add(y.Yr)),!0)}),f),te.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(n.mutations,(o=>{const c=new Ht(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Ht(n,0),o=this.Zr.firstAfterOrEqual(r);return te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.ri=e,this.docs=(function(){return new pt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=yi();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():nn.newInvalidDocument(o))})),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=yi();const f=n.path,p=new ve(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:_,value:{document:T}}=y.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||CI(NI(T),r)<=0||(o.has(T.key)||Ph(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(e,n,r,o){be(9500)}ii(e,n){return te.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new nC(this)}getSize(e){return te.resolve(this.size)}}class nC extends YN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),te.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.persistence=e,this.si=new ua((n=>op(n)),cp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new pp,this.targetCount=0,this.ai=gl.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),te.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new gl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.Pr(n),te.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((f=>{c.push(o.markPotentiallyOrphaned(e,f))})),te.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Dh(0),this.li=!1,this.li=!0,this.hi=new WN,this.referenceDelegate=e(this),this.Pi=new sC(this),this.indexManager=new BN,this.remoteDocumentCache=(function(o){return new tC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new LN(n),this.Ii=new ZN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new eC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe("MemoryPersistence","Starting transaction:",e);const o=new iC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class iC extends DI{constructor(e){super(),this.currentSequenceNumber=e}}class gp{constructor(e){this.persistence=e,this.Ri=new pp,this.Vi=null}static mi(e){return new gp(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const o=ve.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return te.or([()=>te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _h{constructor(e,n){this.persistence=e,this.pi=new ua((r=>VI(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=KN(this,n)}static mi(e,n){return new _h(e,n)}Ei(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return te.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?te.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((p=>{p||(r++,c.removeEntry(f,Se.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ju(e.data.value)),n}br(e,n,r){return te.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return te.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=qe(),o=qe();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new yp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jS()?8:OI(sn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new rC;return this.Ss(e,n,f).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,f,p.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(nl()<=ze.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",sl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(nl()<=ze.DEBUG&&fe("QueryEngine","Query:",sl(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(nl()<=ze.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",sl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(n))):te.resolve())}ys(e,n){if(dE(n))return te.resolve(null);let r=Ps(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Om(n,null,"F"),r=Ps(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const f=qe(...c);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const _=this.Ds(n,p);return this.Cs(n,_,f,y.readTime)?this.ys(e,Om(n,null,"F")):this.vs(e,_,n,y)}))))})))))}ws(e,n,r,o){return dE(n)||o.isEqual(Se.min())?te.resolve(null):this.ps.getDocuments(e,r).next((c=>{const f=this.Ds(n,c);return this.Cs(n,f,r,o)?te.resolve(null):(nl()<=ze.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),sl(n)),this.vs(e,f,n,II(o,Fo)).next((p=>p)))}))}Ds(e,n){let r=new Lt(bb(e));return n.forEach(((o,c)=>{Ph(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return nl()<=ze.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",sl(n)),this.ps.getDocumentsMatchingQuery(e,n,ur.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="LocalStore",lC=3e8;class oC{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new pt(Be),this.xs=new ua((c=>op(c)),cp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $N(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function cC(i,e,n,r){return new oC(i,e,n,r)}async function Gb(i,e){const n=Ie(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const f=[],p=[];let y=qe();for(const _ of o){f.push(_.batchId);for(const T of _.mutations)y=y.add(T.key)}for(const _ of c){p.push(_.batchId);for(const T of _.mutations)y=y.add(T.key)}return n.localDocuments.getDocuments(r,y).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:p})))}))}))}function uC(i,e){const n=Ie(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,_,T){const A=_.batch,S=A.keys();let P=te.resolve();return S.forEach((G=>{P=P.next((()=>T.getEntry(y,G))).next((k=>{const Y=_.docVersions.get(G);Ze(Y!==null,48541),k.version.compareTo(Y)<0&&(A.applyToRemoteDocument(k,_),k.isValidDocument()&&(k.setReadTime(_.commitVersion),T.addEntry(k)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(y,A)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=qe();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(y=y.add(p.batch.mutations[_].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function Qb(i){const e=Ie(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function hC(i,e){const n=Ie(i),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((T,A)=>{const S=o.get(A);if(!S)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,A))));let P=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?P=P.withResumeToken(Jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,r)),o=o.insert(A,P),(function(k,Y,X){return k.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=lC?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(S,P,T)&&p.push(n.Pi.updateTargetData(c,P))}));let y=yi(),_=qe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(fC(c,f,e.documentUpdates).next((T=>{y=T.ks,_=T.qs}))),!r.isEqual(Se.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((A=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(T)}return te.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,_))).next((()=>y))})).then((c=>(n.Ms=o,c)))}function fC(i,e,n){let r=qe(),o=qe();return n.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let f=yi();return n.forEach(((p,y)=>{const _=c.get(p);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(p)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):fe(_p,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",y.version)})),{ks:f,qs:o}}))}function dC(i,e){const n=Ie(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=rp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function mC(i,e){const n=Ie(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,te.resolve(o)):n.Pi.allocateTargetId(r).next((f=>(o=new ir(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Um(i,e,n){const r=Ie(i),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Tl(f))throw f;fe(_p,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function RE(i,e,n){const r=Ie(i);let o=Se.min(),c=qe();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,_,T){const A=Ie(y),S=A.xs.get(T);return S!==void 0?te.resolve(A.Ms.get(S)):A.Pi.getTargetData(_,T)})(r,f,Ps(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,n?o:Se.min(),n?c:qe()))).next((p=>(pC(r,WI(e),p),{documents:p,Qs:c})))))}function pC(i,e,n){let r=i.Os.get(e)||Se.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class IE{constructor(){this.activeTargetIds=rN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gC{constructor(){this.Mo=new IE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new IE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="ConnectivityMonitor";class CE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(NE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(NE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu=null;function km(){return Gu===null?Gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gu++,"0x"+Gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="RestConnection",_C={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===fh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const f=km(),p=this.zo(e,n.toUriEncodedString());fe(fm,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,c);const{host:_}=new URL(p),T=aa(_);return this.Jo(e,p,y,r,T).then((A=>(fe(fm,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw fl(fm,`RPC '${e}' ${f} failed with error: `,A,"url: ",p,"request:",r),A}))}Ho(e,n,r,o,c,f){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=_C[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class TC extends vC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const f=km();return new Promise(((p,y)=>{const _=new XT;_.setWithCredentials(!0),_.listenOnce($T.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Zu.NO_ERROR:const A=_.getResponseJson();fe(en,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),p(A);break;case Zu.TIMEOUT:fe(en,`RPC '${e}' ${f} timed out`),y(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const S=_.getStatus();if(fe(en,`RPC '${e}' ${f} failed with status:`,S,"response text:",_.getResponseText()),S>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const G=P?.error;if(G&&G.status&&G.message){const k=(function(X){const se=X.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(se)>=0?se:ee.UNKNOWN})(G.status);y(new he(k,G.message))}else y(new he(ee.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new he(ee.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{fe(en,`RPC '${e}' ${f} completed.`)}}));const T=JSON.stringify(o);fe(en,`RPC '${e}' ${f} sending request:`,o),_.send(n,"POST",T,r,15)}))}T_(e,n,r){const o=km(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=WT(),p=JT(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const T=c.join("");fe(en,`Creating RPC '${e}' stream ${o}: ${T}`,y);const A=f.createWebChannel(T,y);this.I_(A);let S=!1,P=!1;const G=new EC({Yo:Y=>{P?fe(en,`Not sending because RPC '${e}' stream ${o} is closed:`,Y):(S||(fe(en,`Opening RPC '${e}' stream ${o} transport.`),A.open(),S=!0),fe(en,`RPC '${e}' stream ${o} sending:`,Y),A.send(Y))},Zo:()=>A.close()}),k=(Y,X,se)=>{Y.listen(X,(re=>{try{se(re)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return k(A,Oo.EventType.OPEN,(()=>{P||(fe(en,`RPC '${e}' stream ${o} transport opened.`),G.o_())})),k(A,Oo.EventType.CLOSE,(()=>{P||(P=!0,fe(en,`RPC '${e}' stream ${o} transport closed`),G.a_(),this.E_(A))})),k(A,Oo.EventType.ERROR,(Y=>{P||(P=!0,fl(en,`RPC '${e}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),G.a_(new he(ee.UNAVAILABLE,"The operation could not be completed")))})),k(A,Oo.EventType.MESSAGE,(Y=>{if(!P){const X=Y.data[0];Ze(!!X,16349);const se=X,re=se?.error||se[0]?.error;if(re){fe(en,`RPC '${e}' stream ${o} received error:`,re);const ne=re.status;let ue=(function(R){const C=Mt[R];if(C!==void 0)return Mb(C)})(ne),me=re.message;ue===void 0&&(ue=ee.INTERNAL,me="Unknown error status: "+ne+" with message "+re.message),P=!0,G.a_(new he(ue,me)),A.close()}else fe(en,`RPC '${e}' stream ${o} received:`,X),G.u_(X)}})),k(p,ZT.STAT_EVENT,(Y=>{Y.stat===wm.PROXY?fe(en,`RPC '${e}' stream ${o} detected buffering proxy`):Y.stat===wm.NOPROXY&&fe(en,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function dm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(i){return new wN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="PersistentStream";class Yb{constructor(e,n,r,o,c,f,p,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(gi(n.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(xE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(fe(xE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bC extends Yb{constructor(e,n,r,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NN(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Se.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Se.min():f.readTime?Us(f.readTime):Se.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Pm(this.serializer),n.addTarget=(function(c,f){let p;const y=f.target;if(p=xm(y)?{documents:DN(c,y)}:{query:ON(c,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=Pb(c,f.resumeToken);const _=Mm(c,f.expectedCount);_!==null&&(p.expectedCount=_)}else if(f.snapshotVersion.compareTo(Se.min())>0){p.readTime=yh(c,f.snapshotVersion.toTimestamp());const _=Mm(c,f.expectedCount);_!==null&&(p.expectedCount=_)}return p})(this.serializer,e);const r=VN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Pm(this.serializer),n.removeTarget=e,this.q_(n)}}class AC extends Yb{constructor(e,n,r,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xN(e.writeResults,e.commitTime),r=Us(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Pm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>CN(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{}class wC extends SC{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,Vm(n,r),o,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ee.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Vm(n,r),o,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class RC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gi(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="RemoteStore";class IC{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ha(this)&&(fe(ra,"Restarting streams for network reachability change."),await(async function(y){const _=Ie(y);_.Ea.add(4),await oc(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Bh(_)})(this))}))})),this.Ra=new RC(r,o)}}async function Bh(i){if(ha(i))for(const e of i.da)await e(!0)}async function oc(i){for(const e of i.da)await e(!1)}function Xb(i,e){const n=Ie(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bp(n)?Tp(n):bl(n).O_()&&Ep(n,e))}function vp(i,e){const n=Ie(i),r=bl(n);n.Ia.delete(e),r.O_()&&$b(n,e),n.Ia.size===0&&(r.O_()?r.L_():ha(n)&&n.Ra.set("Unknown"))}function Ep(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bl(i).Y_(e)}function $b(i,e){i.Va.Ue(e),bl(i).Z_(e)}function Tp(i){i.Va=new TN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),bl(i).start(),i.Ra.ua()}function bp(i){return ha(i)&&!bl(i).x_()&&i.Ia.size>0}function ha(i){return Ie(i).Ea.size===0}function Zb(i){i.Va=void 0}async function NC(i){i.Ra.set("Online")}async function CC(i){i.Ia.forEach(((e,n)=>{Ep(i,e)}))}async function xC(i,e){Zb(i),bp(i)?(i.Ra.ha(e),Tp(i)):i.Ra.set("Unknown")}async function DC(i,e,n){if(i.Ra.set("Online"),e instanceof jb&&e.state===2&&e.cause)try{await(async function(o,c){const f=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){fe(ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vh(i,r)}else if(e instanceof th?i.Va.Ze(e):e instanceof Vb?i.Va.st(e):i.Va.tt(e),!n.isEqual(Se.min()))try{const r=await Qb(i.localStore);n.compareTo(r)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const T=c.Ia.get(_);T&&c.Ia.set(_,T.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,_)=>{const T=c.Ia.get(y);if(!T)return;c.Ia.set(y,T.withResumeToken(Jt.EMPTY_BYTE_STRING,T.snapshotVersion)),$b(c,y);const A=new ir(T.target,y,_,T.sequenceNumber);Ep(c,A)})),c.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(r){fe(ra,"Failed to raise snapshot:",r),await vh(i,r)}}async function vh(i,e,n){if(!Tl(e))throw e;i.Ea.add(1),await oc(i),i.Ra.set("Offline"),n||(n=()=>Qb(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{fe(ra,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Bh(i)}))}function Jb(i,e){return e().catch((n=>vh(i,n,e)))}async function qh(i){const e=Ie(i),n=mr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rp;for(;OC(e);)try{const o=await dC(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,MC(e,o)}catch(o){await vh(e,o)}Wb(e)&&e0(e)}function OC(i){return ha(i)&&i.Ta.length<10}function MC(i,e){i.Ta.push(e);const n=mr(i);n.O_()&&n.X_&&n.ea(e.mutations)}function Wb(i){return ha(i)&&!mr(i).x_()&&i.Ta.length>0}function e0(i){mr(i).start()}async function VC(i){mr(i).ra()}async function jC(i){const e=mr(i);for(const n of i.Ta)e.ea(n.mutations)}async function PC(i,e,n){const r=i.Ta.shift(),o=fp.from(r,e,n);await Jb(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await qh(i)}async function UC(i,e){e&&mr(i).X_&&await(async function(r,o){if((function(f){return _N(f)&&f!==ee.ABORTED})(o.code)){const c=r.Ta.shift();mr(r).B_(),await Jb(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await qh(r)}})(i,e),Wb(i)&&e0(i)}async function DE(i,e){const n=Ie(i);n.asyncQueue.verifyOperationInProgress(),fe(ra,"RemoteStore received new credentials");const r=ha(n);n.Ea.add(3),await oc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function kC(i,e){const n=Ie(i);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await oc(n),n.Ra.set("Unknown"))}function bl(i){return i.ma||(i.ma=(function(n,r,o){const c=Ie(n);return c.sa(),new bC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:NC.bind(null,i),t_:CC.bind(null,i),r_:xC.bind(null,i),H_:DC.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),bp(i)?Tp(i):i.Ra.set("Unknown")):(await i.ma.stop(),Zb(i))}))),i.ma}function mr(i){return i.fa||(i.fa=(function(n,r,o){const c=Ie(n);return c.sa(),new AC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:VC.bind(null,i),r_:UC.bind(null,i),ta:jC.bind(null,i),na:PC.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await qh(i)):(await i.fa.stop(),i.Ta.length>0&&(fe(ra,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const f=Date.now()+r,p=new Ap(e,n,f,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sp(i,e){if(gi("AsyncQueue",`${e}: ${i}`),Tl(i))return new he(ee.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{static emptySet(e){return new ul(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=Mo(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.ga=new pt(ve.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class yl{constructor(e,n,r,o,c,f,p,y,_){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,n,r,o,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new yl(e,n,ul.emptySet(n),f,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zC{constructor(){this.queries=ME(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ie(n),c=o.queries;o.queries=ME(),c.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function ME(){return new ua((i=>Tb(i)),jh)}async function wp(i,e){const n=Ie(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new LC,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=Sp(f,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Ip(n)}async function Rp(i,e){const n=Ie(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BC(i,e){const n=Ie(i);let r=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const p of f.Sa)p.Fa(o)&&(r=!0);f.wa=o}}r&&Ip(n)}function qC(i,e,n){const r=Ie(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function Ip(i){i.Ca.forEach((e=>{e.next()}))}var Lm,VE;(VE=Lm||(Lm={})).Ma="default",VE.Cache="cache";class Np{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new yl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.key=e}}class n0{constructor(e){this.key=e}}class HC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=bb(e),this.tu=new ul(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new OE,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const S=o.get(T),P=Ph(this.query,A)?A:null,G=!!S&&this.mutatedKeys.has(S.key),k=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let Y=!1;S&&P?S.data.isEqual(P.data)?G!==k&&(r.track({type:3,doc:P}),Y=!0):this.su(S,P)||(r.track({type:2,doc:P}),Y=!0,(y&&this.eu(P,y)>0||_&&this.eu(P,_)<0)&&(p=!0)):!S&&P?(r.track({type:0,doc:P}),Y=!0):S&&!P&&(r.track({type:1,doc:S}),Y=!0,(y||_)&&(p=!0)),Y&&(P?(f=f.add(P),c=k?c.add(T):c.delete(T)):(f=f.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((T,A)=>(function(P,G){const k=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:Y})}};return k(P)-k(G)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,_=y!==this.Za;return this.Za=y,f.length!==0||_?{snapshot:new yl(this.query,e.tu,c,f,e.mutatedKeys,y===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new OE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new n0(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new t0(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cp="SyncEngine";class FC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GC{constructor(e){this.key=e,this.hu=!1}}class QC{constructor(e,n,r,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ua((p=>Tb(p)),jh),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ve.comparator),this.Au=new Map,this.Ru=new pp,this.Vu={},this.mu=new Map,this.fu=gl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KC(i,e,n=!0){const r=o0(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await s0(r,e,n,!0),o}async function YC(i,e){const n=o0(i);await s0(n,e,!0,!1)}async function s0(i,e,n,r){const o=await mC(i.localStore,Ps(e)),c=o.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await XC(i,e,c,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&Xb(i.remoteStore,o),p}async function XC(i,e,n,r,o){i.pu=(A,S,P)=>(async function(k,Y,X,se){let re=Y.view.ru(X);re.Cs&&(re=await RE(k.localStore,Y.query,!1).then((({documents:I})=>Y.view.ru(I,re))));const ne=se&&se.targetChanges.get(Y.targetId),ue=se&&se.targetMismatches.get(Y.targetId)!=null,me=Y.view.applyChanges(re,k.isPrimaryClient,ne,ue);return PE(k,Y.targetId,me.au),me.snapshot})(i,A,S,P);const c=await RE(i.localStore,e,!0),f=new HC(e,c.Qs),p=f.ru(c.documents),y=lc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),_=f.applyChanges(p,i.isPrimaryClient,y);PE(i,n,_.au);const T=new FC(e,n,f);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),_.snapshot}async function $C(i,e,n){const r=Ie(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((f=>!jh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Um(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&vp(r.remoteStore,o.targetId),zm(r,o.targetId)})).catch(El)):(zm(r,o.targetId),await Um(r.localStore,o.targetId,!0))}async function ZC(i,e){const n=Ie(i),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vp(n.remoteStore,r.targetId))}async function JC(i,e,n){const r=rx(i);try{const o=await(function(f,p){const y=Ie(f),_=ut.now(),T=p.reduce(((P,G)=>P.add(G.key)),qe());let A,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let G=yi(),k=qe();return y.Ns.getEntries(P,T).next((Y=>{G=Y,G.forEach(((X,se)=>{se.isValidDocument()||(k=k.add(X))}))})).next((()=>y.localDocuments.getOverlayedDocuments(P,G))).next((Y=>{A=Y;const X=[];for(const se of p){const re=dN(se,A.get(se.key).overlayedDocument);re!=null&&X.push(new _r(se.key,re,db(re.value.mapValue),Gn.exists(!0)))}return y.mutationQueue.addMutationBatch(P,_,X,p)})).next((Y=>{S=Y;const X=Y.applyToLocalDocumentSet(A,k);return y.documentOverlayCache.saveOverlays(P,Y.batchId,X)}))})).then((()=>({batchId:S.batchId,changes:Sb(A)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,p,y){let _=f.Vu[f.currentUser.toKey()];_||(_=new pt(Be)),_=_.insert(p,y),f.Vu[f.currentUser.toKey()]=_})(r,o.batchId,n),await cc(r,o.changes),await qh(r.remoteStore)}catch(o){const c=Sp(o,"Failed to persist write");n.reject(c)}}async function i0(i,e){const n=Ie(i);try{const r=await hC(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const f=n.Au.get(c);f&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ze(f.hu,14607):o.removedDocuments.size>0&&(Ze(f.hu,42227),f.hu=!1))})),await cc(n,r,e)}catch(r){await El(r)}}function jE(i,e,n){const r=Ie(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const y=Ie(f);y.onlineState=p;let _=!1;y.queries.forEach(((T,A)=>{for(const S of A.Sa)S.va(p)&&(_=!0)})),_&&Ip(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WC(i,e,n){const r=Ie(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let f=new pt(ve.comparator);f=f.insert(c,nn.newNoDocument(c,Se.min()));const p=qe().add(c),y=new Lh(Se.min(),new Map,new pt(Be),f,p);await i0(r,y),r.du=r.du.remove(c),r.Au.delete(e),xp(r)}else await Um(r.localStore,e,!1).then((()=>zm(r,e,n))).catch(El)}async function ex(i,e){const n=Ie(i),r=e.batch.batchId;try{const o=await uC(n.localStore,e);a0(n,r,null),r0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cc(n,o)}catch(o){await El(o)}}async function tx(i,e,n){const r=Ie(i);try{const o=await(function(f,p){const y=Ie(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return y.mutationQueue.lookupMutationBatch(_,p).next((A=>(Ze(A!==null,37113),T=A.keys(),y.mutationQueue.removeMutationBatch(_,A)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>y.localDocuments.getDocuments(_,T)))}))})(r.localStore,e);a0(r,e,n),r0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cc(r,o)}catch(o){await El(o)}}function r0(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function a0(i,e,n){const r=Ie(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function zm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||l0(i,r)}))}function l0(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(vp(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),xp(i))}function PE(i,e,n){for(const r of n)r instanceof t0?(i.Ru.addReference(r.key,e),nx(i,r)):r instanceof n0?(fe(Cp,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||l0(i,r.key)):be(19791,{wu:r})}function nx(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(fe(Cp,"New document in limbo: "+n),i.Eu.add(r),xp(i))}function xp(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ve(lt.fromString(e)),r=i.fu.next();i.Au.set(r,new GC(n)),i.du=i.du.insert(n,r),Xb(i.remoteStore,new ir(Ps(Vh(n.path)),r,"TargetPurposeLimboResolution",Dh.ce))}}async function cc(i,e,n){const r=Ie(i),o=[],c=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,n).then((_=>{if((_||n)&&r.isPrimaryClient){const T=_?!_.fromCache:n?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(_){o.push(_);const T=yp.As(y.targetId,_);c.push(T)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(y,_){const T=Ie(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>te.forEach(_,(S=>te.forEach(S.Es,(P=>T.persistence.referenceDelegate.addReference(A,S.targetId,P))).next((()=>te.forEach(S.ds,(P=>T.persistence.referenceDelegate.removeReference(A,S.targetId,P)))))))))}catch(A){if(!Tl(A))throw A;fe(_p,"Failed to update sequence numbers: "+A)}for(const A of _){const S=A.targetId;if(!A.fromCache){const P=T.Ms.get(S),G=P.snapshotVersion,k=P.withLastLimboFreeSnapshotVersion(G);T.Ms=T.Ms.insert(S,k)}}})(r.localStore,c))}async function sx(i,e){const n=Ie(i);if(!n.currentUser.isEqual(e)){fe(Cp,"User change. New user:",e.toKey());const r=await Gb(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new he(ee.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cc(n,r.Ls)}}function ix(i,e){const n=Ie(i),r=n.Au.get(e);if(r&&r.hu)return qe().add(r.key);{let o=qe();const c=n.Iu.get(e);if(!c)return o;for(const f of c){const p=n.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function o0(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=i0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ix.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WC.bind(null,e),e.Pu.H_=BC.bind(null,e.eventManager),e.Pu.yu=qC.bind(null,e.eventManager),e}function rx(i){const e=Ie(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ex.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tx.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return cC(this.persistence,new aC,e.initialUser,this.serializer)}Cu(e){return new Fb(gp.mi,this.serializer)}Du(e){return new gC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class ax extends Eh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof _h,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new GN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new Fb((r=>_h.mi(r,n)),this.serializer)}}class Bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sx.bind(null,this.syncEngine),await kC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zC})()}createDatastore(e){const n=zh(e.databaseInfo.databaseId),r=(function(c){return new TC(c)})(e.databaseInfo);return(function(c,f,p,y){return new wC(c,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,f,p){return new IC(r,o,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>jE(this.syncEngine,n,0)),(function(){return CE.v()?new CE:new yC})())}createSyncEngine(e,n){return(function(o,c,f,p,y,_,T){const A=new QC(o,c,f,p,y,_);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ie(n);fe(ra,"RemoteStore shutting down."),r.Ea.add(5),await oc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bm.provider={build:()=>new Bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="FirestoreClient";class lx{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=tn.UNAUTHENTICATED,this.clientId=ip.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async f=>{fe(pr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(fe(pr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function mm(i,e){i.asyncQueue.verifyOperationInProgress(),fe(pr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await Gb(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function UE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await ox(i);fe(pr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>DE(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>DE(e.remoteStore,o))),i._onlineComponents=e}async function ox(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){fe(pr,"Using user provided OfflineComponentProvider");try{await mm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await mm(i,new Eh)}}else fe(pr,"Using default OfflineComponentProvider"),await mm(i,new ax(void 0));return i._offlineComponents}async function c0(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(fe(pr,"Using user provided OnlineComponentProvider"),await UE(i,i._uninitializedComponentsProvider._online)):(fe(pr,"Using default OnlineComponentProvider"),await UE(i,new Bm))),i._onlineComponents}function cx(i){return c0(i).then((e=>e.syncEngine))}async function Th(i){const e=await c0(i),n=e.eventManager;return n.onListen=KC.bind(null,e.syncEngine),n.onUnlisten=$C.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZC.bind(null,e.syncEngine),n}function ux(i,e,n={}){const r=new fi;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,_){const T=new Dp({next:S=>{T.Nu(),f.enqueueAndForget((()=>Rp(c,A)));const P=S.docs.has(p);!P&&S.fromCache?_.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&y&&y.source==="server"?_.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new Np(Vh(p.path),T,{includeMetadataChanges:!0,qa:!0});return wp(c,A)})(await Th(i),i.asyncQueue,e,n,r))),r.promise}function hx(i,e,n={}){const r=new fi;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,_){const T=new Dp({next:S=>{T.Nu(),f.enqueueAndForget((()=>Rp(c,A))),S.fromCache&&y.source==="server"?_.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),A=new Np(p,T,{includeMetadataChanges:!0,qa:!0});return wp(c,A)})(await Th(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="firestore.googleapis.com",LE=!0;class zE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h0,this.ssl=LE}else this.host=e.host,this.ssl=e.ssl??LE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Hb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HN)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u0(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new gI;switch(r.type){case"firstParty":return new EI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=kE.get(n);r&&(fe("ComponentProvider","Removing Datastore"),kE.delete(n),r.terminate())})(this),Promise.resolve()}}function fx(i,e,n,r={}){i=_n(i,Hh);const o=aa(e),c=i._getSettings(),f={...c,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;o&&(Fm(`https://${p}`),Gm("Firestore",!0)),c.host!==h0&&c.host!==p&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:o,emulatorOptions:r};if(!ea(y,f)&&(i._setSettings(y),r.mockUserToken)){let _,T;if(typeof r.mockUserToken=="string")_=r.mockUserToken,T=tn.MOCK_USER;else{_=rT(r.mockUserToken,i._app?.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new tn(A)}i._authCredentials=new yI(new tb(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fa(this.firestore,e,this._query)}}class _t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ic(n,_t._jsonSchema))return new _t(e,r||null,new ve(lt.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Pt("string",_t._jsonSchemaVersion),referencePath:Pt("string")};class or extends fa{constructor(e,n,r){super(e,n,Vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new ve(e))}withConverter(e){return new or(this.firestore,e,this._path)}}function Pe(i,e,...n){if(i=mt(i),nb("collection","path",e),i instanceof Hh){const r=lt.fromString(e,...n);return Wv(r),new or(i,null,r)}{if(!(i instanceof _t||i instanceof or))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(lt.fromString(e,...n));return Wv(r),new or(i.firestore,null,r)}}function di(i,e,...n){if(i=mt(i),arguments.length===1&&(e=ip.newId()),nb("doc","path",e),i instanceof Hh){const r=lt.fromString(e,...n);return Jv(r),new _t(i,null,new ve(r))}{if(!(i instanceof _t||i instanceof or))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(lt.fromString(e,...n));return Jv(r),new _t(i.firestore,i instanceof or?i.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="AsyncQueue";class qE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kb(this,"async_queue_retry"),this._c=()=>{const r=dm();r&&fe(BE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=dm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new fi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Tl(e))throw e;fe(BE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,gi("INTERNAL UNHANDLED ERROR: ",HE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Ap.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:HE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function HE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(i){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class _i extends Hh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new qE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qE(e),this._firestoreClient=void 0,await e}}}function dx(i,e){const n=typeof i=="object"?i:Ym(),r=typeof i=="string"?i:fh,o=Rh(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=nT("firestore");c&&fx(o,...c)}return o}function Fh(i){if(i._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||mx(i),i._firestoreClient}function mx(i){const e=i._freezeSettings(),n=(function(o,c,f,p){return new UI(o,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,u0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new lx(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Jt.fromBase64String(e))}catch(n){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hn(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ic(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Pt("string",Hn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ks._jsonSchemaVersion}}static fromJSON(e){if(ic(e,ks._jsonSchema))return new ks(e.latitude,e.longitude)}}ks._jsonSchemaVersion="firestore/geoPoint/1.0",ks._jsonSchema={type:Pt("string",ks._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ls._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ic(e,Ls._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ls(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ls._jsonSchemaVersion="firestore/vectorValue/1.0",Ls._jsonSchema={type:Pt("string",Ls._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=/^__.*__$/;class gx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,n,this.fieldTransforms):new ac(e,this.data,n,this.fieldTransforms)}}class f0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function d0(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:i})}}class Op{constructor(e,n,r,o,c,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Op({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(d0(this.Ac)&&px.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zh(e)}Cc(e,n,r,o=!1){return new Op({Ac:e,methodName:n,Dc:r,path:Zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kh(i){const e=i._freezeSettings(),n=zh(i._databaseId);return new yx(i._databaseId,!!e.ignoreUndefinedProperties,n)}function m0(i,e,n,r,o,c={}){const f=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Vp("Data must be an object, but it was:",f,r);const p=p0(r,f);let y,_;if(c.merge)y=new Nn(f.fieldMask),_=f.fieldTransforms;else if(c.mergeFields){const T=[];for(const A of c.mergeFields){const S=qm(e,A,n);if(!f.contains(S))throw new he(ee.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);y0(T,S)||T.push(S)}y=new Nn(T),_=f.fieldTransforms.filter((A=>y.covers(A.field)))}else y=null,_=f.fieldTransforms;return new gx(new yn(p),y,_)}class Yh extends Qh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yh}}class Mp extends Qh{_toFieldTransform(e){return new cN(e.path,new Yo)}isEqual(e){return e instanceof Mp}}function _x(i,e,n,r){const o=i.Cc(1,e,n);Vp("Data must be an object, but it was:",o,r);const c=[],f=yn.empty();yr(r,((y,_)=>{const T=jp(e,y,n);_=mt(_);const A=o.yc(T);if(_ instanceof Yh)c.push(T);else{const S=uc(_,A);S!=null&&(c.push(T),f.set(T,S))}}));const p=new Nn(c);return new f0(f,p,o.fieldTransforms)}function vx(i,e,n,r,o,c){const f=i.Cc(1,e,n),p=[qm(e,r,n)],y=[o];if(c.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)p.push(qm(e,c[S])),y.push(c[S+1]);const _=[],T=yn.empty();for(let S=p.length-1;S>=0;--S)if(!y0(_,p[S])){const P=p[S];let G=y[S];G=mt(G);const k=f.yc(P);if(G instanceof Yh)_.push(P);else{const Y=uc(G,k);Y!=null&&(_.push(P),T.set(P,Y))}}const A=new Nn(_);return new f0(T,A,f.fieldTransforms)}function Ex(i,e,n,r=!1){return uc(n,i.Cc(r?4:3,e))}function uc(i,e){if(g0(i=mt(i)))return Vp("Unsupported field value:",e,i),p0(i,e);if(i instanceof Qh)return(function(r,o){if(!d0(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let f=0;for(const p of r){let y=uc(p,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=ut.fromDate(r);return{timestampValue:yh(o.serializer,c)}}if(r instanceof ut){const c=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yh(o.serializer,c)}}if(r instanceof ks)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hn)return{bytesValue:Pb(o.serializer,r._byteString)};if(r instanceof _t){const c=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:mp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ls)return(function(f,p){return{mapValue:{fields:{[hb]:{stringValue:fb},[dh]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw p.Sc("VectorValues must only contain numeric values.");return up(p.serializer,_)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${xh(r)}`)})(i,e)}function p0(i,e){const n={};return rb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yr(i,((r,o)=>{const c=uc(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function g0(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ut||i instanceof ks||i instanceof Hn||i instanceof _t||i instanceof Qh||i instanceof Ls)}function Vp(i,e,n){if(!g0(n)||!sb(n)){const r=xh(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function qm(i,e,n){if((e=mt(e))instanceof Gh)return e._internalPath;if(typeof e=="string")return jp(i,e);throw bh("Field path arguments must be of type string or ",i,!1,void 0,n)}const Tx=new RegExp("[~\\*/\\[\\]]");function jp(i,e,n){if(e.search(Tx)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Gh(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function bh(i,e,n,r,o){const c=r&&!r.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new he(ee.INVALID_ARGUMENT,p+i+y)}function y0(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bx extends _0{data(){return super.data()}}function Pp(i,e){return typeof e=="string"?jp(i,e):e instanceof Gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Up{}class Ax extends Up{}function $e(i,e,...n){let r=[];e instanceof Up&&r.push(e),r=r.concat(n),(function(c){const f=c.filter((y=>y instanceof kp)).length,p=c.filter((y=>y instanceof Xh)).length;if(f>1||f>0&&p>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Xh extends Ax{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xh(e,n,r)}_apply(e){const n=this._parse(e);return E0(e._query,n),new fa(e.firestore,e.converter,Dm(e._query,n))}_parse(e){const n=Kh(e.firestore);return(function(c,f,p,y,_,T,A){let S;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){QE(A,T);const G=[];for(const k of A)G.push(GE(y,c,k));S={arrayValue:{values:G}}}else S=GE(y,c,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||QE(A,T),S=Ex(p,f,A,T==="in"||T==="not-in");return Vt.create(_,T,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ht(i,e,n){const r=e,o=Pp("where",i);return Xh._create(o,r,n)}class kp extends Up{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kp(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:os.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let f=o;const p=c.getFlattenedFilters();for(const y of p)E0(f,y),f=Dm(f,y)})(e._query,n),new fa(e.firestore,e.converter,Dm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function GE(i,e,n){if(typeof(n=mt(n))=="string"){if(n==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eb(e)&&n.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(lt.fromString(n));if(!ve.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lE(i,new ve(r))}if(n instanceof _t)return lE(i,n._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(n)}.`)}function QE(i,e){if(!Array.isArray(i)||i.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E0(i,e){const n=(function(o,c){for(const f of o)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sx{convertValue(e,n="none"){switch(dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yr(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[dh].arrayValue?.values?.map((r=>At(r.doubleValue)));return new Ls(n)}convertGeoPoint(e){return new ks(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Go(e));default:return null}}convertTimestamp(e){const n=hr(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=lt.fromString(e);Ze(qb(r),9688,{name:e});const o=new Qo(r.get(1),r.get(3)),c=new ve(r.popFirst(5));return o.isEqual(n)||gi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(i,e,n){let r;return r=i?i.toFirestore(e):e,r}class jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zr extends _0{constructor(e,n,r,o,c,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zr._jsonSchema={type:Pt("string",Zr._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class nh extends Zr{data(e={}){return super.data(e)}}class Jr{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new jo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new nh(this._firestore,this._userDataWriter,r.key,r,new jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const y=new nh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new jo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new nh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new jo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,T=-1;return p.type!==0&&(_=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:wx(p.type),doc:y,oldIndex:_,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ip.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wx(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(i){i=_n(i,_t);const e=_n(i.firestore,_i);return ux(Fh(e),i._key).then((n=>b0(e,i,n)))}Jr._jsonSchemaVersion="firestore/querySnapshot/1.0",Jr._jsonSchema={type:Pt("string",Jr._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Lp extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function jt(i){i=_n(i,fa);const e=_n(i.firestore,_i),n=Fh(e),r=new Lp(e);return v0(i._query),hx(n,i._query).then((o=>new Jr(e,r,i,o)))}function Ix(i,e,n){i=_n(i,_t);const r=_n(i.firestore,_i),o=T0(i.converter,e);return $h(r,[m0(Kh(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Gn.none())])}function Wr(i,e,n,...r){i=_n(i,_t);const o=_n(i.firestore,_i),c=Kh(o);let f;return f=typeof(e=mt(e))=="string"||e instanceof Gh?vx(c,"updateDoc",i._key,e,n,r):_x(c,"updateDoc",i._key,e),$h(o,[f.toMutation(i._key,Gn.exists(!0))])}function Nx(i){return $h(_n(i.firestore,_i),[new hp(i._key,Gn.none())])}function _l(i,e){const n=_n(i.firestore,_i),r=di(i),o=T0(i.converter,e);return $h(n,[m0(Kh(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Gn.exists(!1))]).then((()=>r))}function Bs(i,...e){i=mt(i);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||FE(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(FE(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,f,p;if(i instanceof _t)f=_n(i.firestore,_i),p=Vh(i._key.path),c={next:y=>{e[r]&&e[r](b0(f,i,y))},error:e[r+1],complete:e[r+2]};else{const y=_n(i,fa);f=_n(y.firestore,_i),p=y._query;const _=new Lp(f);c={next:T=>{e[r]&&e[r](new Jr(f,_,y,T))},error:e[r+1],complete:e[r+2]},v0(i._query)}return(function(_,T,A,S){const P=new Dp(S),G=new Np(T,P,A);return _.asyncQueue.enqueueAndForget((async()=>wp(await Th(_),G))),()=>{P.Nu(),_.asyncQueue.enqueueAndForget((async()=>Rp(await Th(_),G)))}})(Fh(f),p,o,c)}function $h(i,e){return(function(r,o){const c=new fi;return r.asyncQueue.enqueueAndForget((async()=>JC(await cx(r),o,c))),c.promise})(Fh(i),e)}function b0(i,e,n){const r=n.docs.get(e._key),o=new Lp(i);return new Zr(i,o,e._key,r,new jo(n.hasPendingWrites,n.fromCache),e.converter)}function Fn(){return new Mp("serverTimestamp")}(function(e,n=!0){(function(o){vl=o})(la),ta(new cr("firestore",((r,{instanceIdentifier:o,options:c})=>{const f=r.getProvider("app").getImmediate(),p=new _i(new _I(r.getProvider("auth-internal")),new TI(f,r.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(_.options.projectId,T)})(f,o),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Os(Yv,Xv,e),Os(Yv,Xv,"esm2020")})();var Cx="firebase",xx="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(Cx,xx,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="firebasestorage.googleapis.com",Dx="storageBucket",Ox=120*1e3,Mx=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Hs{constructor(e,n,r=0){super(pm(e),`Firebase Storage: ${n} (${pm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qs;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qs||(qs={}));function pm(i){return"storage/"+i}function Vx(){const i="An unknown error occurred, please check the error payload for server response.";return new Fs(qs.UNKNOWN,i)}function jx(){return new Fs(qs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Px(){return new Fs(qs.CANCELED,"User canceled the upload/download.")}function Ux(i){return new Fs(qs.INVALID_URL,"Invalid URL '"+i+"'.")}function kx(i){return new Fs(qs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function KE(i){return new Fs(qs.INVALID_ARGUMENT,i)}function S0(){return new Fs(qs.APP_DELETED,"The Firebase app was deleted.")}function Lx(i){return new Fs(qs.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=as.makeFromUrl(e,n)}catch{return new as(e,"")}if(r.path==="")return r;throw kx(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const f="(/(.*))?$",p=new RegExp("^gs://"+o+f,"i"),y={bucket:1,path:3};function _(ne){ne.path_=decodeURIComponent(ne.path)}const T="v[A-Za-z0-9_]+",A=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",P=new RegExp(`^https?://${A}/${T}/b/${o}/o${S}`,"i"),G={bucket:1,path:3},k=n===A0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,Y="([^?#]*)",X=new RegExp(`^https?://${k}/${o}/${Y}`,"i"),re=[{regex:p,indices:y,postModify:c},{regex:P,indices:G,postModify:_},{regex:X,indices:{bucket:1,path:2},postModify:_}];for(let ne=0;ne<re.length;ne++){const ue=re[ne],me=ue.regex.exec(e);if(me){const I=me[ue.indices.bucket];let R=me[ue.indices.path];R||(R=""),r=new as(I,R),ue.postModify(r);break}}if(r==null)throw Ux(e);return r}}class zx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(i,e,n){let r=1,o=null,c=null,f=!1,p=0;function y(){return p===2}let _=!1;function T(...Y){_||(_=!0,e.apply(null,Y))}function A(Y){o=setTimeout(()=>{o=null,i(P,y())},Y)}function S(){c&&clearTimeout(c)}function P(Y,...X){if(_){S();return}if(Y){S(),T.call(null,Y,...X);return}if(y()||f){S(),T.call(null,Y,...X);return}r<64&&(r*=2);let re;p===1?(p=2,re=0):re=(r+Math.random())*1e3,A(re)}let G=!1;function k(Y){G||(G=!0,S(),!_&&(o!==null?(Y||(p=2),clearTimeout(o),A(0)):Y||(p=1)))}return A(0),c=setTimeout(()=>{f=!0,k(!0)},n),k}function qx(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(i){return i!==void 0}function YE(i,e,n,r){if(r<e)throw KE(`Invalid value for '${i}'. Expected ${e} or greater.`);if(r>n)throw KE(`Invalid value for '${i}'. Expected ${n} or less.`)}function Fx(i){const e=encodeURIComponent;let n="?";for(const r in i)if(i.hasOwnProperty(r)){const o=e(r)+"="+e(i[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var Ah;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Ah||(Ah={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n,r,o,c,f,p,y,_,T,A,S=!0,P=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=p,this.errorCallback_=y,this.timeout_=_,this.progressCallback_=T,this.connectionFactory_=A,this.retry=S,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,k)=>{this.resolve_=G,this.reject_=k,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Qu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=p=>{const y=p.loaded,_=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,_)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const p=c.getErrorCode()===Ah.NO_ERROR,y=c.getStatus();if(!p||Gx(y,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===Ah.ABORT;r(!1,new Qu(!1,null,T));return}const _=this.successCodes_.indexOf(y)!==-1;r(!0,new Qu(_,c))})},n=(r,o)=>{const c=this.resolve_,f=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());Hx(y)?c(y):c()}catch(y){f(y)}else if(p!==null){const y=Vx();y.serverResponse=p.getErrorText(),this.errorCallback_?f(this.errorCallback_(p,y)):f(y)}else if(o.canceled){const y=this.appDelete_?S0():Px();f(y)}else{const y=jx();f(y)}};this.canceled_?n(!1,new Qu(!1,null,!0)):this.backoffId_=Bx(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qx(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Kx(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function Yx(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Xx(i,e){e&&(i["X-Firebase-GMPID"]=e)}function $x(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function Zx(i,e,n,r,o,c,f=!0,p=!1){const y=Fx(i.urlParams),_=i.url+y,T=Object.assign({},i.headers);return Xx(T,e),Kx(T,n),Yx(T,c),$x(T,r),new Qx(_,i.method,T,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,f,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function Wx(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this._service=e,n instanceof as?this._location=n:this._location=as.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Sh(e,n)}get root(){const e=new as(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wx(this._location.path)}get storage(){return this._service}get parent(){const e=Jx(this._location.path);if(e===null)return null;const n=new as(this._location.bucket,e);return new Sh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Lx(e)}}function XE(i,e){const n=e?.[Dx];return n==null?null:as.makeFromBucketSpec(n,i)}function e2(i,e,n,r={}){i.host=`${e}:${n}`;const o=aa(e);o&&(Fm(`https://${i.host}/b`),Gm("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(i._overrideAuthToken=typeof c=="string"?c:rT(c,i.app.options.projectId))}class t2{constructor(e,n,r,o,c,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=A0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ox,this._maxUploadRetryTime=Mx,this._requests=new Set,o!=null?this._bucket=as.makeFromBucketSpec(o,this._host):this._bucket=XE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=as.makeFromBucketSpec(this._url,e):this._bucket=XE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){YE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){YE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sh(this,e)}_makeRequest(e,n,r,o,c=!0){if(this._deleted)return new zx(S0());{const f=Zx(e,this._appId,r,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const $E="@firebase/storage",ZE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="storage";function n2(i=Ym(),e){i=mt(i);const r=Rh(i,w0).getImmediate({identifier:e}),o=nT("storage");return o&&s2(r,...o),r}function s2(i,e,n,r={}){e2(i,e,n,r)}function i2(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new t2(n,r,o,e,la)}function r2(){ta(new cr(w0,i2,"PUBLIC").setMultipleInstances(!0)),Os($E,ZE,""),Os($E,ZE,"esm2020")}r2();const a2={apiKey:"AIzaSyCYPsr0Af3l1cduRt2nS9llaCuvnPhrpAA",authDomain:"genai-d165d.firebaseapp.com",databaseURL:"https://genai-d165d-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"genai-d165d",storageBucket:"genai-d165d.appspot.com",messagingSenderId:"986154840713",appId:"1:986154840713:web:c2b1813d279013d8618c58",measurementId:"G-B3WP0XPS3Z"},zp=oT(a2);window.FIREBASE_APPCHECK_DEBUG_TOKEN=!0;const Zo=mI(zp),we=dx(zp);n2(zp);function Zh(){return m.jsx("div",{className:"header-container",children:m.jsx("div",{className:"container-fluid",children:m.jsxs("div",{className:"row align-items-center",children:[m.jsx("div",{className:"col-md-6",children:m.jsx("h1",{className:"fw-bold mb-0 header-title",children:"CWRS"})}),m.jsx("div",{className:"col-md-6 text-end",children:m.jsxs("nav",{className:"nav-links",children:[m.jsx("a",{href:"#",className:"nav-link",children:"About Us"}),m.jsx("a",{href:"#",className:"nav-link",children:"Contact"}),m.jsx("a",{href:"#",className:"nav-link",children:"Update"})]})})]})})})}function l2({onBackToLogin:i,onSignUpSuccess:e}){const[n,r]=ie.useState(""),[o,c]=ie.useState(""),[f,p]=ie.useState(""),[y,_]=ie.useState(""),[T,A]=ie.useState(!1),[S,P]=ie.useState(""),G=async()=>{if(!n||!o||!f||!y){P("請填寫所有欄位並選擇用戶類型");return}A(!0),P("");try{const k=await Zw(Zo,n,f);await _l(Pe(we,y==="seller"?"sellers":"buyers"),{userId:k.user.uid,email:n,username:o,createdAt:Fn()}),console.log("Sign up successful:",k.user),r(""),c(""),p(""),_(""),e("註冊成功！請登入"),i()}catch(k){console.error("Sign up error:",k),P("註冊失敗: "+k.message)}finally{A(!1)}};return m.jsxs("div",{children:[m.jsx(Zh,{}),m.jsx("h2",{className:"px-4 py-3 text-center fs-2 fw-bold",children:"建立新帳號"}),m.jsxs("div",{className:"container",style:{maxWidth:"500px"},children:[S&&m.jsx("div",{className:"alert alert-danger",role:"alert",children:S}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"電子郵件"}),m.jsx("input",{type:"email",className:"form-control",value:n,onChange:k=>r(k.target.value),placeholder:"請輸入電子郵件",disabled:T})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"用戶名"}),m.jsx("input",{type:"text",className:"form-control",value:o,onChange:k=>c(k.target.value),placeholder:"請輸入用戶名",disabled:T})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"密碼"}),m.jsx("input",{type:"password",className:"form-control",value:f,onChange:k=>p(k.target.value),placeholder:"請輸入密碼",disabled:T})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"用戶類型"}),m.jsxs("div",{className:"d-flex gap-3",children:[m.jsxs("div",{className:"form-check",children:[m.jsx("input",{className:"form-check-input",type:"radio",name:"userType",id:"seller",value:"seller",checked:y==="seller",onChange:k=>_(k.target.value),disabled:T}),m.jsx("label",{className:"form-check-label",htmlFor:"seller",children:"賣家"})]}),m.jsxs("div",{className:"form-check",children:[m.jsx("input",{className:"form-check-input",type:"radio",name:"userType",id:"buyer",value:"buyer",checked:y==="buyer",onChange:k=>_(k.target.value),disabled:T}),m.jsx("label",{className:"form-check-label",htmlFor:"buyer",children:"買家"})]})]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("button",{className:"btn btn-primary btn-lg",onClick:G,disabled:T,style:{marginRight:"10px"},children:T?"註冊中...":"註冊"}),m.jsx("button",{className:"btn btn-secondary btn-lg",onClick:i,disabled:T,children:"返回登入"})]})]})]})}function o2({onLoginSuccess:i,onSignUpClick:e}){const[n,r]=ie.useState(""),[o,c]=ie.useState(""),[f,p]=ie.useState(!1),[y,_]=ie.useState(""),T=async S=>{try{const P=$e(Pe(we,"sellers"),ht("username","==",S)),G=await jt(P);if(!G.empty){const X=G.docs[0].data();return console.log("Found seller:",{username:S,email:X.email,userId:X.userId,userType:"seller"}),{email:X.email,userType:"seller",userId:X.userId}}const k=$e(Pe(we,"buyers"),ht("username","==",S)),Y=await jt(k);if(!Y.empty){const X=Y.docs[0].data();return console.log("Found buyer:",{username:S,email:X.email,userId:X.userId,userType:"buyer"}),{email:X.email,userType:"buyer",userId:X.userId}}return null}catch(P){return console.error("Error finding user by username:",P),null}},A=async()=>{if(!n||!o){_("請填寫所有欄位");return}p(!0),_("");try{try{await UT(Zo),console.log("Signed out existing user for fresh login")}catch{console.log("No existing user to sign out")}const S=await T(n);if(!S){_("找不到該用戶名，請檢查是否正確");return}const P=await Jw(Zo,S.email,o);console.log("Login successful:",{username:n,determinedUserType:S.userType,firebaseAuthUser:{uid:P.user.uid,email:P.user.email},firestoreUserData:{userId:S.userId,email:S.email}}),i(S.userType)}catch(S){console.error("Login error:",S),S.code==="auth/wrong-password"?_("密碼錯誤"):S.code==="auth/user-not-found"?_("找不到該用戶"):_("登入失敗: "+S.message)}finally{p(!1)}};return m.jsxs("div",{style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.6), rgba(255,255,255,0.6)), url('/src/assets/Homebackground.jpg')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:"100vh"},children:[m.jsx(Zh,{}),m.jsx("div",{className:"container d-flex justify-content-center align-items-center",style:{minHeight:"60vh"},children:m.jsxs("div",{style:{maxWidth:"400px",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"30px",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[y&&m.jsx("div",{className:"alert alert-danger",role:"alert",children:y}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"用戶名"}),m.jsx("input",{type:"text",className:"form-control",value:n,onChange:S=>r(S.target.value),placeholder:"請輸入用戶名",disabled:f})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"密碼"}),m.jsx("input",{type:"password",className:"form-control",value:o,onChange:S=>c(S.target.value),placeholder:"請輸入密碼",disabled:f})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("button",{className:"btn btn-primary btn-lg",onClick:A,disabled:f,style:{marginRight:"10px"},children:f?"登入中...":"登入"}),m.jsx("button",{className:"btn btn-secondary btn-lg",onClick:e,disabled:f,style:{marginRight:"10px"},children:f?"註冊中...":"註冊"})]})]})})]})}function R0({show:i,message:e,type:n,onClose:r,autoClose:o=!0,duration:c=3e3}){if(ie.useEffect(()=>{if(i&&o){const y=setTimeout(()=>{r()},c);return()=>clearTimeout(y)}},[i,o,c,r]),!i)return null;const f=()=>{switch(n){case"success":return"alert-success";case"error":return"alert-danger";case"warning":return"alert-warning";case"info":return"alert-info";default:return"alert-info"}},p=()=>{switch(n){case"success":return"fas fa-check-circle";case"error":return"fas fa-exclamation-circle";case"warning":return"fas fa-exclamation-triangle";case"info":return"fas fa-info-circle";default:return"fas fa-info-circle"}};return m.jsxs("div",{className:`alert ${f()} alert-dismissible fade show position-fixed`,style:{top:"20px",right:"20px",zIndex:9999,minWidth:"300px"},children:[m.jsx("i",{className:`${p()} me-2`}),e,m.jsx("button",{type:"button",className:"btn-close",onClick:r,"aria-label":"Close"})]})}function c2({user:i,onSuccess:e,onCancel:n}){const[r,o]=ie.useState(""),[c,f]=ie.useState(""),[p,y]=ie.useState(""),[_,T]=ie.useState(!1),[A,S]=ie.useState(""),P=async()=>{if(!r||!c||!p){S("請填寫所有欄位");return}T(!0),S("");try{const k=await _l(Pe(we,"products"),{name:r,price:parseFloat(c),quantity:parseInt(p),sellerId:i?.uid,createdAt:Fn(),updatedAt:Fn()});console.log("Product saved with ID: ",k.id),o(""),f(""),y(""),S(""),alert("產品已成功儲存！"),e()}catch(k){console.error("Error saving product: ",k),S("儲存失敗: "+k.message)}finally{T(!1)}},G=()=>{o(""),f(""),y(""),S(""),n()};return m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"新增產品"}),A&&m.jsx("div",{className:"alert alert-danger",role:"alert",children:A}),m.jsx("div",{className:"row justify-content-center",children:m.jsx("div",{className:"col-md-6",children:m.jsx("div",{className:"card",children:m.jsx("div",{className:"card-body",children:m.jsxs("form",{children:[m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"產品名稱"}),m.jsx("input",{type:"text",className:"form-control",value:r,onChange:k=>o(k.target.value),placeholder:"請輸入產品名稱",disabled:_})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"價格"}),m.jsxs("div",{className:"input-group",children:[m.jsx("span",{className:"input-group-text",children:"$"}),m.jsx("input",{type:"number",className:"form-control",value:c,onChange:k=>f(k.target.value),placeholder:"請輸入價格",min:"0",step:"0.01",disabled:_})]})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"數量"}),m.jsx("input",{type:"number",className:"form-control",value:p,onChange:k=>y(k.target.value),placeholder:"請輸入數量",min:"0",disabled:_})]}),m.jsxs("div",{className:"d-flex gap-2",children:[m.jsx("button",{type:"button",className:"btn btn-success",onClick:P,disabled:_,children:_?"儲存中...":"儲存產品"}),m.jsx("button",{type:"button",className:"btn btn-secondary",onClick:G,disabled:_,children:"取消"})]})]})})})})})]})}function u2({user:i}){const[e,n]=ie.useState([]),[r,o]=ie.useState(!1),c=async f=>{o(!0);try{await Wr(di(we,"orders",f),{status:"confirmed",confirmedAt:new Date}),alert("訂單已確認！")}catch(p){console.error("Error confirming order:",p),alert("確認訂單失敗，請重試")}finally{o(!1)}};return ie.useEffect(()=>{if(i){const f=$e(Pe(we,"orders"),ht("sellerId","==",i.uid)),p=Bs(f,y=>{const _=[];y.forEach(T=>{_.push({id:T.id,...T.data()})}),console.log("Fetched seller orders:",_),console.log("Current seller UID:",i.uid),console.log("Orders with sellerId:",_.filter(T=>T.sellerId===i.uid)),n(_)});return()=>p()}},[i]),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"訂單管理"}),e.length===0?m.jsx("div",{className:"text-center text-muted",children:m.jsx("p",{children:"尚無訂單記錄"})}):m.jsx("div",{className:"table-responsive",children:m.jsxs("table",{className:"table table-striped",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"訂單編號"}),m.jsx("th",{children:"買家"}),m.jsx("th",{children:"商品"}),m.jsx("th",{children:"數量"}),m.jsx("th",{children:"總金額"}),m.jsx("th",{children:"訂單時間"}),m.jsx("th",{children:"狀態"}),m.jsx("th",{children:"操作"})]})}),m.jsx("tbody",{children:e.map(f=>m.jsxs("tr",{children:[m.jsx("td",{children:f.orderNumber}),m.jsx("td",{children:f.buyerName||"未知買家"}),m.jsx("td",{children:f.items.map((p,y)=>m.jsxs("div",{children:[p.name," - $",p.price]},y))}),m.jsx("td",{children:f.items.map((p,y)=>m.jsx("div",{children:p.quantity},y))}),m.jsxs("td",{children:["$",f.totalAmount.toFixed(2)]}),m.jsx("td",{children:f.createdAt?f.createdAt.toDate?f.createdAt.toDate().toLocaleDateString("zh-TW"):new Date(f.createdAt.seconds*1e3).toLocaleDateString("zh-TW"):"未知"}),m.jsx("td",{children:f.status==="pending"?m.jsx("span",{className:"badge bg-warning",children:"待確認"}):m.jsx("span",{className:"badge bg-success",children:"已確認"})}),m.jsx("td",{children:f.status==="pending"&&m.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>c(f.id),disabled:r,children:r?"確認中...":"確認訂單"})})]},f.id))})]})})]})}function h2({user:i}){const[e,n]=ie.useState({totalProducts:0,totalOrders:0,totalRevenue:0,pendingOrders:0,confirmedOrders:0}),[r,o]=ie.useState([]),[c,f]=ie.useState(!0);return ie.useEffect(()=>{if(!i)return;const p=$e(Pe(we,"products"),ht("sellerId","==",i.uid)),y=$e(Pe(we,"orders"),ht("sellerId","==",i.uid)),_=Bs(p,T=>{const A=T.size,S=Bs(y,P=>{let G=0,k=0,Y=0;const X=[];P.forEach(se=>{const re=se.data();X.push({id:se.id,...re}),G+=re.totalAmount||0,re.status==="pending"?k++:re.status==="confirmed"&&Y++}),X.sort((se,re)=>{const ne=se.createdAt?.toDate?se.createdAt.toDate():new Date(se.createdAt?.seconds*1e3);return(re.createdAt?.toDate?re.createdAt.toDate():new Date(re.createdAt?.seconds*1e3)).getTime()-ne.getTime()}),n({totalProducts:A,totalOrders:P.size,totalRevenue:G,pendingOrders:k,confirmedOrders:Y}),o(X.slice(0,5)),f(!1)});return()=>S()});return()=>_()},[i]),c?m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"儀表板概覽"}),m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"spinner-border",role:"status",children:m.jsx("span",{className:"visually-hidden",children:"載入中..."})})})]}):m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"儀表板概覽"}),m.jsxs("div",{className:"row mb-4",children:[m.jsx("div",{className:"col-md-3",children:m.jsx("div",{className:"card bg-primary text-white",children:m.jsx("div",{className:"card-body",children:m.jsxs("div",{className:"d-flex justify-content-between",children:[m.jsxs("div",{children:[m.jsx("h5",{className:"card-title",children:"總產品"}),m.jsx("h2",{className:"mb-0",children:e.totalProducts})]}),m.jsx("div",{className:"align-self-center",children:m.jsx("i",{className:"fas fa-box fa-2x"})})]})})})}),m.jsx("div",{className:"col-md-3",children:m.jsx("div",{className:"card bg-success text-white",children:m.jsx("div",{className:"card-body",children:m.jsxs("div",{className:"d-flex justify-content-between",children:[m.jsxs("div",{children:[m.jsx("h5",{className:"card-title",children:"總訂單"}),m.jsx("h2",{className:"mb-0",children:e.totalOrders})]}),m.jsx("div",{className:"align-self-center",children:m.jsx("i",{className:"fas fa-shopping-cart fa-2x"})})]})})})}),m.jsx("div",{className:"col-md-3",children:m.jsx("div",{className:"card bg-warning text-white",children:m.jsx("div",{className:"card-body",children:m.jsxs("div",{className:"d-flex justify-content-between",children:[m.jsxs("div",{children:[m.jsx("h5",{className:"card-title",children:"待確認"}),m.jsx("h2",{className:"mb-0",children:e.pendingOrders})]}),m.jsx("div",{className:"align-self-center",children:m.jsx("i",{className:"fas fa-clock fa-2x"})})]})})})}),m.jsx("div",{className:"col-md-3",children:m.jsx("div",{className:"card bg-info text-white",children:m.jsx("div",{className:"card-body",children:m.jsxs("div",{className:"d-flex justify-content-between",children:[m.jsxs("div",{children:[m.jsx("h5",{className:"card-title",children:"總收入"}),m.jsxs("h2",{className:"mb-0",children:["$",e.totalRevenue.toFixed(2)]})]}),m.jsx("div",{className:"align-self-center",children:m.jsx("i",{className:"fas fa-dollar-sign fa-2x"})})]})})})})]}),m.jsx("div",{className:"row",children:m.jsx("div",{className:"col-12",children:m.jsxs("div",{className:"card",children:[m.jsx("div",{className:"card-header",children:m.jsx("h5",{className:"mb-0",children:"最近訂單"})}),m.jsx("div",{className:"card-body",children:r.length===0?m.jsx("p",{className:"text-muted text-center",children:"尚無訂單記錄"}):m.jsx("div",{className:"table-responsive",children:m.jsxs("table",{className:"table table-hover",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"訂單編號"}),m.jsx("th",{children:"買家"}),m.jsx("th",{children:"金額"}),m.jsx("th",{children:"狀態"}),m.jsx("th",{children:"日期"})]})}),m.jsx("tbody",{children:r.map(p=>m.jsxs("tr",{children:[m.jsx("td",{children:p.orderNumber}),m.jsx("td",{children:p.buyerName||"未知買家"}),m.jsxs("td",{children:["$",p.totalAmount?.toFixed(2)||"0.00"]}),m.jsx("td",{children:p.status==="pending"?m.jsx("span",{className:"badge bg-warning",children:"待確認"}):m.jsx("span",{className:"badge bg-success",children:"已確認"})}),m.jsx("td",{children:p.createdAt?p.createdAt.toDate?p.createdAt.toDate().toLocaleDateString("zh-TW"):new Date(p.createdAt.seconds*1e3).toLocaleDateString("zh-TW"):"未知"})]},p.id))})]})})})]})})})]})}function f2({user:i,onContactBuyer:e}){const[n,r]=ie.useState([]),[o,c]=ie.useState(""),[f,p]=ie.useState({location:""});ie.useEffect(()=>{const A=$e(Pe(we,"buyers")),S=Bs(A,async P=>{const G=[];for(const k of P.docs){const Y=k.data();try{const X=$e(Pe(we,"buyerProfiles"),ht("buyerId","==",Y.userId)),se=await jt(X);let re={};se.empty||(re=se.docs[0].data()),G.push({id:k.id,...Y,...re})}catch(X){console.error("Error fetching buyer profile:",X),G.push({id:k.id,...Y})}}r(G)});return()=>S()},[]);const y=n.filter(A=>{const S=A.username?A.username.toLowerCase().includes(o.toLowerCase()):!0,P=!f.location||A.location&&A.location.toLowerCase().includes(f.location.toLowerCase());return S&&P}),_=(A,S)=>{p(P=>({...P,[A]:S}))},T=()=>{c(""),p({location:""})};return m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"尋找買家"}),m.jsxs("div",{className:"card mb-4",children:[m.jsx("div",{className:"card-header",children:m.jsx("h5",{className:"mb-0",children:"搜尋條件"})}),m.jsxs("div",{className:"card-body",children:[m.jsxs("div",{className:"row mb-3",children:[m.jsxs("div",{className:"col-md-6",children:[m.jsx("label",{className:"form-label",children:"買家名稱"}),m.jsx("input",{type:"text",className:"form-control",placeholder:"搜尋買家名稱...",value:o,onChange:A=>c(A.target.value)})]}),m.jsx("div",{className:"col-md-6 d-flex align-items-end",children:m.jsx("button",{className:"btn btn-outline-secondary",onClick:T,children:"清除搜尋"})})]}),m.jsx("div",{className:"row",children:m.jsxs("div",{className:"col-md-6 col-lg-4 mb-3",children:[m.jsx("label",{className:"form-label",children:"地點"}),m.jsx("input",{type:"text",className:"form-control",placeholder:"搜尋地點...",value:f.location,onChange:A=>_("location",A.target.value)})]})})]})]}),m.jsx("div",{className:"row",children:y.length===0?m.jsx("div",{className:"col-12 text-center text-muted",children:o||f.location?"找不到符合搜尋條件的買家":"尚無買家資料"}):y.map(A=>m.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:m.jsx("div",{className:"card",children:m.jsxs("div",{className:"card-body",children:[m.jsx("h5",{className:"card-title",children:A.username||"未設定用戶名"}),m.jsxs("p",{className:"card-text",children:[m.jsx("strong",{children:"電子郵件:"})," ",A.email,m.jsx("br",{}),A.phoneNumber&&m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"電話號碼:"})," ",A.phoneNumber,m.jsx("br",{})]}),A.location&&m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"地點:"})," ",A.location,m.jsx("br",{})]}),m.jsx("strong",{children:"註冊時間:"})," ",A.createdAt?new Date(A.createdAt.seconds*1e3).toLocaleDateString("zh-TW"):"未知"]}),m.jsxs("div",{className:"d-flex gap-2",children:[m.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{e?e(A.userId,A.username||A.email):alert(`聯繫買家: ${A.username||A.email}`)},children:[m.jsx("i",{className:"fas fa-comment me-1"}),"聯絡買家"]}),m.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{alert(`查看買家資料: ${A.username||A.email}`)},children:"查看資料"})]})]})})},A.id))})]})}function I0({user:i,userType:e}){const[n,r]=ie.useState(!1),[o,c]=ie.useState(""),[f,p]=ie.useState(""),[y,_]=ie.useState(""),[T,A]=ie.useState(""),[S,P]=ie.useState(""),[G,k]=ie.useState(""),[Y,X]=ie.useState(""),[se,re]=ie.useState(!1),[ne,ue]=ie.useState(""),[me,I]=ie.useState(""),[R,C]=ie.useState(null),[V,x]=ie.useState({show:!1,message:"",type:"success"}),M=ie.useRef(null);ie.useEffect(()=>{(async()=>{if(i)try{const q=e==="seller"?"sellerProfiles":"buyerProfiles",ae=e==="seller"?"sellerId":"buyerId",ce=$e(Pe(we,q),ht(ae,"==",i.uid)),ge=await jt(ce);if(!ge.empty){const ye=ge.docs[0].data();ye.avatarUrl&&(I(ye.avatarUrl),console.log("Loaded existing avatar:",ye.avatarUrl.substring(0,50)+"..."))}}catch(q){console.error("Error loading avatar:",q)}})()},[i,e]),ie.useEffect(()=>{(async()=>{if(i)try{const q=e==="seller"?"sellerProfiles":"buyerProfiles",ae=e==="seller"?"sellerId":"buyerId",ce=$e(Pe(we,q),ht(ae,"==",i.uid)),ge=await jt(ce);if(!ge.empty){const ye=ge.docs[0].data();ye.avatarUrl&&I(ye.avatarUrl),ye.phoneNumber&&c(ye.phoneNumber),ye.username&&p(ye.username),ye.location&&X(ye.location)}}catch(q){console.error("Error loading profile data:",q)}})()},[i,e]);const N=()=>{x({show:!1,message:"",type:"success"})},Ne=(D,q)=>{x({show:!0,message:D,type:q})},Ge=()=>{M.current?.click()},F=async D=>{if(D){re(!0),ue(""),console.log("Uploading avatar file:",D.name,D.size,D.type);try{const q=new FileReader;q.onload=async ae=>{const ce=ae.target?.result;console.log("Base64 string length:",ce.length),I(ce);const ge=e==="seller"?"sellerProfiles":"buyerProfiles",ye=e==="seller"?"sellerId":"buyerId";console.log("Saving to collection:",ge,"with userIdField:",ye,"user.uid:",i.uid);const Me=$e(Pe(we,ge),ht(ye,"==",i.uid)),rt=await jt(Me);if(console.log("Profile snapshot size:",rt.size),rt.empty)console.log("Creating new profile document"),await _l(Pe(we,ge),{[ye]:i.uid,avatarUrl:ce,createdAt:Fn(),updatedAt:Fn()});else{const Ue=rt.docs[0];console.log("Updating existing profile:",Ue.id),await Wr(di(we,ge,Ue.id),{avatarUrl:ce,updatedAt:Fn()})}console.log("Avatar saved successfully to Firestore"),Ne("頭像已更新！","success"),re(!1)},q.readAsDataURL(D)}catch(q){console.error("Avatar upload error:",q),ue("頭像更新失敗: "+(q?.message||"未知錯誤")),Ne("頭像更新失敗: "+(q?.message||"未知錯誤"),"error"),re(!1)}}},$=()=>{r(!0),_(i?.email||""),c(o),p(f),A(""),P(""),X(Y),ue("")},oe=()=>{r(!1),c(""),p(""),_(""),A(""),P(""),k(""),X(""),ue(""),C(null)},Ae=async()=>{if(T&&T!==S){ue("密碼確認不匹配");return}if(T&&T.length<6){ue("密碼至少需要6個字符");return}const D=y!==i.email||T;if(D&&!G){ue("更改電子郵件或密碼需要輸入當前密碼");return}re(!0),ue("");try{if(D){const Ue=ca.credential(i.email,G);await $w(i,Ue)}y!==i.email&&await Ww(i,y),T&&await eR(i,T);let q=null;if(R){const Ue=new FileReader;Ue.onload=async Cn=>{const Qn=Cn.target?.result;q=Qn,I(Qn)},Ue.readAsDataURL(R)}const ae=e==="seller"?"sellerProfiles":"buyerProfiles",ce=e==="seller"?"sellerId":"buyerId",ge=e==="seller"?"sellers":"buyers",ye=$e(Pe(we,ae),ht(ce,"==",i.uid)),Me=await jt(ye),rt={phoneNumber:o,username:f,location:Y,updatedAt:Fn()};if(q&&(rt.avatarUrl=q),Me.empty)await _l(Pe(we,ae),{[ce]:i.uid,...rt,createdAt:Fn()});else{const Ue=Me.docs[0];await Wr(di(we,ae,Ue.id),rt)}if(f){const Ue=$e(Pe(we,ge),ht("userId","==",i.uid)),Cn=await jt(Ue);if(!Cn.empty){const Qn=Cn.docs[0];await Wr(di(we,ge,Qn.id),{username:f})}}r(!1),Ne("個人資料已成功更新！","success")}catch(q){console.error("Error saving profile:",q),q.code==="auth/wrong-password"?ue("當前密碼不正確"):q.code==="auth/email-already-in-use"?ue("該電子郵件已被使用"):ue("儲存失敗: "+q.message)}finally{re(!1)}},Oe=e==="seller"?"賣家":"買家";return m.jsxs("div",{className:"p-4",children:[m.jsx(R0,{show:V.show,message:V.message,type:V.type,onClose:N}),m.jsx("h3",{className:"mb-4",children:"個人資料"}),ne&&m.jsx("div",{className:"alert alert-danger",role:"alert",children:ne}),m.jsx("div",{className:"row justify-content-center",children:m.jsx("div",{className:"col-md-8",children:m.jsx("div",{className:"card",children:m.jsxs("div",{className:"card-body",children:[m.jsxs("div",{className:"d-flex align-items-center mb-3",children:[m.jsx("img",{src:me||"https://via.placeholder.com/96?text=Avatar",alt:"avatar",style:{width:"96px",height:"96px",borderRadius:"50%",objectFit:"cover",marginRight:"16px",border:"2px solid #eee"}}),m.jsxs("div",{children:[m.jsx("button",{className:"btn btn-primary",onClick:Ge,disabled:se,children:"更換頭像"}),m.jsx("input",{ref:M,type:"file",accept:"image/*",style:{display:"none"},onChange:D=>{const q=D.target.files?.[0]||null;q&&F(q),D.target&&(D.target.value="")}})]})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"電子郵件:"})," ",i?.email]}),m.jsxs("p",{children:[m.jsx("strong",{children:"用戶名:"})," ",f||"未設定"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"電話號碼:"})," ",o||"未設定"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"地點:"})," ",Y||"未設定"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"用戶類型:"})," ",Oe]}),n?m.jsxs("div",{className:"mt-3",children:[m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"頭像"}),m.jsx("input",{type:"file",accept:"image/*",className:"form-control",onChange:D=>C(D.target.files?.[0]||null),disabled:se})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"用戶名"}),m.jsx("input",{type:"text",className:"form-control",value:f,onChange:D=>p(D.target.value),placeholder:"請輸入用戶名",disabled:se})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"電子郵件"}),m.jsx("input",{type:"email",className:"form-control",value:y,onChange:D=>_(D.target.value),placeholder:"請輸入電子郵件",disabled:se})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"電話號碼"}),m.jsx("input",{type:"tel",className:"form-control",value:o,onChange:D=>c(D.target.value),placeholder:"請輸入電話號碼 (選填)",disabled:se})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"地點"}),m.jsx("input",{type:"text",className:"form-control",value:Y,onChange:D=>X(D.target.value),placeholder:"請輸入地點 (選填)",disabled:se})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"當前密碼"}),m.jsx("input",{type:"password",className:"form-control",value:G,onChange:D=>k(D.target.value),placeholder:"更改電子郵件或密碼時需要輸入當前密碼",disabled:se})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"新密碼"}),m.jsx("input",{type:"password",className:"form-control",value:T,onChange:D=>A(D.target.value),placeholder:"請輸入新密碼 (選填)",disabled:se})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"form-label",children:"確認密碼"}),m.jsx("input",{type:"password",className:"form-control",value:S,onChange:D=>P(D.target.value),placeholder:"請再次輸入新密碼",disabled:se})]}),m.jsxs("div",{className:"d-flex gap-2",children:[m.jsx("button",{className:"btn btn-primary",onClick:Ae,disabled:se,children:se?"儲存中...":"儲存"}),m.jsx("button",{className:"btn btn-secondary",onClick:oe,disabled:se,children:"取消"})]})]}):m.jsx("button",{className:"btn btn-primary",onClick:$,children:"編輯個人資料"})]})})})})]})}function N0({title:i,menuItems:e,selectedFunction:n,onFunctionSelect:r}){return m.jsx("div",{className:"col-md-3 bg-light border-end p-0",children:m.jsxs("div",{className:"p-3",children:[m.jsx("h5",{className:"mb-3",children:i}),m.jsx("div",{className:"list-group list-group-flush",children:e.map(o=>m.jsxs("button",{className:`list-group-item list-group-item-action ${n===o.id?"active":""}`,onClick:()=>r(o.id),children:[m.jsx("i",{className:`${o.icon} me-2`}),o.label,o.badge&&m.jsx("span",{className:"badge bg-primary ms-2",children:o.badge})]},o.id))})]})})}function C0({user:i,userType:e,onStartChat:n,selectedChatUser:r}){const[o,c]=ie.useState([]),[f,p]=ie.useState(null),[y,_]=ie.useState([]),[T,A]=ie.useState(""),[S,P]=ie.useState(!1),G=ie.useRef(null),k=()=>{G.current?.scrollIntoView({behavior:"smooth"})};ie.useEffect(()=>{k()},[y]),ie.useEffect(()=>{r&&X(r.userId,r.userName)},[r]),ie.useEffect(()=>{if(!i)return;const ne=$e(Pe(we,"chats"),ht("participants","array-contains",i.uid)),ue=Bs(ne,async me=>{const I=[];for(const R of me.docs){const V=R.data().participants,x=V.find(M=>M!==i.uid);if(x)try{let M;e==="buyer"?M=$e(Pe(we,"sellers"),ht("userId","==",x)):M=$e(Pe(we,"buyers"),ht("userId","==",x));const N=await jt(M),Ne=N.empty?null:N.docs[0].data();if(Ne&&Ne.username){const Ge=$e(Pe(we,"messages"),ht("chatId","==",R.id)),F=await jt(Ge),$=F.docs.filter(q=>q.data().receiverId===i.uid&&!q.data().read),Ae=F.docs.map(q=>({id:q.id,...q.data(),timestamp:q.data().timestamp})).sort((q,ae)=>!q.timestamp||!ae.timestamp?0:ae.timestamp.seconds-q.timestamp.seconds),Oe=Ae.length>0?Ae[0]:null,D={id:R.id,chatId:R.id,participants:V,lastMessage:Oe,otherUser:{id:x,name:Ne.username,type:e==="buyer"?"seller":"buyer"},unreadCount:$.length};I.push(D)}}catch(M){console.error("Error processing chat:",M)}}I.sort((R,C)=>!R.lastMessage&&!C.lastMessage?0:R.lastMessage?C.lastMessage?C.lastMessage.timestamp?.seconds-R.lastMessage.timestamp?.seconds:-1:1),c(I)});return()=>ue()},[i,e]),ie.useEffect(()=>{if(!f)return;const ne=$e(Pe(we,"messages"),ht("chatId","==",f.id)),ue=Bs(ne,me=>{const I=[];me.forEach(C=>{I.push({id:C.id,...C.data()})}),I.sort((C,V)=>!C.timestamp||!V.timestamp?0:C.timestamp.seconds-V.timestamp.seconds),_(I);const R=I.filter(C=>C.receiverId===i.uid&&!C.read);R.length>0&&R.forEach(async C=>{try{await Wr(di(we,"messages",C.id),{read:!0})}catch(V){console.error("Error marking message as read:",V)}})});return()=>ue()},[f,i]);const Y=async()=>{if(!(!T.trim()||!f||S)){P(!0);try{const ne={chatId:f.id,senderId:i.uid,receiverId:f.otherUser.id,content:T.trim(),timestamp:Fn(),read:!1};await _l(Pe(we,"messages"),ne),A("")}catch(ne){console.error("Error sending message:",ne),alert(`發送訊息失敗: ${ne.message||"未知錯誤"}`)}finally{P(!1)}}},X=async(ne,ue)=>{try{const me=[i.uid,ne].sort(),I=`chat_${me[0]}_${me[1]}`,R=di(we,"chats",I),C=await Rx(R);if(C.exists()){const V=C.data();p({id:C.id,chatId:C.id,participants:V.participants,otherUser:{id:ne,name:ue,type:e==="buyer"?"seller":"buyer"},unreadCount:0});return}await Ix(R,{participants:me,createdAt:Fn()}),p({id:I,chatId:I,participants:me,otherUser:{id:ne,name:ue,type:e==="buyer"?"seller":"buyer"},unreadCount:0})}catch(me){console.error("Error starting chat:",me),alert("建立對話失敗，請重試")}},se=ne=>{if(!ne)return"";const ue=new Date(ne.seconds*1e3);return(new Date().getTime()-ue.getTime())/(1e3*60*60)<24?ue.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"}):ue.toLocaleDateString("zh-TW")},re=ne=>{ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),Y())};return m.jsxs("div",{className:"row h-100",children:[m.jsxs("div",{className:"col-md-4 border-end p-0",children:[m.jsx("div",{className:"p-3 border-bottom",children:m.jsx("h5",{className:"mb-0",children:"訊息"})}),m.jsx("div",{className:"chat-list chat-scroll",style:{height:"calc(100vh - 200px)",overflowY:"auto"},children:o.length===0?m.jsx("div",{className:"p-3 text-center text-muted",children:"尚無訊息"}):o.map(ne=>m.jsx("div",{className:`p-3 border-bottom chat-item ${f?.id===ne.id?"bg-light":""}`,style:{cursor:"pointer"},onClick:()=>p(ne),children:m.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[m.jsxs("div",{className:"flex-grow-1",children:[m.jsx("h6",{className:"mb-1",children:ne.otherUser.name}),ne.lastMessage&&m.jsx("p",{className:"mb-0 text-muted small",children:ne.lastMessage.content.length>50?ne.lastMessage.content.substring(0,50)+"...":ne.lastMessage.content})]}),m.jsxs("div",{className:"text-end",children:[ne.lastMessage&&m.jsx("small",{className:"text-muted",children:se(ne.lastMessage.timestamp)}),ne.unreadCount>0&&m.jsx("span",{className:"badge bg-primary ms-2",children:ne.unreadCount})]})]})},ne.id))})]}),m.jsx("div",{className:"col-md-8 p-0 d-flex flex-column",children:f?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"p-3 border-bottom bg-light",children:m.jsx("h5",{className:"mb-0",children:f.otherUser.name})}),m.jsxs("div",{className:"flex-grow-1 p-3 chat-scroll",style:{height:"calc(100vh - 300px)",overflowY:"auto"},children:[y.length===0?m.jsx("div",{className:"text-center text-muted",children:"開始對話..."}):y.map(ne=>m.jsx("div",{className:`mb-3 d-flex ${ne.senderId===i.uid?"justify-content-end":"justify-content-start"}`,children:m.jsxs("div",{className:`message-bubble ${ne.senderId===i.uid?"sent":"received"}`,children:[m.jsx("div",{className:"message-content",children:ne.content}),m.jsx("small",{className:`message-timestamp ${ne.senderId===i.uid?"text-white-50":"text-muted"}`,children:se(ne.timestamp)})]})},ne.id)),m.jsx("div",{ref:G})]}),m.jsx("div",{className:"p-3 border-top chat-input-container",children:m.jsxs("div",{className:"input-group",children:[m.jsx("input",{type:"text",className:"form-control",placeholder:"輸入訊息...",value:T,onChange:ne=>A(ne.target.value),onKeyPress:re,disabled:S}),m.jsx("button",{className:"btn btn-primary",onClick:Y,disabled:S||!T.trim(),children:S?"發送中...":"發送"})]})})]}):m.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:m.jsxs("div",{className:"text-center text-muted",children:[m.jsx("i",{className:"fas fa-comments fa-3x mb-3"}),m.jsx("h5",{children:"選擇對話開始聊天"})]})})})]})}function x0({user:i,userType:e,onStartChat:n}){const[r,o]=ie.useState([]),[c,f]=ie.useState(!1),[p,y]=ie.useState("");ie.useEffect(()=>{(async()=>{f(!0);try{const P=$e(Pe(we,e==="buyer"?"sellers":"buyers")),G=await jt(P),k=[];G.forEach(Y=>{const X=Y.data();k.push({id:Y.id,userId:X.userId,username:X.username,email:X.email,createdAt:X.createdAt})}),o(k)}catch(S){console.error("Error fetching users:",S)}finally{f(!1)}})()},[e]);const _=r.filter(A=>A.username.toLowerCase().includes(p.toLowerCase())||A.email.toLowerCase().includes(p.toLowerCase())),T=(A,S)=>{n(A,S)};return m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:e==="buyer"?"尋找賣家":"尋找買家"}),m.jsx("div",{className:"mb-3",children:m.jsx("input",{type:"text",className:"form-control",placeholder:`搜尋${e==="buyer"?"賣家":"買家"}...`,value:p,onChange:A=>y(A.target.value)})}),c?m.jsx("div",{className:"text-center",children:m.jsx("div",{className:"spinner-border",role:"status",children:m.jsx("span",{className:"visually-hidden",children:"載入中..."})})}):m.jsx("div",{className:"row",children:_.length===0?m.jsx("div",{className:"col-12 text-center text-muted",children:p?"找不到符合條件的用戶":"暫無用戶"}):_.map(A=>m.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:m.jsx("div",{className:"card user-card",children:m.jsxs("div",{className:"card-body",children:[m.jsx("h5",{className:"card-title",children:A.username}),m.jsx("p",{className:"card-text text-muted",children:A.email}),m.jsx("p",{className:"card-text",children:m.jsxs("small",{className:"text-muted",children:["註冊時間:"," ",A.createdAt?new Date(A.createdAt.seconds*1e3).toLocaleDateString("zh-TW"):"未知"]})}),m.jsxs("button",{className:"btn btn-primary",onClick:()=>T(A.userId,A.username),children:[m.jsx("i",{className:"fas fa-comment me-2"}),"開始對話"]})]})})},A.id))})]})}function D0({isOpen:i,onClose:e}){const[n,r]=ie.useState([]),[o,c]=ie.useState(""),[f,p]=ie.useState(!1),y=ie.useRef(null),_=()=>{y.current?.scrollIntoView({behavior:"smooth"})};ie.useEffect(()=>{_()},[n]),ie.useEffect(()=>{i&&n.length===0&&r([{id:"welcome",content:"你好！我是你的AI助手，有什麼可以幫助你的嗎？",timestamp:new Date,isUser:!1}])},[i,n.length]);const T=async()=>{if(!o.trim()||f)return;const k={id:Date.now().toString(),content:o.trim(),timestamp:new Date,isUser:!0};r(X=>[...X,k]),c(""),p(!0);const Y={id:`loading-${Date.now()}`,content:"正在思考中...",timestamp:new Date,isUser:!1,isLoading:!0};r(X=>[...X,Y]);try{const X=await A(k.content,n.slice(-10));r(se=>{const re=se.filter(ue=>!ue.isLoading),ne={id:`ai-${Date.now()}`,content:X,timestamp:new Date,isUser:!1};return[...re,ne]})}catch(X){console.error("Error getting AI response:",X),r(se=>{const re=se.filter(ue=>!ue.isLoading),ne={id:`error-${Date.now()}`,content:"抱歉，我暫時無法回應。請稍後再試。",timestamp:new Date,isUser:!1};return[...re,ne]})}finally{p(!1)}},A=async(k,Y)=>{await new Promise(re=>setTimeout(re,1e3+Math.random()*2e3));const X=k.toLowerCase();if(X.includes("你好")||X.includes("hello"))return"你好！很高興為你服務。有什麼我可以幫助你的嗎？";if(X.includes("幫助")||X.includes("help"))return"我很樂意幫助你！請告訴我你遇到的具體問題，我會盡力為你提供解決方案。";if(X.includes("產品")||X.includes("product"))return"關於產品相關的問題，我可以為你提供詳細的資訊和建議。請告訴我你對哪個產品感興趣？";if(X.includes("訂單")||X.includes("order"))return"我可以幫助你處理訂單相關的問題。請告訴我你的訂單號碼或具體問題，我會為你查詢。";if(X.includes("價格")||X.includes("price"))return"關於價格資訊，我可以為你提供最新的報價。請告訴我你感興趣的產品，我會為你查詢價格。";if(X.includes("賣家")||X.includes("seller"))return"我可以幫你找到合適的賣家。請告訴我你需要什麼類型的產品或服務？";if(X.includes("買家")||X.includes("buyer"))return"我可以幫你找到潛在的買家。請告訴我你銷售什麼產品？";if(X.includes("回收")||X.includes("recycle"))return"關於回收服務，我可以為你提供相關資訊。請告訴我你需要回收什麼類型的物品？";if(X.includes("廢料")||X.includes("waste"))return"我可以幫你處理廢料相關的問題。請告訴我你有哪些廢料需要處理？";const se=["我理解你的問題。讓我來幫助你解決這個問題。","這是一個很好的問題！根據我的分析，我建議你...","謝謝你的提問。讓我為你提供一些有用的建議。","我明白你的需求。這裡有一些解決方案供你參考。","這確實是一個重要的問題。讓我為你詳細解釋一下。","根據你的描述，我建議你可以嘗試以下方法...","我明白你的困擾。讓我為你提供一些實用的建議。","這是一個常見的問題。讓我為你提供解決方案。"];return se[Math.floor(Math.random()*se.length)]},S=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),T())},P=k=>k.toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"}),G=()=>{r([])};return i?m.jsx("div",{className:"ai-chat-overlay",children:m.jsxs("div",{className:"ai-chat-container",children:[m.jsxs("div",{className:"ai-chat-header",children:[m.jsxs("div",{className:"d-flex align-items-center",children:[m.jsx("div",{className:"ai-avatar me-2",children:m.jsx("i",{className:"fas fa-robot"})}),m.jsxs("div",{children:[m.jsx("h5",{className:"mb-0",children:"AI 助手"}),m.jsx("small",{className:"text-muted",children:"線上"})]})]}),m.jsxs("div",{className:"ai-chat-controls",children:[m.jsx("button",{className:"btn btn-sm btn-outline-secondary me-2",onClick:G,title:"清除對話",children:m.jsx("i",{className:"fas fa-trash"})}),m.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:e,title:"關閉",children:m.jsx("i",{className:"fas fa-times"})})]})]}),m.jsxs("div",{className:"ai-chat-messages",children:[n.map(k=>m.jsx("div",{className:`ai-message ${k.isUser?"user":"ai"} ${k.isLoading?"loading":""}`,children:m.jsxs("div",{className:"ai-message-content",children:[k.isLoading?m.jsxs("div",{className:"typing-indicator",children:[m.jsx("span",{}),m.jsx("span",{}),m.jsx("span",{})]}):m.jsx("div",{className:"message-text",children:k.content}),m.jsx("small",{className:"message-time",children:P(k.timestamp)})]})},k.id)),m.jsx("div",{ref:y})]}),m.jsx("div",{className:"ai-chat-input",children:m.jsxs("div",{className:"input-group",children:[m.jsx("input",{type:"text",className:"form-control",placeholder:"輸入你的問題...",value:o,onChange:k=>c(k.target.value),onKeyPress:S,disabled:f}),m.jsx("button",{className:"btn btn-primary",onClick:T,disabled:f||!o.trim(),children:f?m.jsx("i",{className:"fas fa-spinner fa-spin"}):m.jsx("i",{className:"fas fa-paper-plane"})})]})})]})}):null}function d2({user:i,onLogout:e}){const[n,r]=ie.useState("dashboard"),[o,c]=ie.useState(!1),[f,p]=ie.useState(""),[y,_]=ie.useState({show:!1,message:"",type:"success"}),[T,A]=ie.useState([]),[S,P]=ie.useState(null),[G,k]=ie.useState({name:"",price:"",quantity:""}),[Y,X]=ie.useState("messages"),[se,re]=ie.useState(null),[ne,ue]=ie.useState(!1);ie.useEffect(()=>{if(i){const $=$e(Pe(we,"products"),ht("sellerId","==",i.uid)),oe=Bs($,Ae=>{const Oe=[];Ae.forEach(D=>{Oe.push({id:D.id,...D.data()})}),A(Oe)});return()=>oe()}},[i]);const me=()=>{r("addProduct")},I=()=>{r("products")},R=()=>{r("products")},C=[{id:"dashboard",label:"儀表板",icon:"fas fa-tachometer-alt"},{id:"products",label:"產品管理",icon:"fas fa-box"},{id:"orders",label:"訂單管理",icon:"fas fa-shopping-cart"},{id:"findBuyers",label:"尋找買家",icon:"fas fa-search"},{id:"messages",label:"訊息",icon:"fas fa-comments"},{id:"profile",label:"個人資料",icon:"fas fa-user"},{id:"aiChat",label:"AI 助手",icon:"fas fa-robot"}],V=($,oe)=>{_({show:!0,message:$,type:oe})},x=()=>{_({show:!1,message:"",type:"success"})},M=async($,oe)=>{if(window.confirm(`確定要刪除產品 "${oe}" 嗎？

此操作無法復原！`)){c(!0),p("");try{await Nx(di(we,"products",$)),console.log("Product deleted successfully"),V("產品已成功刪除！","success")}catch(Oe){console.error("Error deleting product: ",Oe),p("刪除失敗: "+Oe.message),V("刪除失敗: "+Oe.message,"error")}finally{c(!1)}}},N=$=>{P($),k({name:$.name,price:$.price.toString(),quantity:$.quantity.toString()})},Ne=async()=>{if(!S)return;if(!G.name||!G.price||!G.quantity){p("請填寫所有欄位");return}const $=parseFloat(G.price),oe=parseInt(G.quantity);if(isNaN($)||$<=0){p("價格必須是大於0的數字");return}if(isNaN(oe)||oe<0){p("庫存必須是大於等於0的整數");return}c(!0),p("");try{await Wr(di(we,"products",S.id),{name:G.name,price:$,quantity:oe,updatedAt:Fn()}),P(null),V("產品已成功更新！","success")}catch(Ae){console.error("Error updating product:",Ae),p("更新失敗: "+Ae.message),V("更新失敗: "+Ae.message,"error")}finally{c(!1)}},Ge=()=>{P(null),k({name:"",price:"",quantity:""}),p("")},F=()=>{switch(n){case"dashboard":return m.jsx(h2,{user:i});case"products":return m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"產品管理"}),m.jsx("div",{className:"mb-3",children:m.jsx("button",{className:"btn btn-success",onClick:me,children:"新增產品"})}),f&&m.jsx("div",{className:"alert alert-danger",role:"alert",children:f}),S&&m.jsxs("div",{className:"card mb-4",children:[m.jsx("div",{className:"card-header",children:m.jsx("h5",{className:"mb-0",children:"編輯產品"})}),m.jsxs("div",{className:"card-body",children:[m.jsxs("div",{className:"row",children:[m.jsxs("div",{className:"col-md-4",children:[m.jsx("label",{className:"form-label",children:"產品名稱"}),m.jsx("input",{type:"text",className:"form-control",value:G.name,onChange:$=>k({...G,name:$.target.value}),disabled:o})]}),m.jsxs("div",{className:"col-md-4",children:[m.jsx("label",{className:"form-label",children:"價格"}),m.jsx("input",{type:"number",step:"0.01",className:"form-control",value:G.price,onChange:$=>k({...G,price:$.target.value}),disabled:o})]}),m.jsxs("div",{className:"col-md-4",children:[m.jsx("label",{className:"form-label",children:"庫存"}),m.jsx("input",{type:"number",className:"form-control",value:G.quantity,onChange:$=>k({...G,quantity:$.target.value}),disabled:o})]})]}),m.jsxs("div",{className:"mt-3",children:[m.jsx("button",{className:"btn btn-success me-2",onClick:Ne,disabled:o,children:o?"儲存中...":"儲存"}),m.jsx("button",{className:"btn btn-secondary",onClick:Ge,disabled:o,children:"取消"})]})]})]}),m.jsx("div",{className:"table-responsive",children:m.jsxs("table",{className:"table table-striped",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"產品名稱"}),m.jsx("th",{children:"價格"}),m.jsx("th",{children:"庫存"}),m.jsx("th",{children:"建立時間"}),m.jsx("th",{children:"操作"})]})}),m.jsx("tbody",{children:T.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"text-center text-muted",children:"尚無產品資料"})}):T.map($=>m.jsxs("tr",{children:[m.jsx("td",{children:$.name}),m.jsxs("td",{children:["$",$.price]}),m.jsx("td",{children:$.quantity}),m.jsx("td",{children:$.createdAt?new Date($.createdAt.seconds*1e3).toLocaleDateString("zh-TW"):"N/A"}),m.jsxs("td",{children:[m.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>N($),disabled:o,children:"編輯"}),m.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>M($.id,$.name),disabled:o,children:o?"刪除中...":"刪除"})]})]},$.id))})]})})]});case"addProduct":return m.jsx(c2,{user:i,onSuccess:I,onCancel:R});case"orders":return m.jsx(u2,{user:i});case"findBuyers":return m.jsx(f2,{user:i,onContactBuyer:($,oe)=>{re({userId:$,userName:oe}),r("messages")}});case"messages":return m.jsxs("div",{className:"h-100",children:[Y==="messages"?m.jsx(C0,{user:i,userType:"seller",onStartChat:($,oe)=>{re({userId:$,userName:oe})},selectedChatUser:se}):m.jsx(x0,{user:i,userType:"seller",onStartChat:($,oe)=>{re({userId:$,userName:oe}),X("messages")}}),m.jsxs("div",{className:"p-3 border-top",children:[m.jsx("button",{className:`btn me-2 ${Y==="messages"?"btn-primary":"btn-outline-primary"}`,onClick:()=>X("messages"),children:"訊息列表"}),m.jsx("button",{className:`btn ${Y==="findUsers"?"btn-primary":"btn-outline-primary"}`,onClick:()=>X("findUsers"),children:"尋找買家"})]})]});case"profile":return m.jsx(I0,{user:i,userType:"seller"});case"aiChat":return m.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:m.jsxs("div",{className:"text-center",children:[m.jsx("i",{className:"fas fa-robot fa-4x text-primary mb-3"}),m.jsx("h3",{children:"AI 助手"}),m.jsx("p",{className:"text-muted mb-4",children:"點擊下方按鈕開始與 AI 助手對話"}),m.jsxs("button",{className:"btn btn-primary btn-lg",onClick:()=>ue(!0),children:[m.jsx("i",{className:"fas fa-comments me-2"}),"開始對話"]})]})});default:return m.jsx("div",{className:"p-4 text-center",children:m.jsx("h3",{children:"選擇左側功能開始使用"})})}};return m.jsxs("div",{children:[m.jsx(Zh,{}),m.jsx(R0,{show:y.show,message:y.message,type:y.type,onClose:x}),m.jsxs("div",{className:"container-fluid",style:{height:"100vh",position:"relative"},children:[m.jsxs("div",{className:"row",style:{height:"100vh"},children:[m.jsx(N0,{title:"功能選單",menuItems:C,selectedFunction:n,onFunctionSelect:r}),m.jsx("div",{className:"col-md-9 p-0",children:m.jsx("div",{style:{height:"100%",overflowY:"auto"},children:F()})})]}),m.jsx("button",{className:"btn btn-outline-danger position-fixed",style:{bottom:"20px",left:"20px",zIndex:1e3},onClick:e,children:"登出"}),m.jsx(D0,{isOpen:ne,onClose:()=>ue(!1)})]})]})}function m2({onAddToCart:i,onSellerClick:e,onProductClick:n}){const[r,o]=ie.useState([]),[c,f]=ie.useState(""),[p,y]=ie.useState({quantityMin:"",weightMin:"",materialType:""});ie.useEffect(()=>{(async()=>{try{const P=$e(Pe(we,"sellers")),G=await jt(P);console.log("All sellers in database:",G.docs.length);const k=new Set;G.docs.forEach((ue,me)=>{const I=ue.data();k.add(I.userId),console.log(`Seller ${me+1}:`,{id:ue.id,userId:I.userId,username:I.username,email:I.email})});const Y=$e(Pe(we,"products")),X=await jt(Y);console.log("All products in database:",X.docs.length);const se=[];X.docs.forEach((ue,me)=>{const I=ue.data(),R=!k.has(I.sellerId);R&&se.push({id:ue.id,name:I.name,sellerId:I.sellerId}),console.log(`Product ${me+1}:`,{id:ue.id,name:I.name,sellerId:I.sellerId,price:I.price,hasWrongSellerId:R})});const re=$e(Pe(we,"buyers")),ne=await jt(re);console.log("All buyers in database:",ne.docs.length),ne.docs.forEach((ue,me)=>{const I=ue.data();console.log(`Buyer ${me+1}:`,{id:ue.id,userId:I.userId,username:I.username,email:I.email})}),se.length>0&&(console.warn("⚠️ Products with wrong seller IDs found:",se),console.log("These products should be deleted or their sellerId should be corrected."))}catch(P){console.error("Error checking data:",P)}})()},[]),ie.useEffect(()=>{const S=$e(Pe(we,"products")),P=Bs(S,async G=>{const k=[];for(const Y of G.docs){const X=Y.data();try{console.log("Fetching seller for product:",X.name,"sellerId:",X.sellerId);const se=$e(Pe(we,"sellers"),ht("userId","==",X.sellerId)),re=await jt(se);console.log("Seller query result:",re.docs.length,"docs found");let ne="未知賣家";if(!re.empty)ne=re.docs[0].data().username||"未知賣家",console.log("Found seller:",ne);else{console.log("No seller found, checking if it's a buyer ID...");const ue=$e(Pe(we,"buyers"),ht("userId","==",X.sellerId)),me=await jt(ue);if(me.empty)console.log("No seller found for sellerId:",X.sellerId);else{const I=me.docs[0].data();ne=`[錯誤] ${I.username} (這是買家ID)`,console.log("Found buyer instead of seller:",I.username)}}k.push({id:Y.id,...X,sellerName:ne})}catch(se){console.error("Error fetching seller for product:",se),k.push({id:Y.id,...X,sellerName:"未知賣家"})}}o(k)});return()=>P()},[]);const _=r.filter(S=>{const P=S.name.toLowerCase().includes(c.toLowerCase()),G=(()=>{if(!S.quantity)return!0;const X=Number(S.quantity);if(isNaN(X))return!0;const se=Number(p.quantityMin);return!p.quantityMin||!isNaN(se)&&X>=se})(),k=(()=>{if(!S.weight)return!0;const X=Number(S.weight.replace(/[^\d.]/g,""));if(isNaN(X))return!0;const se=Number(p.weightMin);return!p.weightMin||!isNaN(se)&&X>=se})(),Y=!p.materialType||S.materialType&&S.materialType.toLowerCase().includes(p.materialType.toLowerCase());return P&&G&&k&&Y}),T=(S,P)=>{y(G=>({...G,[S]:P}))},A=()=>{f(""),y({quantityMin:"",weightMin:"",materialType:""})};return m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"待回收廢料"}),m.jsxs("div",{className:"card mb-4",children:[m.jsx("div",{className:"card-header",children:m.jsx("h5",{className:"mb-0",children:"搜尋條件"})}),m.jsxs("div",{className:"card-body",children:[m.jsxs("div",{className:"row mb-3",children:[m.jsxs("div",{className:"col-md-6",children:[m.jsx("label",{className:"form-label",children:"商品名稱"}),m.jsx("input",{type:"text",className:"form-control",placeholder:"搜尋商品名稱...",value:c,onChange:S=>f(S.target.value)})]}),m.jsx("div",{className:"col-md-6 d-flex align-items-end",children:m.jsx("button",{className:"btn btn-outline-secondary",onClick:A,children:"清除搜尋"})})]}),m.jsxs("div",{className:"row",children:[m.jsxs("div",{className:"col-md-6 col-lg-4 mb-3",children:[m.jsx("label",{className:"form-label",children:"數量 (至少)"}),m.jsx("input",{type:"number",className:"form-control",placeholder:"輸入最小數量...",min:"0",value:p.quantityMin,onChange:S=>T("quantityMin",S.target.value)})]}),m.jsxs("div",{className:"col-md-6 col-lg-4 mb-3",children:[m.jsx("label",{className:"form-label",children:"重量 (至少)"}),m.jsx("input",{type:"number",className:"form-control",placeholder:"輸入最小重量...",min:"0",value:p.weightMin,onChange:S=>T("weightMin",S.target.value)})]}),m.jsxs("div",{className:"col-md-6 col-lg-4 mb-3",children:[m.jsx("label",{className:"form-label",children:"建材種類"}),m.jsxs("select",{className:"form-select",value:p.materialType,onChange:S=>T("materialType",S.target.value),children:[m.jsx("option",{value:"",children:"全部"}),m.jsx("option",{value:"玻璃",children:"玻璃"}),m.jsx("option",{value:"金屬",children:"金屬"}),m.jsx("option",{value:"瀝青",children:"瀝青"}),m.jsx("option",{value:"煤灰",children:"煤灰"}),m.jsx("option",{value:"泡沫塑料",children:"泡沫塑料"}),m.jsx("option",{value:"塑膠",children:"塑膠"}),m.jsx("option",{value:"碎石骨料",children:"碎石骨料"}),m.jsx("option",{value:"挖掘料",children:"挖掘料"}),m.jsx("option",{value:"橡膠",children:"橡膠"}),m.jsx("option",{value:"公眾填料",children:"公眾填料"}),m.jsx("option",{value:"其他",children:"其他"})]})]})]})]})]}),m.jsx("div",{className:"row",children:_.length===0?m.jsx("div",{className:"col-12 text-center text-muted",children:c?"找不到符合搜尋條件的商品":"尚無商品"}):_.map(S=>m.jsx("div",{className:"col-md-4 mb-3",children:m.jsx("div",{className:"card",style:{cursor:"pointer"},onClick:()=>n(S),children:m.jsxs("div",{className:"card-body",children:[m.jsx("h5",{className:"card-title",children:S.name}),m.jsxs("p",{className:"card-text",children:[m.jsx("strong",{children:"價格:"})," $",S.price,m.jsx("br",{}),m.jsx("strong",{children:"庫存:"})," ",S.quantity,S.weight&&m.jsxs(m.Fragment,{children:[m.jsx("br",{}),m.jsx("strong",{children:"重量:"})," ",S.weight]}),S.materialType&&m.jsxs(m.Fragment,{children:[m.jsx("br",{}),m.jsx("strong",{children:"建材種類:"})," ",S.materialType]}),S.location&&m.jsxs(m.Fragment,{children:[m.jsx("br",{}),m.jsx("strong",{children:"地點:"})," ",S.location]}),m.jsx("br",{}),m.jsx("strong",{children:"賣家:"})," ",m.jsx("button",{className:"btn btn-link p-0 text-decoration-underline",onClick:P=>{P.stopPropagation(),e(S.sellerId)},style:{color:"#0d6efd"},children:S.sellerName})]}),m.jsx("button",{className:"btn btn-primary btn-sm",onClick:P=>{P.stopPropagation(),i(S)},disabled:S.quantity<=0,children:S.quantity<=0?"缺貨":"加入購物車"})]})})},S.id))})]})}function p2({cart:i,onUpdateCartQuantity:e,onRemoveFromCart:n,onNavigateToProducts:r,getTotalPrice:o,onConfirmOrder:c}){return m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"購物車"}),i.length===0?m.jsxs("div",{className:"text-center text-muted",children:[m.jsx("p",{children:"購物車是空的"}),m.jsx("button",{className:"btn btn-primary",onClick:r,children:"瀏覽商品"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"table-responsive",children:m.jsxs("table",{className:"table table-striped",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"商品名稱"}),m.jsx("th",{children:"單價"}),m.jsx("th",{children:"數量"}),m.jsx("th",{children:"小計"}),m.jsx("th",{children:"操作"})]})}),m.jsx("tbody",{children:i.map(f=>m.jsxs("tr",{children:[m.jsx("td",{children:f.name}),m.jsxs("td",{children:["$",f.price]}),m.jsx("td",{children:m.jsxs("div",{className:"input-group",style:{width:"120px"},children:[m.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>e(f.id,f.quantity-1),children:"-"}),m.jsx("input",{type:"number",className:"form-control form-control-sm text-center",value:f.quantity,onChange:p=>e(f.id,parseInt(p.target.value)||0),min:"1"}),m.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>e(f.id,f.quantity+1),children:"+"})]})}),m.jsxs("td",{children:["$",(f.price*f.quantity).toFixed(2)]}),m.jsx("td",{children:m.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>n(f.id),children:"移除"})})]},f.id))})]})}),m.jsx("div",{className:"mt-4",children:m.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[m.jsxs("h4",{children:["總計: $",o().toFixed(2)]}),m.jsx("button",{className:"btn btn-success btn-lg",onClick:c,children:"確認"})]})})]})]})}function g2({selectedSeller:i,onBackToProducts:e,onAddToCart:n,onContactSeller:r}){const[o,c]=ie.useState([]);return ie.useEffect(()=>{if(i?.id){const f=$e(Pe(we,"products"),ht("sellerId","==",i.id)),p=Bs(f,y=>{const _=[];y.forEach(T=>{_.push({id:T.id,...T.data()})}),c(_)});return()=>p()}},[i?.id]),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[m.jsx("h3",{className:"mb-0",children:"賣家資訊"}),m.jsx("button",{className:"btn btn-secondary",onClick:e,children:"返回待回收廢料"})]}),i?m.jsx("div",{className:"row justify-content-center",children:m.jsx("div",{className:"col-md-8",children:m.jsx("div",{className:"card",children:m.jsxs("div",{className:"card-body",children:[m.jsx("h5",{className:"card-title",children:i.username}),m.jsxs("div",{className:"mb-3",children:[m.jsx("strong",{children:"電子郵件:"})," ",i.email]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("strong",{children:"聯絡電話:"})," ",i.phoneNumber]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("strong",{children:"用戶類型:"})," 賣家"]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("strong",{children:"註冊時間:"})," ",i.createdAt?i.createdAt.toDate().toLocaleDateString("zh-TW"):"未知"]}),r&&m.jsx("div",{className:"mt-3",children:m.jsxs("button",{className:"btn btn-primary",onClick:()=>r(i.id,i.username),children:[m.jsx("i",{className:"fas fa-comment me-2"}),"聯絡賣家"]})})]})})})}):m.jsx("div",{className:"text-center",children:m.jsx("p",{children:"載入賣家資訊中..."})}),i&&m.jsx("div",{className:"row mt-4",children:m.jsxs("div",{className:"col-12",children:[m.jsx("h4",{className:"mb-3",children:"此賣家的商品"}),o.length===0?m.jsx("div",{className:"text-center text-muted",children:m.jsx("p",{children:"此賣家目前沒有商品"})}):m.jsx("div",{className:"row",children:o.map(f=>m.jsx("div",{className:"col-md-4 mb-3",children:m.jsx("div",{className:"card",children:m.jsxs("div",{className:"card-body",children:[m.jsx("h5",{className:"card-title",children:f.name}),m.jsxs("p",{className:"card-text",children:[m.jsx("strong",{children:"價格:"})," $",f.price,m.jsx("br",{}),m.jsx("strong",{children:"庫存:"})," ",f.quantity,m.jsx("br",{}),f.description&&m.jsxs(m.Fragment,{children:[m.jsx("strong",{children:"描述:"})," ",f.description,m.jsx("br",{})]})]}),m.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>n(f),disabled:f.quantity<=0,children:f.quantity<=0?"缺貨":"加入購物車"})]})})},f.id))})]})})]})}function y2({orders:i}){return m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"mb-4",children:"我的訂單"}),i.length===0?m.jsx("div",{className:"text-center text-muted",children:m.jsx("p",{children:"尚無訂單記錄"})}):m.jsx("div",{className:"table-responsive",children:m.jsxs("table",{className:"table table-striped",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"訂單編號"}),m.jsx("th",{children:"商品"}),m.jsx("th",{children:"數量"}),m.jsx("th",{children:"總金額"}),m.jsx("th",{children:"訂單時間"}),m.jsx("th",{children:"狀態"})]})}),m.jsx("tbody",{children:i.map(e=>m.jsxs("tr",{children:[m.jsx("td",{children:e.orderNumber}),m.jsx("td",{children:e.items.map((n,r)=>m.jsxs("div",{children:[n.name," - $",n.price]},r))}),m.jsx("td",{children:e.items.map((n,r)=>m.jsx("div",{children:n.quantity},r))}),m.jsxs("td",{children:["$",e.totalAmount.toFixed(2)]}),m.jsx("td",{children:e.createdAt?e.createdAt.toDate?e.createdAt.toDate().toLocaleDateString("zh-TW"):new Date(e.createdAt.seconds*1e3).toLocaleDateString("zh-TW"):"未知"}),m.jsx("td",{children:e.status==="pending"?m.jsx("span",{className:"badge bg-warning",children:"等待賣家確認"}):m.jsx("span",{className:"badge bg-success",children:"已確認"})})]},e.id))})]})})]})}function _2({product:i,onBackToProducts:e,onAddToCart:n,onSellerClick:r,onContactSeller:o}){const[c,f]=ie.useState(null),[p,y]=ie.useState(1);ie.useEffect(()=>{(async()=>{if(i?.sellerId)try{const S=$e(Pe(we,"sellers"),ht("userId","==",i.sellerId)),P=await jt(S);if(!P.empty){const G=P.docs[0].data();f(G)}}catch(S){console.error("Error fetching seller info:",S)}})()},[i?.sellerId]);const _=()=>{const A={...i,quantity:p};n(A),alert(`已將 ${p} 個 ${i.name} 加入購物車！`)},T=A=>{const S=parseInt(A.target.value);S>=1&&S<=i.quantity&&y(S)};return m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[m.jsx("h3",{className:"mb-0",children:"商品詳情"}),m.jsx("button",{className:"btn btn-secondary",onClick:e,children:"返回待回收廢料"})]}),i?m.jsxs("div",{className:"row",children:[m.jsx("div",{className:"col-md-6 mb-4",children:m.jsx("div",{className:"card",children:m.jsxs("div",{className:"card-body text-center",children:[m.jsx("div",{className:"bg-light d-flex align-items-center justify-content-center",style:{height:"300px",borderRadius:"8px"},children:m.jsx("i",{className:"fas fa-image fa-3x text-muted"})}),m.jsx("p",{className:"text-muted mt-2",children:"商品圖片"})]})})}),m.jsx("div",{className:"col-md-6",children:m.jsx("div",{className:"card",children:m.jsxs("div",{className:"card-body",children:[m.jsx("h2",{className:"card-title mb-3",children:i.name}),m.jsx("div",{className:"mb-3",children:m.jsxs("h4",{className:"text-primary",children:["$",i.price]})}),i.description&&m.jsxs("div",{className:"mb-3",children:[m.jsx("h5",{children:"商品描述"}),m.jsx("p",{className:"text-muted",children:i.description})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("h5",{children:"庫存狀況"}),m.jsx("span",{className:`badge ${i.quantity>0?"bg-success":"bg-danger"}`,children:i.quantity>0?`庫存 ${i.quantity} 個`:"缺貨"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h5",{children:"賣家資訊"}),m.jsxs("div",{className:"d-flex align-items-center",children:[m.jsx("span",{className:"me-2",children:"賣家:"}),m.jsx("button",{className:"btn btn-link p-0 text-decoration-underline",onClick:()=>r(i.sellerId),style:{color:"#0d6efd"},children:i.sellerName})]}),c&&m.jsxs("small",{className:"text-muted d-block",children:["註冊時間:"," ",c.createdAt?.toDate().toLocaleDateString("zh-TW")||"未知"]}),o&&m.jsx("div",{className:"mt-2",children:m.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>o(i.sellerId,i.sellerName),children:[m.jsx("i",{className:"fas fa-comment me-1"}),"聯絡賣家"]})})]}),i.quantity>0&&m.jsxs("div",{className:"mb-3",children:[m.jsx("h5",{children:"購買數量"}),m.jsxs("div",{className:"d-flex align-items-center",children:[m.jsx("input",{type:"number",className:"form-control me-2",style:{width:"100px"},min:"1",max:i.quantity,value:p,onChange:T}),m.jsxs("span",{className:"text-muted",children:["/ ",i.quantity," 個"]})]})]}),m.jsx("div",{className:"d-grid gap-2",children:m.jsx("button",{className:"btn btn-primary btn-lg",onClick:_,disabled:i.quantity<=0,children:i.quantity<=0?"缺貨":`加入購物車 (${p} 個)`})})]})})})]}):m.jsx("div",{className:"text-center",children:m.jsx("p",{children:"載入商品資訊中..."})})]})}function v2({user:i,onLogout:e}){const[n,r]=ie.useState("products"),[o,c]=ie.useState([]),[f,p]=ie.useState([]),[y,_]=ie.useState(null),[T,A]=ie.useState(null),[S,P]=ie.useState("messages"),[G,k]=ie.useState(null),[Y,X]=ie.useState(!1);ie.useEffect(()=>{if(i){const x=$e(Pe(we,"orders"),ht("buyerId","==",i.uid)),M=Bs(x,N=>{const Ne=[];N.forEach(Ge=>{Ne.push({id:Ge.id,...Ge.data()})}),p(Ne)});return()=>M()}},[i]);const se=x=>{const M=o.find(N=>N.id===x.id);c(M?o.map(N=>N.id===x.id?{...N,quantity:N.quantity+1}:N):[...o,{...x,quantity:1}])},re=x=>{c(o.filter(M=>M.id!==x))},ne=(x,M)=>{M<=0?re(x):c(o.map(N=>N.id===x?{...N,quantity:M}:N))},ue=()=>o.reduce((x,M)=>x+M.price*M.quantity,0),me=async()=>{if(o.length===0){alert("購物車是空的，無法確認訂單");return}try{console.log("Cart items before grouping:",o);const x=o.reduce((F,$)=>{console.log("Processing cart item:",$);const oe=$.sellerId;return F[oe]||(F[oe]={sellerId:oe,sellerName:$.sellerName,items:[],totalAmount:0}),F[oe].items.push({productId:$.id,name:$.name,price:$.price,quantity:$.quantity}),F[oe].totalAmount+=$.price*$.quantity,F},{}),M=$e(Pe(we,"buyers"),ht("userId","==",i.uid)),N=await jt(M),Ne=N.empty?"未知買家":N.docs[0].data().username,Ge=Object.values(x).map(async F=>{console.log("Creating order for seller:",F);const $={buyerId:i.uid,buyerName:Ne,sellerId:F.sellerId,sellerName:F.sellerName,items:F.items,totalAmount:F.totalAmount,status:"pending",createdAt:Fn()};console.log("Order data to be saved:",$);const oe=await _l(Pe(we,"orders"),$),Ae=`ORD-${Date.now()}-${F.sellerId.slice(-4)}`;return await Wr(oe,{orderNumber:Ae}),{id:oe.id,orderNumber:Ae,...$}});await Promise.all(Ge),c([]),alert("訂單已提交，等待賣家確認！"),r("orders")}catch(x){console.error("Error confirming order:",x),alert("訂單確認失敗，請重試")}},I=[{id:"products",label:"待回收廢料",icon:"fas fa-box"},{id:"cart",label:"購物車",icon:"fas fa-shopping-cart",badge:o.length},{id:"orders",label:"我的訂單",icon:"fas fa-list"},{id:"messages",label:"訊息",icon:"fas fa-comments"},{id:"profile",label:"個人資料",icon:"fas fa-user"},{id:"aiChat",label:"AI 助手",icon:"fas fa-robot"}],R=async x=>{try{const M=$e(Pe(we,"sellers"),ht("userId","==",x)),N=await jt(M);if(!N.empty){const Ne=N.docs[0].data(),Ge=$e(Pe(we,"sellerProfiles"),ht("sellerId","==",x)),F=await jt(Ge),$=F.empty?{}:F.docs[0].data();_({id:x,username:Ne.username,email:Ne.email,phoneNumber:$.phoneNumber||"未提供",createdAt:Ne.createdAt}),r("sellerInfo")}}catch(M){console.error("Error fetching seller info:",M)}},C=x=>{A(x),r("productDetail")},V=()=>{switch(n){case"products":return m.jsx(m2,{onAddToCart:se,onSellerClick:R,onProductClick:C});case"cart":return m.jsx(p2,{cart:o,onUpdateCartQuantity:ne,onRemoveFromCart:re,onNavigateToProducts:()=>r("products"),getTotalPrice:ue,onConfirmOrder:me});case"orders":return m.jsx(y2,{orders:f});case"sellerInfo":return m.jsx(g2,{selectedSeller:y,onBackToProducts:()=>r("products"),onAddToCart:se,onContactSeller:(x,M)=>{k({userId:x,userName:M}),r("messages")}});case"messages":return m.jsxs("div",{className:"h-100",children:[S==="messages"?m.jsx(C0,{user:i,userType:"buyer",onStartChat:(x,M)=>{k({userId:x,userName:M})},selectedChatUser:G}):m.jsx(x0,{user:i,userType:"buyer",onStartChat:(x,M)=>{k({userId:x,userName:M}),P("messages")}}),m.jsxs("div",{className:"p-3 border-top",children:[m.jsx("button",{className:`btn me-2 ${S==="messages"?"btn-primary":"btn-outline-primary"}`,onClick:()=>P("messages"),children:"訊息列表"}),m.jsx("button",{className:`btn ${S==="findUsers"?"btn-primary":"btn-outline-primary"}`,onClick:()=>P("findUsers"),children:"尋找賣家"})]})]});case"profile":return m.jsx(I0,{user:i,userType:"buyer"});case"aiChat":return m.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:m.jsxs("div",{className:"text-center",children:[m.jsx("i",{className:"fas fa-robot fa-4x text-primary mb-3"}),m.jsx("h3",{children:"AI 助手"}),m.jsx("p",{className:"text-muted mb-4",children:"點擊下方按鈕開始與 AI 助手對話"}),m.jsxs("button",{className:"btn btn-primary btn-lg",onClick:()=>X(!0),children:[m.jsx("i",{className:"fas fa-comments me-2"}),"開始對話"]})]})});case"productDetail":return m.jsx(_2,{product:T,onBackToProducts:()=>r("products"),onAddToCart:se,onSellerClick:R,onContactSeller:(x,M)=>{k({userId:x,userName:M}),r("messages")}});default:return m.jsx("div",{className:"p-4 text-center",children:m.jsx("h3",{children:"選擇左側功能開始使用"})})}};return m.jsxs("div",{children:[m.jsx(Zh,{}),m.jsxs("div",{className:"container-fluid",style:{height:"100vh",position:"relative"},children:[m.jsxs("div",{className:"row",style:{height:"100vh"},children:[m.jsx(N0,{title:"功能選單",menuItems:I,selectedFunction:n,onFunctionSelect:r}),m.jsx("div",{className:"col-md-9 p-0",children:m.jsx("div",{style:{height:"100%",overflowY:"auto"},children:V()})})]}),m.jsx("button",{className:"btn btn-outline-danger position-fixed",style:{bottom:"20px",left:"20px",zIndex:1e3},onClick:e,children:"登出"}),m.jsx(D0,{isOpen:Y,onClose:()=>X(!1)})]})]})}function E2(){const[i,e]=ie.useState("login"),[n,r]=ie.useState(null);ie.useEffect(()=>{const _=sR(Zo,async T=>{r(T),T||e("login")});return()=>_()},[]);const o=_=>{_==="seller"?e("sellerDashboard"):_==="buyer"&&e("buyerDashboard")},c=()=>{e("signup")},f=_=>{},p=()=>{e("login")};if(i==="login")return m.jsx(o2,{onLoginSuccess:o,onSignUpClick:c});if(i==="signup")return m.jsx(l2,{onBackToLogin:p,onSignUpSuccess:f});const y=async()=>{try{await UT(Zo),e("login"),r(null)}catch(_){console.error("Logout error:",_)}};return i==="sellerDashboard"?m.jsx(d2,{user:n,onLogout:y}):i==="buyerDashboard"?m.jsx(v2,{user:n,onLogout:y}):null}function T2(){return m.jsx("div",{children:m.jsx(E2,{})})}(function(i){if(i.search[1]==="/"){var e=i.search.slice(1).split("&").map(function(n){return n.replace(/~and~/g,"&")}).join("?");window.history.replaceState(null,"",i.pathname.slice(0,-1)+e+i.hash)}})(window.location);yS.createRoot(document.getElementById("root")).render(m.jsx(ie.StrictMode,{children:m.jsx(T2,{})}));
